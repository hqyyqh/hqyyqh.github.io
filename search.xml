<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>//1/</url>
    <content><![CDATA[<h2 id="替换windows记事本">替换Windows记事本</h2>
<p><a href="https://github.com/rizonesoft/Notepad3">Notepad3</a>
功能强大，速度更佳</p>
<h2 id="typora-已支持-picgo-上传图片">Typora 已支持 PicGo 上传图片</h2>
<p>点击<a
href="https://support.typora.io/Upload-Image/"><strong>了解更多</strong></a>有使用指引</p>
<p><img
src="https://image.pencilq.com/images/2020/03/13/typora-picgo_compress.jpg" /></p>
<span id="more"></span>
<h2 id="powershell-ps1-脚本输出中文到剪贴板乱码">Powershell ps1
脚本输出中文到剪贴板乱码</h2>
<p><strong>解决方案1</strong></p>
<p>使用 <code>Set-Clipboard</code> 代替 <code>clip.exe</code></p>
<blockquote>
<p>参考 <a
href="https://stackoverflow.com/questions/48016113/how-to-pass-utf-8-characters-to-clip-exe-with-powershell-without-conversion-to-a">How
to pass UTF-8 characters to clip.exe with PowerShell without conversion
to another charset?</a></p>
</blockquote>
<p><strong>解决方案2</strong></p>
<ol type="1">
<li>脚本保存格式为 <code>GB2312</code></li>
<li>脚本添加命令
<code>$OutputEncoding = [Console]::OutputEncoding</code></li>
</ol>
<p>示例</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$OutputEncoding</span> = [<span class="type">Console</span>]::OutputEncoding</span><br><span class="line"><span class="variable">$text</span> = <span class="string">&#x27;中文 English&#x27;</span></span><br><span class="line"><span class="variable">$text</span></span><br><span class="line"><span class="variable">$text</span> | clip.exe</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考链接: <a
href="https://devblogs.microsoft.com/powershell/outputencoding-to-the-rescue/">$OutputEncoding
to the rescue</a></p>
</blockquote>
<h2 id="idm-开启极速-32-线程">IDM 开启极速 32 线程</h2>
<p><img src="https://image.pencilq.com/images/2019/12/26/IDM32.jpg" style="zoom:67%;" /></p>
<h2 id="快速移动应用到另一个虚拟桌面">快速移动应用到另一个虚拟桌面</h2>
<p><a
href="https://github.com/Eun/MoveToDesktop"><i class="fa fa-github fa-fw" aria-hidden="true"></i>
MoveToDesktop</a></p>
<h2 id="视频字幕">视频字幕</h2>
<ol type="1">
<li>上字幕，压制视频：<a href="https://arctime.org/">Arctime
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></li>
<li>封装字幕：<a href="https://mkvtoolnix.download/">mkvtoolnix
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a>，<a
href="https://www.bilibili.com/read/cv987728/">教程
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></li>
</ol>
<h2 id="powertoys"><a
href="https://github.com/microsoft/PowerToys/releases">PowerToys
<i class="fa fa-link fa-fw"></i></a></h2>
<ul>
<li>窗口管理器 FancyZones</li>
<li>批量重命名 PowerRename</li>
<li>Win+ 快捷键指南 Shortcut Guide</li>
</ul>
<figure>
<img src="https://image.pencilq.com/images/2019/12/13/PowerToys.jpg"
alt="PowerToys" />
<figcaption aria-hidden="true">PowerToys</figcaption>
</figure>
<h2 id="mathematica-行向量与列向量">Mathematica 行向量与列向量</h2>
<ul>
<li>Mathematica 中表示一行与一列相乘</li>
</ul>
<p><span class="math display">\[
\left[ {\begin{array}{*{20}{c}}
{a_1}&amp;{b_1}&amp;{c_1}
\end{array}} \right]\left[ {\begin{array}{*{20}{c}}
{a_2}\\
{b_2}\\
{c_2}
\end{array}} \right] = a_1a_2 + b_1b_2 + c_1c_2
\]</span></p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">MatA</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="variable">a1</span><span class="operator">,</span> <span class="variable">b1</span><span class="operator">,</span> <span class="variable">c1</span><span class="punctuation">&#125;</span><span class="operator">;</span></span><br><span class="line"><span class="variable">MatB</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="variable">a2</span><span class="operator">,</span> <span class="variable">b2</span><span class="operator">,</span> <span class="variable">c3</span><span class="punctuation">&#125;</span><span class="operator">;</span></span><br><span class="line"><span class="variable">MatA</span><span class="operator">.</span><span class="variable">MatB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*Out=a1 a2 + b1 b2 + c1 c3*)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表示一列与一行相乘</li>
</ul>
<p><span class="math display">\[
\left[ {\begin{array}{*{20}{c}}
{a_1}\\
{b_1}\\
{c_1}
\end{array}} \right]\left[ {\begin{array}{*{20}{c}}
{a_2}&amp;{b_2}&amp;{c_2}
\end{array}} \right] = \left[ {\begin{array}{*{20}{c}}
{a_1a_2}&amp;{a_1b_2}&amp;{a_1c_3}\\
{a_2b_1}&amp;{b_1b_2}&amp;{b_1b_3}\\
{a_2c_1}&amp;{b_2c_1}&amp;{c_1c_3}
\end{array}} \right]
\]</span></p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">MatA</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="variable">a1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">b1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">c1</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">;</span></span><br><span class="line"><span class="variable">MatB</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="variable">a2</span><span class="operator">,</span> <span class="variable">b2</span><span class="operator">,</span> <span class="variable">c3</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">;</span></span><br><span class="line"><span class="variable">MatA</span><span class="operator">.</span><span class="variable">MatB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*Out=&#123;&#123;a1 a2, a1 b2, a1 c3&#125;, &#123;a2 b1, b1 b2, b1 c3&#125;, &#123;a2 c1, b2 c1, c1 c3&#125;&#125;*)</span></span><br></pre></td></tr></table></figure>
<p>查看维数，列乘行的情形下，两个矩阵维数需要满足 <span
class="math inline">\(m \times n\)</span> 和 <span
class="math inline">\(n\times m\)</span> 才能运算。这也是上面需要将
<code>&#123;a,b,c&#125;</code> 换成 <code>&#123; &#123;a&#125;,&#123;b&#125;,&#123;c&#125;&#125;</code> 的原因。</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Dimensions</span> <span class="operator">/@</span> <span class="punctuation">&#123;</span><span class="variable">MatA</span><span class="operator">,</span> <span class="variable">MatB</span><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*Out=&#123;&#123;3, 1&#125;, &#123;1, 3&#125;&#125;*)</span></span><br></pre></td></tr></table></figure>
<h2 id="mathematica-自动保存">Mathematica 自动保存</h2>
<p>对所有笔记本开启运行后自动保存，详情参考 <a
href="https://mathematica.stackexchange.com/a/14036/63168"><i class="fa fa-link fa-fw"></i></a></p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">CurrentValue</span><span class="punctuation">[</span><span class="built_in">$FrontEnd</span><span class="operator">,</span> <span class="string">&quot;NotebookAutoSave&quot;</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="built_in">True</span></span><br></pre></td></tr></table></figure>
<h2 id="section"></h2>
<p>在 Mathemtica 中导入 csv
表格后，发现最后多了几百个空值行。在知乎发现相似的问题，按照 <a
href="https://www.zhihu.com/question/25121978/answer/94400178">melody
<i class="fa fa-link fa-fw"></i></a> 的回答成功解决。</p>
<div class="note success"><ol type="1">
<li>选中你想开始删除的那堆空白行的首行，同时点键盘 ctrl+shift +
向下箭头（如果多余空白行在右侧，那就向右键头），全选全部无用空格行；</li>
<li>第二，右键删除；</li>
<li>第三，重点来了！删除后啥都先别干，一定要点保存！然后关闭 excel
表格，重新打开。</li>
<li>done！第三步不做的话，excel 自己又填充回来！</li>
</ol>
</div>
<blockquote>
<p>作者：melody
链接：https://www.zhihu.com/question/25121978/answer/94400178 来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</blockquote>
<h2 id="section-1"></h2>
<p><a
href="https://cniter.github.io/posts/6315717b.html">FFmpeg剪切与合并命令使用小结
<i class="fa fa-external-link fa-fw"></i></a></p>
<h2 id="section-2"></h2>
<p>期刊影响因子查询</p>
<p><a href="http://www.letpub.com.cn/index.php?page=journalapp">letpub
<i class="fa fa-external-link fa-fw"></i></a></p>
<p><a href="http://sci.justscience.cn">sci 期刊 中文核心
<i class="fa fa-external-link fa-fw"></i></a></p>
<h2 id="section-3"></h2>
<p>win10 <a
href="https://stepneverstop.github.io/win-rightclick-create-md.html">右键新建
<i class="fa fa-external-link fa-fw"></i></a> markdown 文件</p>
<h2 id="section-4"></h2>
<p>使用 picgo-plugin-web-uploader 上传图片到 Chevereto 的 <a
href="https://github.com/yuki-xin/picgo-plugin-web-uploader/issues/3#issuecomment-529389034">配置
<i class="fa fa-github"></i></a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">url <span class="punctuation">:</span> http<span class="punctuation">:</span><span class="comment">//your-site/api/1/upload</span></span><br><span class="line">paramName<span class="punctuation">:</span> source</span><br><span class="line">jsonPath<span class="punctuation">:</span> image.url</span><br><span class="line">customBody<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;key&quot;</span><span class="punctuation">:</span><span class="string">&quot;yourkey&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="section-5"></h2>
<p>Markdown 链接 <code>[text](link)</code> 中，link 包含 <code>()</code>
会导致转义失败，使用 <code>%28</code> 代替
<code>(</code>，<code>%29</code> 代替 <code>)</code>。</p>
<blockquote>
<p><a href="https://gohom.win/2015/12/24/MD-bracket/">Markdown
链接括号的问题 <i class="fa fa-external-link fa-fw"></i></a></p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>有趣的东西</title>
    <url>//10/</url>
    <content><![CDATA[<div class="tabs" id="tabsone"><ul class="nav-tabs"><li class="tab active"><a href="#tabsone-1"><i class="fa fa-forward"></i>克罗地亚的双头蛇</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tabsone-1"><video src="https://file.pencilq.com/videos/Two-Headed%20Snake%20Found%20In%20Croatia-sTpIRbrOruA.mkv" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video>
<p><a href="https://www.youtube.com/watch?v=sTpIRbrOruA">Two-Headed
Snake Found In Croatia
<i class="fa fa-youtube-square fa-fw"></i></a></p></div></div></div>
<span id="more"></span>
<div class="tabs" id="tabsone"><ul class="nav-tabs"><li class="tab active"><a href="#tabsone-1"><i class="fa fa-forward"></i>剪切稀化流体</a></li><li class="tab"><a href="#tabsone-2"><i class="fa fa-forward"></i>眼镜蛇波/炸弹棒</a></li><li class="tab"><a href="#tabsone-3"><i class="fa fa-forward"></i>气凝胶</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tabsone-1"><p>洗发水，沐浴露，沼泽</p>
<video src="https://file.pencilq.com/videos/Shear%20thinning.mkv" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video>
<p><a href="https://www.wikiwand.com/en/Shear_thinning">维基百科
<i class="fa fa-wikipedia-w fa-fw"></i></a> <a
href="https://www.youtube.com/watch?v=agCf0alxpJY">剪切稀化非牛顿流体
<i class="fa fa-youtube-square fa-fw"></i></a></p></div><div class="tab-pane" id="tabsone-2"><div
style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
<iframe src="//player.bilibili.com/player.html?aid=999354&amp;cid=1444859&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;">
</iframe>
</div></div><div class="tab-pane" id="tabsone-3"><video src="https://file.pencilq.com/videos/World&#39;s%20Lightest%20Solid!-AeJ9q45PfD0.mkv" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video>
<p><a
href="https://www.youtube.com/watch?v=AeJ9q45PfD0">世界上最轻的固体
<i class="fa fa-youtube-square fa-fw"></i></a></p></div></div></div>
]]></content>
  </entry>
  <entry>
    <title>matebook14 Linux</title>
    <url>//12/</url>
    <content><![CDATA[<blockquote class="blockquote-center">
<p>中午睡醒人迷糊 打开知乎惊坐起</p>

</blockquote>
<span id="more"></span>
<p><img
src="https://image.pencilq.com/images/2019/09/08/matebook14-zhihu.jpg" /></p>
<p><img
src="https://image.pencilq.com/images/2019/09/08/caozuo.gif" /></p>
<blockquote class="blockquote-center">
<p>就让我先以身试水吧</p>

</blockquote>
<p><img src="https://image.pencilq.com/images/2019/09/08/weisuo.gif" />
<img src="https://image.pencilq.com/images/2019/09/08/xiadan.jpg" /></p>
<p>附上邪恶的链接：</p>
<p><a
href="https://consumer.huawei.com/cn/support/laptops/matebook-14/">Matebook
14 驱动下载 <i class="fa fa-link fa-fw"></i></a> <a
href="https://zsaxi.com/4196">MateBook 14 第三方 Linux 版 开箱评测
<i class="fa fa-link fa-fw"></i></a></p>
]]></content>
  </entry>
  <entry>
    <title>机器学习资料收集</title>
    <url>//11/</url>
    <content><![CDATA[<h2 id="section"><a class="btn" href="https://github.com/scutan90/DeepLearning-500-questions "><i class="fa fa-github-square fa-lg fa-fw"></i>深度学习 500 问</a></h2>
<h2 id="section-1"><a class="btn" href="https://github.com/exacity/deeplearningbook-chinese "><i class="fa fa-github-square fa-lg fa-fw"></i>深度学习中文版</a></h2>
<a class="btn" href="https://nndl.github.io/ "><i class="fa fa-github-square fa-lg fa-fw"></i>神经网络与深度学习</a>
<p>-<span id="more"></span> <a class="btn" href="https://github.com/machinelearningmindset/machine-learning-course "><i class="fa fa-github-square fa-lg fa-fw"></i>Machine Learning Course with Python</a> - <a class="btn" href="https://github.com/Mikoto10032/DeepLearning "><i class="fa fa-github-square fa-lg fa-fw"></i>深度学习入门教程 && 优秀文章</a></p>
]]></content>
  </entry>
  <entry>
    <title>Tube 和 Pipe 区别</title>
    <url>//13/</url>
    <content><![CDATA[<h2 id="t92-和-p92-区别">T92 和 P92 区别</h2>
<p>关于 T/P 的区别，T 管一般指的是 Tube
即小管，一般在锅炉中用作过热器或再热器等部位，P
管是大管，一般用在主蒸汽管道上的。像 92 钢 T 与 P
在成分上没有差别，只是工艺上不一样，所以使用时组织是不太一样的。</p>
<p>T92
用于制造火力电站锅炉的<strong>过热器或者再热器</strong>，管子外表面承受高温和燃料燃烧产生的烟气的腐蚀，内表面受高温高压蒸汽冲蚀。</p>
<p>P92
用于制造<strong>集箱和蒸汽管道</strong>，主要用于输送高温高压蒸汽，受高温高压蒸汽冲蚀。</p>
<p>二者的成分控制范围一样，但是生产工艺不一样。目前生产 T92 采用穿孔 +
冷拔或者冷轧工艺，P92 采用锻造、热轧或者挤压等工艺，由于生产工艺不同导致
P92 的组织会比 T92 粗大。</p>
<span id="more"></span>
<p>http://muchong.com/html/201105/3189618.html</p>
<h2 id="tube-和-pipe-区别">Tube 和 Pipe 区别</h2>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 39%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="header">
<th>区别</th>
<th>Tube</th>
<th>Pipe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>截面形状</td>
<td>Tube 有正方形管口的，有长方形管口的，也有圆形的</td>
<td>Pipe 都是圆形的</td>
</tr>
<tr class="even">
<td>韧性</td>
<td>Tube 有刚性的，也有紫铜、黄铜做的挠性 Tube</td>
<td>Pipe 都是刚性的，抗弯折</td>
</tr>
<tr class="odd">
<td>管径(仪表常用)</td>
<td>Tube是<strong>小管径</strong>的管子，管径一般在
1/8"<sub>5/8"(=3</sub>16 mm) 之间</td>
<td>Pipe是<strong>大管径</strong>的管子，管径一般在 15~1500 mm(=1/2~60")
之间。也有小于或大于此范围的 Pipe，但使用量少</td>
</tr>
<tr class="even">
<td>尺寸标准特点</td>
<td>Tube 用<strong>外径 OD</strong> 表示管子的管径规格，如 1/4" (6.25mm)
OD Tube 表示外径为 1/4" 的 Tube。Tube 注重外径精确，因为 Tube
采用卡套方式连接，外径相同的管子和管件之间可以用卡套连接起来</td>
<td>Pipe 用<strong>公称直径 DN</strong> 表示管子的管径规格。如 DN50 表示
2" 管，可以表示为 $ mm$ ，亦可表示为 $ mm$。Pipe 注重壁厚，因为 Pipe
主要输送流体，对内部受压能力要求高</td>
</tr>
<tr class="odd">
<td>市场简称</td>
<td><strong>Tube
壁厚较薄</strong>，市场称薄壁管，用其实际厚度尺寸（英寸或
mm）表示，一般为 1~2mm</td>
<td>Pipe 的<strong>壁厚是标准的</strong>，一般用壁厚系列号（英文缩写为
Sch. No. , Schedule Number）来表示，Sch. No. 也称为耐压级别号，从 Sch.
No. 5 到 Sch. No.
XXS，不同的管径或材质的管子，各有其标准壁厚系列；或者说 Sch. No.
相同的，但管径或材质不同的管子，其实际壁厚并不相同。</td>
</tr>
<tr class="even">
<td>连接方式</td>
<td>Tube
管壁较薄，不允许在上面套螺纹，经过退火处理后，采用卡套方式连接，也叫<strong>压接连接</strong></td>
<td>Pipe
的连接方式有<strong>法兰连接、螺纹连接</strong>和焊接连接三种，大多数场合用法兰连接，低压场合允许用螺纹连接</td>
</tr>
<tr class="odd">
<td>连接特点</td>
<td>OD 相同的 Tube 均可以用卡套连接，快捷，可多次拆卸</td>
<td>法兰、螺纹等均要注清楚标准号，如 2"-ANSI-150-RF</td>
</tr>
<tr class="even">
<td>管子弯曲</td>
<td>可以根据弯曲角度需要按规定直接弯曲（不需要用管接头），可减少潜在的漏点</td>
<td>弯曲时一般要用肘管接头连接（肘管接头一般为螺纹，若需弯曲管子要拱螺纹）</td>
</tr>
<tr class="odd">
<td>安装</td>
<td>一根6m管子,可根据现场施工具体情况,随意剪切</td>
<td>一根6m管子,可根据现场施工具体情况,随意剪切</td>
</tr>
<tr class="even">
<td>应用场合</td>
<td>Tube
一般用于仪表系统的测量管路、气动信号管路伴热保温,在线分析仪的样品管路中</td>
<td>Pipe 应用十分广泛,工艺管道和公用工程管道均采用 Pipe</td>
</tr>
<tr class="odd">
<td>连接要求</td>
<td>要能应用双卡套及单卡套</td>
<td>不能及用双卡套或单卡套连接</td>
</tr>
<tr class="even">
<td>管子特点</td>
<td>管子一般均为无缝不锈钢紫铜管黄铜管</td>
<td>无缝钢管、有缝钢管根据应用场合选用</td>
</tr>
</tbody>
</table>
<p>相关连接：</p>
<p>http://www.e-umc.cn/materialtypehome/CLA
https://www.metalsupermarkets.com/difference-between-pipe-and-tube/
http://blog.worldwidemetric.com/products/pipes-vs-tubes-is-there-a-difference/</p>
<video src="https://file.pencilq.com/videos/The Difference Between Pipe and Tube-M6te8o9GtXM.mkv" preload="metadata" controlslist="nodownload" controls playsinline poster=""></video>
<p><a href="https://www.youtube.com/watch?v=M6te8o9GtXM">The Difference
Between Pipe and Tube <i class="fa fa-youtube fa-fw"></i></a></p>
<h3
id="需要了解的概念公称直径-nominal-diameter">需要了解的概念：公称直径
nominal diameter</h3>
<p>https://www.wikiwand.com/en/Nominal_Pipe_Size
https://www.quora.com/What-is-nominal-diameter-of-a-pipe</p>
]]></content>
  </entry>
  <entry>
    <title>Visual Studio 技巧：在代码间自由穿梭</title>
    <url>//14/</url>
    <content><![CDATA[<p>当你在浏览代码时，看到了一个陌生的函数或者自定义类型，你使用转到定义查看该函数或者类型，然后再也找不回跳转过来的地方了。</p>
<span id="more"></span>
<p>##解决方法：</p>
<p>技巧：返回之前跳转的位置 使用快捷键
Ctrl+-，可以跳回到之前光标的所在位置。 使用快捷键
Ctrl+Shift+-，撤销上面的跳转。 使用（ Ctrl+-）跳回去之后，如果想在返回,
可用（Ctrl+Shift+-）撤销跳转</p>
<p>##其他一些提高效率的代码浏览快捷键：</p>
<h3 id="页面导航">页面导航</h3>
<p>PageUp 当前页面上翻一页 PageDn 当前页面下翻一页 Ctrl + 数字
切换代码标签页 Ctrl + 方向键 滚动屏幕 Ctrl+G 跳转的制定行 F6
转到定义</p>
<h3 id="光标移动">光标移动:</h3>
<p>Ctrl+] 匹配括号 将光标移动到行首：Home 将光标移动到行末：End
Ctrl+PageUp 光标移动到当前页面顶部 Ctrl+PageDn 光标移动到当前页面底部
Ctrl+Shifit+PageUp 光标从当前位置移动到页面顶部并选中之间的内容
Ctrl+Shifit+PageDw 光标从当前位置移动到页面底部并选中之间的内容</p>
<h3 id="临时调整字体大小">临时调整字体大小</h3>
<p>调大一号 ctrl + 鼠标滚轮上滚 调小一号 ctrl + 鼠标滚轮下滚</p>
<p>本文转载，<a
href="https://www.oschina.net/question/54100_17415">原文地址</a></p>
<hr />
]]></content>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Mathematica: 自定义中文词云</title>
    <url>//15/</url>
    <content><![CDATA[<blockquote>
<p><strong>前言</strong>：词云制作前需要对文本进行分词病统计频率。中文分词是中文文本处理的一个基础步骤，也是中文人机自然语言交互的基础模块。不同于英文的是，中文句子中没有词的界限，因此在进行中文自然语言处理时，通常需要先进行分词，分词效果将直接影响词性、句法树等模块的效果。当然分词只是一个工具，场景不同，要求也不同。本文使用在线网站进行处理。</p>
</blockquote>
<span id="more"></span>
<h2 id="默认样式">默认样式</h2>
<p><img
src="https://image.pencilq.com/images/2019/08/31/mma-cloud-1.jpg" /></p>
<h2 id="自定义样式">自定义样式</h2>
<p><img
src="https://image.pencilq.com/images/2019/08/31/mma-cloud-2.jpg" /></p>
<h2 id="文本分词">文本分词</h2>
<ol type="1">
<li>使用在线工具<a
href="http://www.picdata.cn/">图悦网</a>对文本进行分词处理。</li>
<li>导出数据文件，对文件格式进行处理，删除标题行，仅保留
<strong>关键词</strong> 、<strong>词频</strong> <img
src="https://image.pencilq.com/images/2019/08/31/mma-cloud-3.jpg" /></li>
</ol>
<h2 id="处理模板图片">处理模板图片</h2>
<p>将模板图片处理成黑白格式，白色为词云填充的部分 <img
src="https://image.pencilq.com/images/2019/08/31/mma-cloud-4.jpg" /></p>
<h2 id="制作词云">制作词云</h2>
<ol type="1">
<li>分词文件命名 <code>分词.xls</code>，模板图片命名为
<code>模板.png</code>。</li>
<li>创建 <code>Mathematica</code> 文件 <code>**.nb</code>。</li>
<li>上述文件放在同一目录。</li>
</ol>
<p>完整程序 <figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(*清除全局变量*)</span></span><br><span class="line"><span class="built_in">Clear</span><span class="punctuation">[</span><span class="string">&quot;Global`*&quot;</span><span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*导入分词文本*)</span></span><br><span class="line"><span class="variable">wordlist</span> <span class="operator">=</span> <span class="built_in">Import</span><span class="punctuation">[</span><span class="built_in">NotebookDirectory</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;分词.xls&quot;</span><span class="punctuation">]</span> <span class="operator">//</span> <span class="built_in">Flatten</span><span class="punctuation">[</span><span class="type">#</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">]</span> <span class="operator">&amp;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*导入词云模板*)</span></span><br><span class="line"><span class="variable">fig</span> <span class="operator">=</span> <span class="built_in">Import</span><span class="punctuation">[</span><span class="built_in">NotebookDirectory</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;模板.png&quot;</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*默认词云样式*)</span></span><br><span class="line"><span class="built_in">WordCloud</span><span class="punctuation">[</span><span class="variable">wordlist</span><span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*自定义词云样式*)</span></span><br><span class="line"><span class="built_in">WordCloud</span><span class="punctuation">[</span><span class="variable">wordlist</span><span class="operator">,</span> <span class="variable">fig</span><span class="operator">,</span> <span class="built_in">ColorFunction</span> <span class="operator">-&gt;</span> <span class="built_in">Yellow</span><span class="operator">,</span> <span class="built_in">Background</span> <span class="operator">-&gt;</span> <span class="built_in">Red</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>详细帮助参考<a
href="http://reference.wolfram.com/language/ref/WordCloud.html">官方文档</a>
相关文件，<a
href="https://file.pencilq.com/file_and_note/mma%20word%20cloud.zip">点击下载</a></p>
</blockquote>
<hr />
]]></content>
      <tags>
        <tag>Mathematica</tag>
      </tags>
  </entry>
  <entry>
    <title>ANSYS UPFs 子程序简单介绍及实例</title>
    <url>//18/</url>
    <content><![CDATA[<blockquote>
<p><strong>转自仿真科技论坛</strong>，<a
href="http://forum.simwe.com/thread-1021888-1-1.html">点击进入原网址，作者师访</a></p>
</blockquote>
<p>首先做一点说明，这里所说的子程序大致分为两类：一类是用户子程序，即可以被用户修改的、多以
User 或 u
开头的、可以在安装文件夹下找到（如下图所示）的、需要重新编译连接的
Fortran 子程序；另一类是一般的子程序，ANSYS 提供给用户方便 ansys
二次开发的，包括子程序（subroutine，无返回值，使用时需要 external
声明语句）和函数（Function，有返回值，使用时不需要 External
声明语句）。</p>
<span id="more"></span>
<p><img
src="https://image.pencilq.com/images/2019/08/31/UPFs-subroutine.jpg" /></p>
<h2 id="材料本构模型开发用户子程序">材料本构模型开发用户子程序</h2>
<ol type="1">
<li><strong>usermat</strong>：在所有用于本构模型开发的子程序中，usermat
是使用范围最广的子程序，单元的每个积分点在每个载荷子步的每次迭代均会调用
usermat。usermat 支持所有最新技术单元（Current-technology
Elements），最新技术单元区别于传统单元。</li>
<li><strong>UserHyper</strong>：虽然 usermat
功能强大，但其无法用于开发超弹性材料，若想实现超弹性材料本构的开发，必须利用
UserHyper 用户子程序。</li>
<li><strong>usercreep</strong> 及 usercr：ANSYS 提供了两个用户子程序
usercreep 及 usercr
来定义用户蠕变方程，这两个用户子程序可用来模拟材料的时间相关粘塑性 /
蠕变行为。usercreep 利用隐式时间积分算法，而 usercr
利用的是显示时间积分算法。usercreep
用于较长时间段的蠕变分析，如岩石及金属的长期蠕变分析；usercr
用于瞬态蠕变分析。</li>
<li><strong>user_tbelastic</strong>：用来定义线弹性材料特征，允许将弹性材料参数定义成温度或坐标的函数，支持大多数最新技术单元。user_tbelastic
仅仅用于定义弹性阶段的材料本构，它可用来与许多非线性材料模型联合使用，例如
BISO、BKIN、MISO、KINH、NLSIO、PLASTIC、CHABOCHE、CAST
IRON、CREEP、EDP（Drucker-Prager 模型）、SMA（形状记忆合金）、PRONY 及
GURSON 等。</li>
<li><strong>userpl</strong>：如果用户想利用传统单元定义塑性或粘塑性本构关系，则可以使用
userpl。适用于
LINK1、LINK8、PIPE20、BEAM23、BEAM24、PLANE42、SOLID45、PIPE60、SOLID62、SOLID65、PLANE82、SOLID92
及 SOLID95。</li>
<li><strong>usersw</strong>：用户膨胀子程序 usersw
用于编写用户自定义的膨胀律，其调用方式是设置 C72=10。</li>
<li><strong>UserVisLaw</strong>：定义粘性模型，仅用于 FLUID141 及
FLUID142 单元。</li>
<li><strong>userfic</strong>：用于定义用户摩擦模型，用于接触单元：CONTA171、CONTA172、CONTA173、CONTA174、CONTA175、CONTA176、CONTA177、CONTA178。</li>
<li><strong>userfc</strong>：定义层合板类材料的破坏准则。</li>
</ol>
<h2 id="单元开发用户子程序">单元开发用户子程序</h2>
<p>开发单元有两种方法：用户子程序（1）和（2）联合使用是一种方法，通过
UserElem 用户子程序可以方便的建立新单元，ElemGetMat
为新单元处理材料本构部分，难度适中；（3）和（4）联合使用是另外一种方法，该方法直接访问
ANSYS 单元相关数据库和文件，难度较大。 1. <strong>UserElem</strong>：从
ANSYS 11.0 开始新增的。使用该子程序创建单元无需直接访问 ANSYS 数据库。
2. <strong>ElemGetMat</strong>：用于调用 ANSYS 标准结构材料库，与
UserElem 结合使用。 3.
<strong>uec100-uec105</strong>：在通过直接访问单元相关数据库和文件的方式创建单元时，用于定义单元特征参数。
4.
<strong>uel100-uel105</strong>：在通过直接访问单元相关数据库和文件的方式创建单元时，用于计算各种单元矩阵（刚度矩阵、比热矩阵等）、单元载荷向量（力载荷、热流载荷等）以及所有单元输出变量。此外还要完成单元输出过程，计算需要保存的各个变量并储存在结果文件中。</p>
<h2 id="单元开发支持子程序">单元开发支持子程序</h2>
以下子程序（注意不是用户子程序）用于单元开发： 1.
<strong>nminfo</strong>：给单元特征向量定义单元名称，输入变量为单元特征向量
ielc（见  ANSYS Inc20
<p>文件夹下的
echprm.inc），单元参考名称，输出变量为加入了单元参考名称的单元特征向量。
2. <strong>svgidx</strong>：获得保存的变量的索引。 3.
<strong>svrget</strong>：获得单元保存的变量。 4.
<strong>mreuse</strong>：决定在迭代过程中哪些单元矩阵及向量可被重复使用，哪些单元矩阵及向量需要重新计算。
5. <strong>rvrget</strong>：获得单元实常数。 6.
<strong>propev</strong>：计算一组材料特性参数。 7.
<strong>prope1</strong>：计算某一个材料特性参数，若要计算多个材料参数，可使用
propev 子程序。 8. <strong>pstev1</strong>：计算 1
维单元的材料特性参数。 9.
<strong>plast1</strong>：更新单元塑性历史，用于具有一个应力（应变）分量的单元，包括
LINK1、LINK8、BEAM23、BEAM24 和 SOLID65（增强型）单元。 10.
<strong>plast3</strong>：更新单元塑性历史，用于具有 4 或 6
应力（应变）分量的单元，包括
PLANE02、PLANE13、PIPE20、SHELL43、SHELL51、PIPE60、SOLID62、SOLID65、SHELL91、SHELL93、SHELL143、SOLID191。
11. <strong>creep1</strong>：更新单元蠕变历史，用于 1 维单元，包括
LINK1、LINK8、BEAM23、BEAM24 和 SOLID65 单元。 12.
<strong>creep3</strong>：更新单元蠕变历史，用于 3 维单元，包括
PLANE02、PLANE13、PIPE20、PLANE42、SHELL43、SOLID45、SHELL51、PIPE60、SOLID62、SOLID65、PLANE82、SHELL91、SOLID92、SHELL93、SOLID95、SHELL143
及 SOLID191。 13. <strong>swell1</strong>：更新单元的膨胀历史，用于 1
维单元，包括 LINK1、LINK8、BEAM23、BEAM24。 14.
<strong>swell3</strong>：更新单元的膨胀历史，用于 3 维单元，包括
PLANE02、PLANE13、PIPE20、PLANE42、SHELL43、SOLID45、SHELL51、PIPE60、SOLID62、PLANE82、SHELL91、SOLID92、SHELL93、SOLID95、SHELL143
和 SOLID191。 15.
<strong>usereo</strong>：在不可累加杂项数据（NMISC）中存储数据。 16.
<strong>eldwrtL</strong>：将单元数据写入文件。 17.
<strong>eldwrnL</strong>：将单元不可累加杂项数据写入结果文件。 18.
<strong>tmpget</strong>：子程序 temget 用于定义当前温度载荷。 19.
<strong>prsget</strong>：定义当前压力载荷。 20.
<strong>cnvget</strong>：定义当前对流载荷。 21.
<strong>prinst</strong>：可用于计算主应力和应力强度。其输入输出输出变量只有一个
s（长度为 11 的数组），s(1)、s(2)、s(3)、s(4)、s(5) 和 s(6) 分别存放σx
、σy 、σz 、σxy 、σyz 和 σzx，经子程序计算后输出主应力σ1、σ2 和σ3 保存在
s(7)、s(8) 和 s(9) 内，应力强度保存在 s(10) 内，s(11) 内输出的是 Mises
等效应力。也可用来计算主应变（ε1 、ε2 和ε3
）的大小。提醒大家，这是一个很重要的子程序。</p>
<h2
id="修改和监视已存在单元的用户子程序">修改和监视已存在单元的用户子程序</h2>
<ol type="1">
<li><strong>userou</strong>：用于存储用户提供的单元输出，对于需要将单元数据存入
nmisc 记录的所有单元，都要调用该用户子程序。该子程序通过 USRCAL
命令激活：USRCAL,USEROU</li>
<li><strong>useran</strong>：单元坐标系控制，修改
shell43、shell63、shell91、shell93、shell99，以及
solid46、solid64、solid191
单元材料性能参数和应力的方向，可通过单元关键选项调用。</li>
<li><strong>userrc</strong>：对 COMBIN7 和 COMBIN37
单元的参数进行操作。当设置单元的 keyopt(9) = 1 时调用该子程序，且 C1 或
C3 必须为非零值。</li>
<li><strong>UElMatx</strong>：访问单元矩阵和载荷向量，如频域分析的载荷向量等。主要目的是监视（或修改）单元矩阵和载荷向量。</li>
<li><strong>UTHICK</strong>：定义 SHELL181、SHELL208、SHELL209 以及
SHELL281 单元的初始厚度。</li>
<li><strong>Us_Surf_Str</strong>：获取 PLANE2、PLANE42、PLANE82 以及
SOLID45、SOLID92 和 SOLOD95 单元的单元面应力。</li>
<li><strong>uflex</strong>：计算单元 PIPE288 和 PIPE289
的柔性系数。当输入单元的轴向柔性系数为 - 10 时调用该用户子程序。</li>
<li><strong>usflex</strong>：计算单元 PIPE16、PIPE17、PIPE18 和 PIPE60
的柔性系数。当输入单元的轴向柔性系数为负数时调用该用户子程序。</li>
</ol>
<h2 id="载荷用户子程序">载荷用户子程序</h2>
<p>以下用户子程序用于定义载荷： 1.
<strong>usrefl</strong>：可将一些标量表示的载荷（如温度、流量、热生成量、含水量等）修改成用户定义的值，该子程序在每个使用标量场载荷的载荷步及载荷子步内、每次平衡迭代过程中均会被调用，在进入该子程序之前，已获得
ANSYS 输入的单元或节点值信息。 2.
<strong>userpr</strong>：用于改变单元压力，该子程序在每个使用单元压力的载荷步及载荷子步内、每次平衡迭代过程中均会被调用，每个单元调用一次。在进入该子程序之前，已获得
ANSYS 输入的单元或节点值信息。 3.
<strong>usercv</strong>：用于改变单元面对流信息，该子程序在每个载荷步及载荷子步内的每次平衡迭代过程中均会被调用，每个单元调用一次。在进入该子程序之前，已获得标准
ANSYS
输入的对流面信息，因此利用这些信息可以随意按照用户意愿修改对流信息。 4.
<strong>userfx</strong>：用于改变单元面热流信息，该子程序在每个载荷步及载荷子步内的每次平衡迭代过程中均会被调用，每个单元调用一次。仅在热流载荷形成阶段调用，热流计算阶段不调用。</p>
<h2 id="计算干预用户子程序">计算干预用户子程序</h2>
<table>
<thead>
<tr class="header">
<th>用户子程序</th>
<th>对应的情况</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>UAnBeg</td>
<td>ANSYS 启动时执行</td>
</tr>
<tr class="even">
<td>USolBeg</td>
<td>求解开始前执行</td>
</tr>
<tr class="odd">
<td>ULdBeg</td>
<td>载荷步开始前执行</td>
</tr>
<tr class="even">
<td>USsBeg</td>
<td>载荷子步开始前执行</td>
</tr>
<tr class="odd">
<td>UItBeg</td>
<td>迭代步开始前执行</td>
</tr>
<tr class="even">
<td>UItFin</td>
<td>迭代步结束后执行</td>
</tr>
<tr class="odd">
<td>USsFin</td>
<td>载荷子步结束后执行</td>
</tr>
<tr class="even">
<td>ULdFin</td>
<td>载荷步结束后执行</td>
</tr>
<tr class="odd">
<td>USolFin</td>
<td>求解结束后执行</td>
</tr>
<tr class="even">
<td>UAnFin</td>
<td>ANSYS 结束前执行</td>
</tr>
</tbody>
</table>
<h2 id="访问-ansys-数据库的子程序">访问 ANSYS 数据库的子程序</h2>
<p>这部分内容包括选择或获得节点及单元的子程序、节点信息相关子程序、单元特征相关子程序、耦合及约束相关子程序、节点载荷子程序、单元载荷子程序、结果信息子程序，由于内容较多，参见附件：<a class="btn" href="https://file.pencilq.com/file_and_note/Access%20the%20ANSYS%20database%20subroutine.pdf"><i class="fa fa-download fa-lg fa-fw"></i>下载</a></p>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/Access%20the%20ANSYS%20database%20subroutine.pdf" data-height="500px"></div>
<h2 id="方便用户开发的子程序">方便用户开发的子程序</h2>
<p>内容包括通用子程序、向量操作子程序和矩阵操作子程序，见附件：<a class="btn" href="https://file.pencilq.com/file_and_note/User-friendly%20subroutine.pdf"><i class="fa fa-download fa-lg fa-fw"></i>下载</a></p>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/User-friendly%20subroutine.pdf" data-height="500px"></div>
<h2 id="简单例子-线弹性材料模型-usermat-开发">简单例子 线弹性材料模型
usermat 开发</h2>
<p>材料的本构行为体现为应力 - 应变关系，usermat
子程序的主要任务是定义材料的应力 -
应变关系，具体分为两个方面。首先由给定的应变增量计算得到应力增量
，从而得到新的应力 ，称做应力更新过程。其次还要求 usermat
给出雅可比矩阵，学名是一致切线算子矩阵。usermat 用户子程序仅用于最新技术单元，不支持传统单元。</p>
<h3 id="usermat-fortran-用户子程序的结构">usermat fortran
用户子程序的结构</h3>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">*deck,usermat      USERDISTRIB  parallel                                gal</span><br><span class="line"><span class="function"><span class="keyword">subroutine</span></span> usermat(</span><br><span class="line">     &amp;                   matId, elemId,kDomIntPt, kLayer, kSectPt,</span><br><span class="line">     &amp;                   ldstep,isubst,keycut,</span><br><span class="line">     &amp;                   nDirect,nShear,ncomp,nStatev,nProp,</span><br><span class="line">     &amp;                   Time,dTime,Temp,dTemp,</span><br><span class="line">     &amp;                   stress,statev,dsdePl,sedEl,sedPl,epseq,</span><br><span class="line">     &amp;                   Strain,dStrain, epsPl, prop, coords,</span><br><span class="line">     &amp;                   var0, defGrad_t, defGrad,</span><br><span class="line">     &amp;                   tsstif, epsZZ,</span><br><span class="line">     &amp;                   var1, var2, var3, var4, var5,</span><br><span class="line">     &amp;                   var6, var7, var8)</span><br><span class="line">c*************************************************************************</span><br><span class="line">#<span class="keyword">include</span> <span class="string">&quot;impcom.inc&quot;</span></span><br><span class="line"><span class="comment">c</span></span><br><span class="line">      <span class="keyword">INTEGER</span>         </span><br><span class="line">     &amp;                 matId, elemId,</span><br><span class="line">     &amp;                 kDomIntPt, kLayer, kSectPt,</span><br><span class="line">     &amp;                 ldstep,isubst,keycut,</span><br><span class="line">     &amp;                 nDirect,nShear,ncomp,nStatev,nProp</span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span></span><br><span class="line">     &amp;                 Time,    dTime,   Temp,    dTemp,</span><br><span class="line">     &amp;                 sedEl,   sedPl,   epseq,   epsZZ</span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span></span><br><span class="line">     &amp;                 stress  (ncomp), statev  (nStatev),</span><br><span class="line">     &amp;                 dsdePl  (ncomp,ncomp),</span><br><span class="line">     &amp;                 Strain  (ncomp), dStrain (ncomp  ),</span><br><span class="line">     &amp;                 epsPl   (ncomp), prop    (nProp  ),</span><br><span class="line">     &amp;                 coords  (<span class="number">3</span>),       rotateM (<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line">     &amp;                 defGrad (<span class="number">3</span>,<span class="number">3</span>),     defGrad_t(<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line">     &amp;                 tsstif  (<span class="number">2</span>)</span><br><span class="line"><span class="comment">c</span></span><br><span class="line">c***************** 用户定义部分 *************************************</span><br><span class="line">c*                                                                  *</span><br><span class="line">c*                                                                  *</span><br><span class="line">c***************** 用户定义部分 *************************************</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="输入输出变量说明">输入输出变量说明</h3>
<p><strong>usermat 输入变量及其数据类型：</strong></p>
<ul>
<li><p>matId：材料号；整型。</p></li>
<li><p>elemId：单元号；整型。</p></li>
<li><p>kDomIntPt：材料积分点号；整型。</p></li>
<li><p>kLayer：单元层号，仅用于分层单元，用于 usermat 的 18x 族单元中仅
SHELL181 有分层功能；整型。</p></li>
<li><p>kSectPt：单元截面号；整型。</p></li>
<li><p>ldstep：载荷步数；整型。</p></li>
<li><p>isubst：载荷子步数；整型。</p></li>
<li><p>nDirect：正应力或正应变分量的个数，与单元类型有关；整型。</p></li>
<li><p>nShear：剪应力或剪应变分量的个数，与单元类型有关；整型。</p></li>
<li><p>ncomp：应力分量或应变分量个数，ncomp= nDirect +
nShear；整型。</p></li>
<li><p>nStatev：状态变量个数，通过 TB,STATE 命令定义；整型。</p></li>
<li><p>nProp：材料常数个数，通过 TB,USER 命令定义；整型。</p></li>
<li><p>Temp：增量步开始时的温度；双精度。</p></li>
<li><p>dTemp：增量步内的温度增量；双精度。</p></li>
<li><p>Time：增量步开始时的时间，但并非真正的时间，仅仅是计算过程的标记；双精度。</p></li>
<li><p>dTime：增量步内的时间增量；双精度。</p></li>
<li><p>Strain(ncomp)：增量步开始时的应变分量，包括机械应变及温度应变两部分；双精度数组。</p></li>
<li><p>dStrain(ncomp)：应变增量，仅包含机械应变，温度应变成分已被去除；双精度数组。</p></li>
<li><p>prop(nProp)：材料常数数组，由 TB,USER 及 TB,DATA
命令定义，可定义不同温度下的材料常数；双精度数组。</p></li>
<li><p>coords(3)：当前材料积分点的坐标；双精度数组。</p></li>
<li><p>rotateM(3,3)：大变形分析（NLGEOM,ON）时考虑刚体转动用到的增量型旋转矩阵，小变形分析时为单位矩阵；双精度矩阵。该矩阵老版本中存在，现已被废除（本贴第七部分提供了计算转动矩阵
R 的代码）。</p></li>
<li><p>defGrad_t(3,3)：增量步开始时的变形梯度矩阵；双精度矩阵。</p></li>
<li><p>defGrad(3,3)：增量步结束时的变形梯度矩阵；双精度矩阵。</p></li>
</ul>
<p><strong>usermat 输出变量及其数据类型：</strong></p>
<ul>
<li><p>keycut：载荷切分控制参数，0—不切分，1—切分，默认情况下不进行载荷切分，当
ANSYS 主程序检测到收敛困难时进行载荷切分，并输出
keycut=1；整型。</p></li>
<li><p>epsZZ：平面应力状态时垂直于平面方向的应变，仅在平面单元或壳单元考虑厚度变化时使用；双精度。</p></li>
<li><p>tsstif
(2)：横观剪切刚度，tssif(1)-GXZ，tssif(2)-GYZ；双精度数组。</p></li>
<li><p>dsdePl(ncomp,ncomp)：一致切线算子矩阵，dsdePl(i,j)
表示增量步结束时由第 j 个应变分量的改变引起的第 i
个应力分量的变化。ANSYS
默认一致切线算子矩阵是对称的，若要使用非对称的一致切线算子矩阵（对于采用非关联流动法则的塑性材料模型，一致切线算子矩阵往往是非对称的），需要使用
NROP,UNSYM 命令打开非对称求解器；双精度矩阵。</p></li>
</ul>
<p><strong>usermat 输入输出变量及其数据类型：</strong></p>
<ul>
<li><p>stress(ncomp)：应力分量，增量步开始时由 ANSYS 主程序传入，需要在
usermat 中更新为增量步结束时的值；双精度数组。</p></li>
<li><p>statev(nStatev)：状态变量，用于存储与材料模型有关的变量，如塑性因子、强化参数、损伤变量等，增量步开始时由
ANSYS 主程序传入，需要在 usermat
中更新为增量步结束时的值；双精度数组。</p></li>
<li><p>epsPl(ncomp)：塑性应变分量，增量步开始时由 ANSYS
主程序传入，需要在 usermat
中更新为增量步结束时的值；双精度数组。</p></li>
<li><p>sedEl：弹性功，仅用于后处理，对计算过程无影响；双精度。</p></li>
<li><p>sedPl：塑性功，仅用于后处理，对计算过程无影响；双精度</p></li>
<li><p>epsep：等效塑性应变</p></li>
</ul>
<h3 id="apdl-命令自定义材料模型">APDL 命令自定义材料模型</h3>
<p>通过 APDL
命令很容易使用自定义材料模型。只需在前处理部分使用下列语句即可：
<code>TB, USER, matId, NTEMPS, NPTS</code> 关键字 USER
表示使用用户定义材料模型；关键字 matId 表示材料号；NTEMPS
为温度点的个数，即可定义不同温度下的多组材料常数；NPTS
表示每一温度下材料常数个数</p>
<h3 id="线弹性本构-usermat">线弹性本构 usermat</h3>
<p><span class="math display">\[
\begin{aligned}
\bf{\sigma} &amp; = \bf{D}_e \bf{\varepsilon}\\
\bf{\sigma} &amp; = \left[ {\sigma_x \; \sigma_y \; \sigma_z \;
\sigma_{xy} \; \sigma_{yz} \; \sigma_{xz}} \right]^T \\
\bf{\varepsilon} &amp; = \left[ {\varepsilon_x \; \varepsilon_y \;
\varepsilon_z \; \varepsilon_{xy} \; \varepsilon_{yz} \;
\varepsilon_{xz}} \right]^T \\
\\
\bf{D}_e &amp; = \left[ {\begin{array}{*{20}{c}}
{\lambda  + 2G}&amp;\lambda &amp;\lambda &amp;0&amp;0&amp;0\\
\lambda &amp;{\lambda  + 2G}&amp;\lambda &amp;0&amp;0&amp;0\\
\lambda &amp;\lambda &amp;{\lambda  + 2G}&amp;0&amp;0&amp;0\\
0&amp;0&amp;0&amp;G&amp;0&amp;0\\
0&amp;0&amp;0&amp;0&amp;G&amp;0\\
0&amp;0&amp;0&amp;0&amp;0&amp;G
\end{array}} \right]
\end{aligned}
\]</span></p>
<blockquote>
<p>以下是线弹性本构的<code>usermat</code>源代码及测试用的命令流。代码格式显示可能有误，仅供参考。<a class="btn" href="https://file.pencilq.com/file_and_note/elastic.rar"><i class="fa fa-download fa-lg fa-fw"></i>下载源文件</a></p>
</blockquote>
<h3 id="usermat.f">usermat.F</h3>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">*deck,usermat      USERDISTRIB  parallel                                gal</span><br><span class="line">      <span class="function"><span class="keyword">subroutine</span></span> usermat(</span><br><span class="line">     &amp;                   matId, elemId,kDomIntPt, kLayer, kSectPt,</span><br><span class="line">     &amp;                   ldstep,isubst,keycut,</span><br><span class="line">     &amp;                   nDirect,nShear,ncomp,nStatev,nProp,</span><br><span class="line">     &amp;                   Time,dTime,Temp,dTemp,</span><br><span class="line">     &amp;                   stress,statev,dsdePl,sedEl,sedPl,epseq,</span><br><span class="line">     &amp;                   Strain,dStrain, epsPl, prop, coords, </span><br><span class="line">     &amp;                   var0, defGrad_t, defGrad,</span><br><span class="line">     &amp;                   tsstif, epsZZ,</span><br><span class="line">     &amp;                   var1, var2, var3, var4, var5,</span><br><span class="line">     &amp;                   var6, var7, var8)</span><br><span class="line">c*************************************************************************</span><br><span class="line"></span><br><span class="line">#<span class="keyword">include</span> <span class="string">&quot;impcom.inc&quot;</span></span><br><span class="line"><span class="comment">c</span></span><br><span class="line">      <span class="keyword">INTEGER</span>          </span><br><span class="line">     &amp;                 matId, elemId,</span><br><span class="line">     &amp;                 kDomIntPt, kLayer, kSectPt,</span><br><span class="line">     &amp;                 ldstep,isubst,keycut,</span><br><span class="line">     &amp;                 nDirect,nShear,ncomp,nStatev,nProp</span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> </span><br><span class="line">     &amp;                 Time,    dTime,   Temp,    dTemp,</span><br><span class="line">     &amp;                 sedEl,   sedPl,   epseq,   epsZZ</span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> </span><br><span class="line">     &amp;                 stress  (ncomp  ), statev (nStatev),</span><br><span class="line">     &amp;                 dsdePl  (ncomp,ncomp),</span><br><span class="line">     &amp;                 Strain  (ncomp  ), dStrain (ncomp  ), </span><br><span class="line">     &amp;                 epsPl   (ncomp  ), prop    (nProp  ), </span><br><span class="line">     &amp;                 coords  (<span class="number">3</span>),       rotateM (<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line">     &amp;                 defGrad (<span class="number">3</span>,<span class="number">3</span>),     defGrad_t(<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line">     &amp;                 tsstif  (<span class="number">2</span>)</span><br><span class="line"><span class="comment">c</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> var0, var1, var2, var3, var4, var5,</span><br><span class="line">     &amp;                 var6, var7, var8</span><br><span class="line">      </span><br><span class="line"><span class="comment">c</span></span><br><span class="line">c************************用户定义部分*************************************</span><br><span class="line"><span class="comment">c     	</span></span><br><span class="line">      <span class="keyword">INTEGER</span>          K1, K2</span><br><span class="line">      <span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> ONE, TWO</span><br><span class="line">	<span class="keyword">PARAMETER</span> (ONE=<span class="number">1.0D0</span>, TWO=<span class="number">2.0D0</span>)</span><br><span class="line">	<span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> EMOD, ENU, EG, EG2, ELAM</span><br><span class="line">	<span class="keyword">DOUBLE</span> <span class="keyword">PRECISION</span> SesSrn(<span class="number">6</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment">C</span></span><br><span class="line"><span class="comment">C 相关弹性常数</span></span><br><span class="line"><span class="comment">C</span></span><br><span class="line">	EMOD  =  prop(<span class="number">1</span>)</span><br><span class="line">	ENU   =  prop(<span class="number">2</span>)</span><br><span class="line">	EG    =  EMOD/(TWO*(ONE+ENU))</span><br><span class="line">	EG2   =  TWO*EG</span><br><span class="line">	ELAM=EMOD*ENU/(ONE+ENU)/(ONE-TWO*ENU)</span><br><span class="line">      <span class="keyword">DO</span> K1=<span class="number">1</span>,<span class="number">6</span></span><br><span class="line">	    <span class="keyword">DO</span> K2=<span class="number">1</span>,<span class="number">6</span></span><br><span class="line">	    SesSrn(K1,K2)=<span class="number">0.0D0</span></span><br><span class="line">	    <span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">C</span></span><br><span class="line"><span class="comment">C 获得应力应变矩阵</span></span><br><span class="line"><span class="comment">C</span></span><br><span class="line">	<span class="keyword">DO</span> K1=<span class="number">1</span>, <span class="number">3</span></span><br><span class="line">	    <span class="keyword">DO</span> K2=<span class="number">1</span>, <span class="number">3</span></span><br><span class="line">	    SesSrn(K2, K1)=ELAM</span><br><span class="line">	    <span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	    SesSrn(K1, K1)=EG2+ELAM</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	<span class="keyword">DO</span> K1=<span class="number">4</span>, <span class="number">6</span></span><br><span class="line">	    SesSrn(K1 ,K1)=EG</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">c	</span><br><span class="line"><span class="comment">C 更新应力</span></span><br><span class="line"><span class="comment">C</span></span><br><span class="line">	<span class="keyword">DO</span> K1=<span class="number">1</span>, <span class="number">6</span></span><br><span class="line">	    <span class="keyword">DO</span> K2=<span class="number">1</span>, <span class="number">6</span></span><br><span class="line">	    stress(K2)=stress(K2)+SesSrn(K2, K1)*dStrain(K1)</span><br><span class="line">	    <span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line"><span class="comment">c</span></span><br><span class="line">c一致切线算子矩阵</span><br><span class="line"><span class="comment">c</span></span><br><span class="line">      <span class="keyword">DO</span> K1=<span class="number">1</span>,<span class="number">6</span></span><br><span class="line">	    <span class="keyword">DO</span> K2=<span class="number">1</span>,<span class="number">6</span></span><br><span class="line">	    dsdePl(K1,K2)=SesSrn(K1,K2)</span><br><span class="line">	    <span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">DO</span></span><br><span class="line"><span class="comment">c</span></span><br><span class="line">	</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="uniaxial-tension_ansys.inp">uniaxial tension_ANSYS.inp</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!<span class="variable constant_">ANSYS</span>自带线弹性材料——单轴拉伸</span><br><span class="line">finish</span><br><span class="line">/clear</span><br><span class="line">/prep7</span><br><span class="line"></span><br><span class="line">!单元类型</span><br><span class="line">et,<span class="number">1</span>,<span class="number">45</span></span><br><span class="line"></span><br><span class="line">!设置弹性模量及泊松比</span><br><span class="line">ex,<span class="number">1</span>,<span class="number">180e9</span></span><br><span class="line">prxy,<span class="number">1</span>,<span class="number">0.3</span> </span><br><span class="line"></span><br><span class="line">!调整视角</span><br><span class="line">/view,<span class="number">1</span>,-<span class="number">1</span></span><br><span class="line">/ang,<span class="number">1</span> </span><br><span class="line"></span><br><span class="line">!建立几何模型</span><br><span class="line">cyl4,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.005</span>, , , ,<span class="number">0.1</span> </span><br><span class="line"></span><br><span class="line">!网格划分</span><br><span class="line">lsel, s , , , <span class="number">1</span>, <span class="number">8</span></span><br><span class="line">lesize, all, , ,<span class="number">4</span></span><br><span class="line">allsel,all</span><br><span class="line">lsel, s , , , <span class="number">9</span>, <span class="number">10</span></span><br><span class="line">lesize, all, , ,<span class="number">20</span></span><br><span class="line">allsel,all</span><br><span class="line">vsweep, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>           !进行扫略网格划分</span><br><span class="line"></span><br><span class="line">!设置边界条件</span><br><span class="line">da, <span class="number">1</span>, all                        !约束其中一个端面</span><br><span class="line">!施加外载荷</span><br><span class="line">sfa, <span class="number">2</span>, <span class="number">1</span>, pres, -<span class="number">200e6</span>      !钢棒另一端面施加拉伸载荷</span><br><span class="line">finish</span><br><span class="line"></span><br><span class="line">/solu                             !进入求解器</span><br><span class="line">solve </span><br><span class="line"></span><br><span class="line">/post1                          !进入后处理器</span><br><span class="line">pldisp, <span class="number">1</span>                     !变形图</span><br></pre></td></tr></table></figure>
<h3 id="uniaxial-tension_user.inp">uniaxial tension_user.inp</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!用户自定义线弹性材料——单轴拉伸</span><br><span class="line">finish</span><br><span class="line">/clear</span><br><span class="line">/prep7</span><br><span class="line"></span><br><span class="line">!单元类型</span><br><span class="line">et,<span class="number">1</span>,<span class="number">185</span></span><br><span class="line"></span><br><span class="line">!选择用户自定义材料类型</span><br><span class="line">tb,user,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">tbdata,<span class="number">1</span>,<span class="number">180e9</span>,<span class="number">0.3</span>    !给弹性模量及泊松比赋值</span><br><span class="line"></span><br><span class="line">!调整视角</span><br><span class="line">/view,<span class="number">1</span>,-<span class="number">1</span></span><br><span class="line">/ang,<span class="number">1</span> </span><br><span class="line"></span><br><span class="line">!建立几何模型</span><br><span class="line">cyl4,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.005</span>, , , ,<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line">!网格划分</span><br><span class="line">lsel, s , , , <span class="number">1</span>, <span class="number">8</span></span><br><span class="line">lesize, all, , ,<span class="number">4</span></span><br><span class="line">allsel,all</span><br><span class="line">lsel, s , , , <span class="number">9</span>, <span class="number">10</span></span><br><span class="line">lesize, all, , ,<span class="number">20</span></span><br><span class="line">allsel,all</span><br><span class="line">vsweep, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>         !进行扫略网格划分</span><br><span class="line"></span><br><span class="line">!设置边界条件</span><br><span class="line">da, <span class="number">1</span>, all                     !约束其中一个端面</span><br><span class="line"></span><br><span class="line">!施加外载荷</span><br><span class="line">sfa, <span class="number">2</span>, <span class="number">1</span>, pres, -<span class="number">200e6</span>        !钢棒另一端面施加拉伸载荷</span><br><span class="line">finish</span><br><span class="line"></span><br><span class="line">/solu                         !进入求解器</span><br><span class="line">time,<span class="number">1</span></span><br><span class="line">pred,on                   !打开线性预测</span><br><span class="line">nsubst,<span class="number">10</span>,<span class="number">50</span>,<span class="number">5</span>          !定义载荷子步数</span><br><span class="line">outres,all,all              !输出所有子步结果</span><br><span class="line">solve</span><br><span class="line"></span><br><span class="line">/post1                       !进入后处理器</span><br><span class="line">pldisp, <span class="number">1</span>                    !变形图</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="usermat-的参考文档">usermat 的参考文档</h2>
<a class="btn" href="http://ansys.net/ansys/papers/nonlinear/usermat.pdf "><i class="fa fa-download fa-lg fa-fw"></i>下载</a>
]]></content>
  </entry>
  <entry>
    <title>Ansys 二次开发系列之一：ANSYS15-0-Win764位安装及UPFs二次开发环境设置</title>
    <url>//19/</url>
    <content><![CDATA[<blockquote>
<p><strong>转自仿真科技论坛</strong>，<a
href="http://forum.simwe.com/thread-1021888-1-1.html">点击进入原网址，作者师访</a></p>
</blockquote>
<p>本部分给出Win7系统下UPFs二次开发环境设置方法。本部分所提供的方法仅用于个人研究学习，商业用途请购买正版软件，并按照软件商提供的方法操作。
<span id="more"></span> ## 1. 相关环境及软件</p>
<ol type="1">
<li>本文操作系统 win7_64bit</li>
<li>64位ANSYS15.0</li>
<li>Visual Studio 2010</li>
<li>Intel Fortran Composer XE 2013 SP1</li>
</ol>
<h2 id="软件的安装">2. 软件的安装</h2>
<blockquote>
<p>（可参考帖子：http://forum.simwe.com/thread-1094988-1-1.html，建议安装在D盘）</p>
</blockquote>
<ol type="1">
<li>安装<code>ansys</code>，将ANSYS15.0安装在D盘。 <a
href="http://forum.simwe.com/forum.php?mod=attachment&amp;aid=NDM3ODkyfDA0Y2NkNzJmfDE1MzE0NDQ4MTd8NzgzMjAxfDEwMjE4ODg%3D">ansys15.0种子</a>
，破解文件 <a
href="http://forum.simwe.com/forum.php?mod=attachment&amp;aid=NDM3ODkxfGNmYzc1NjQxfDE1MzE0NDQ4MTd8NzgzMjAxfDEwMjE4ODg%3D">ansys_crack</a></li>
</ol>
<p>安装方法如下（注意安装过程中别忘了选择安装<strong>customalize文件夹</strong>）：
<img
src="https://image.pencilq.com/images/2019/05/02/006tNbRwgy1fukikzwp9ej30g903cglm.jpg" /></p>
<p>​ <strong>Step 1</strong> If you have installed an earlier version of
ANSYS, please make sure to uninstall it, the ANSYS License Manager in
especial (This can be done by deleting the"IncFiles" folder, if it can
not be deleted,then end the related processes in the task manager and
try again!).</p>
<p>​ <strong>Step 2</strong> Install only ANSYS products on disk D, do
not install ANSYS License Manager. <strong>When askfor Hostname
1</strong>, just select <strong>Skip this configuration!</strong></p>
<p>​ <strong>Step 3</strong> After installation, Put
<strong>ansyslmd.ini</strong> and license.dat into the
followingdirectory:<br />
<code>D:\Program Files\ANSYS Inc\SharedFiles\Licensing\</code> Modify
thesecond line of the <strong>ansyslmd.ini</strong> into the following
line:
<code>LICKEYFIL=D:\Program Files\ANSYS Inc\SharedFiles\Licensing\license.dat</code></p>
<ol type="1">
<li>安装 Visual Studio 2010，下载地址：百度网盘，<a
href="http://pan.baidu.com/s/1ntjr3dB"
class="uri">http://pan.baidu.com/s/1ntjr3dB</a>。安装在 C
盘，默认安装设置。安装完成后<strong>切勿进行关于 Visual Studio
2010的Windows Update 更新</strong>。</li>
<li>安装Intel Fortran Composer XE 2013 SP1，下载地址：百度网盘，<a
href="http://pan.baidu.com/s/1hq88u2K"
class="uri">http://pan.baidu.com/s/1hq88u2K</a>。安装在C盘，默认安装设置。</li>
</ol>
<h2 id="系统环境变量的设置">3. 系统环境变量的设置</h2>
<blockquote>
<p>这是本文安装环境的环境变量，按照本文安装方式，以下环境变量直接添加即可。（win10、win7
）</p>
</blockquote>
<ol type="1">
<li><p>Path 环境变量用如下path
环境变量替换（每一行表示一条环境变量，各条环境变量之间用分号(;)隔开），以下环境变量基于本文安装路径，若安装路径不同，请进行相关调整：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">%INTEL_DEV_REDIST%redist\intel64\mpirt</span><br><span class="line">%INTEL_DEV_REDIST%redist\intel64\compiler</span><br><span class="line">%INTEL_DEV_REDIST%redist\ia32\mpirt</span><br><span class="line">%INTEL_DEV_REDIST%redist\ia32\compiler</span><br><span class="line">%SystemRoot%\system32</span><br><span class="line">%SystemRoot%</span><br><span class="line">%SystemRoot%\System32\Wbem</span><br><span class="line">%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\</span><br><span class="line">C:\Program Files (x86)\Intel\OpenCL SDK\3.0\bin\x86</span><br><span class="line">C:\Program Files (x86)\Intel\OpenCL SDK\3.0\bin\x64</span><br><span class="line">C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\</span><br><span class="line">C:\Program Files (x86)\Intel\Composer XE 2013 SP1\bin</span><br><span class="line">C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin</span><br><span class="line">C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin</span><br><span class="line">c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\</span><br><span class="line">c:\Program Files\Microsoft SQL Server\100\Tools\Binn\</span><br><span class="line">c:\Program Files\Microsoft SQL Server\100\DTS\Binn\</span><br><span class="line">C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE</span><br></pre></td></tr></table></figure>
<p>可直接复制以下内容粘贴： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%INTEL_DEV_REDIST%redist\intel64\mpirt;%INTEL_DEV_REDIST%redist\intel64\compiler;%INTEL_DEV_REDIST%redist\ia32\mpirt;%INTEL_DEV_REDIST%redist\ia32\compiler;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Intel\OpenCL SDK\3.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\3.0\bin\x64;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C:\Program Files (x86)\Intel\Composer XE 2013 SP1\bin;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin;C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE</span><br></pre></td></tr></table></figure></p></li>
<li><p>新增 <strong>Lib</strong> 环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib\x64;</span><br><span class="line">C:\Program Files (x86)\Intel\Composer XE 2013 SP1\compiler\lib\intel64;</span><br><span class="line">C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\amd64</span><br></pre></td></tr></table></figure>
<p>可直接复制以下内容粘贴：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib\x64;C:\Program Files (x86)\Intel\Composer XE 2013 SP1\compiler\lib\intel64;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\amd64</span><br></pre></td></tr></table></figure></li>
<li><p>新增 <strong>Include</strong> 环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Program Files (x86)\Intel\Composer XE 2013 SP1\compiler\include\intel64;</span><br><span class="line">C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include;</span><br><span class="line">C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include</span><br></pre></td></tr></table></figure>
<p>可直接复制以下内容粘贴：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Program Files (x86)\Intel\Composer XE 2013 SP1\compiler\include\intel64;C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="修改-anscust.bat-文件">4. 修改 ANSCUST.BAT 文件</h2>
<p>本步骤不是必须步骤，但为了保证成功编译，需要将编译文件夹
<code>D:\ProgramFiles\ANSYS Inc\v150\ansys\custom\user\winx64</code>下的
<code>ANSCUST.BAT</code> 的第<strong>28</strong>行由：</p>
<p>​
<code>call "%IFORT_COMPILER12%\bin\compilervars.bat" %IFORT_PLATFORM% vs2010</code>
改为： ​
<code>call "C:\Program Files (x86)\Intel\Composer XE 2013 SP1\bin\compilervars.bat" %IFORT_PLATFORM% vs2010</code></p>
<h2 id="编译连接注意事项">5. 编译连接注意事项</h2>
<ul>
<li><p>复制<code>D:\ProgramFiles\ANSYS Inc\v150\ansys\custom\user\winx64</code>
文件夹中的文件<code>ANSCUST.BAT</code>、<code>ansys.lrf</code>、<code>ansysex.def</code>，与用户编写的程序(包含<code>xxx.F</code>)放在一个文件夹下，注意路径应为全英文，运行批处理文件<code>ANSCUST.BAT</code>进行编译。</p></li>
<li><p>当编译程序询问 Do you want to link the Wind Turbine
Aeroelasticlibrary with Mechanical APDL? (Y or N):
时，输入<strong>Y</strong>。编译连接完成后，将出现 “LINK WASSUCCESSFUL!”
的提示。最后，当编译程序询问 Do you want to copythe runtime DLLs? (Y or
N): ，在第一次编译时需要输入<strong>Y</strong>，程序将自动把 ansys.exe
运行所需的 <code>D:\Program Files\ANSYS Inc\v150\ansys\bin\winx64</code>
下的dll动态链接库文件拷贝到编译目录下，以后的编译过程中无需再次拷贝。</p></li>
<li><p>编译完成后，运行运行生成的 <code>ANSYS.exe</code>，出现 This
ANSYS was linked by License 即为成功编译。 <img
src="https://image.pencilq.com/images/2019/08/31/link-license.jpg" /></p></li>
</ul>
<h2 id="安装设置失败的解决办法">6. 安装设置失败的解决办法！！！</h2>
<ol type="1">
<li><p><strong>初次运行</strong> <code>ANSYS.exe</code> 会出现找不到
<code>*dll</code>
文件等问题。原因：环境变量设置问题。解决办法：在计算机中搜索该文件，将其路径添加到path环境变量，若不起作用，直接将其拷贝到编译路径下。(文件搜索推荐
everything，<a
href="https://en.softonic.com/download/everything/windows/post-download?sl=1#">下载地址:</a>https://en.softonic.com/download/everything/windows/post-download?sl=1#)</p></li>
<li><p>拒绝访问，无法连接到ANSYS等问题。将
<code>D:\ProgramFiles\ANSYS Inc\v150\ansys\custom\user\winx64</code>
文件夹拷贝到其它地方（比如 C 盘或 D 盘根目录），再单击其中的 ANSCUST.BAT
即可。</p></li>
<li><p>提示”转换到coff期间失败“。原因：系统中存在多个不同版本的
cvtres.exe
文件从而产生冲突。共有4个解决方案（优先尝试解决方案1和方案2）。</p>
<p><strong>解决方案1</strong>：<code>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin</code>
和<code>C:\Windows\Microsoft.NET\Framework\v4.0.30319</code>
这两个文件夹里 的 cvtres.exe 冲突，删除前者。</p>
<p><strong>解决方案2</strong>：搜索c盘下的cvtres.exe文件，仅保留
<code>C:\Windows\Microsoft.NET\Framework64\v4.0.30319</code>
下的cvtres.exe，其余搜到的cvtres.exe全部删除！</p>
<p><strong>解决方案3</strong>：重装系统，安装Win7官方原版镜像，ANSYS安装时仅仅选择二次开发必要的组件，即：
<img
src="https://image.pencilq.com/images/2019/08/31/ansys-install.jpg" />
<strong>解决方案4</strong>：直接将 Win7 升级到 Win10 可解决该问题。</p>
<hr /></li>
</ol>
]]></content>
      <tags>
        <tag>软件</tag>
        <tag>ANSYS</tag>
        <tag>二次开发</tag>
      </tags>
  </entry>
  <entry>
    <title>SciHub: 桌面版介绍及使用</title>
    <url>//2/</url>
    <content><![CDATA[<blockquote>
<p><strong>前言</strong>：谷歌学术镜像，SciHub 镜像及桌面版使用</p>
</blockquote>
<span id="more"></span>
<blockquote>
<p>推荐 <a href="http://www.4243.net/">大木虫学术导航</a></p>
</blockquote>
<h2 id="sci-hub-科研论文全文下载可用网址---自动更新">sci-hub
科研论文全文下载可用网址 - 自动更新：</h2>
<p><a
href="http://tool.yovisun.com/scihub/">http://tool.yovisun.com/scihub/</a></p>
<h2 id="scihub-desktop">SciHub Desktop：</h2>
<p>官方主页：<a
href="https://zhuanlan.zhihu.com/p/31809890">https://zhuanlan.zhihu.com/p/31809890</a>
百度云链接：<a
href="https://pan.baidu.com/s/1kVb2pJh">https://pan.baidu.com/s/1kVb2pJh</a></p>
<p><br> ## 谷歌学术镜像与 SciHub Desktop 简单使用说明</p>
<h4 id="打开谷歌学术镜像-httpac.scmor.com-随意挑一个可用的网址">打开<a
href="http://ac.scmor.com/">谷歌学术镜像</a>
<code>http://ac.scmor.com/</code> ， 随意挑一个可用的网址。</h4>
<p><img
src="https://image.pencilq.com/images/2019/08/31/5cc7044c47a8b.png" /></p>
<h4 id="搜索获取复制-doi">搜索，获取复制 DOI</h4>
<p><img
src="https://image.pencilq.com/images/2019/08/31/5cc70456b1194.png" /></p>
<p><img
src="https://image.pencilq.com/images/2019/08/31/5cc7045d84602.png" /></p>
<p><img
src="https://image.pencilq.com/images/2019/08/31/5cc704641bce2.png" /></p>
<h4
id="在-scihub-desktop-中输入doi点击-fetch-pdf会自动弹出浏览器进行下载一次不行多点几次">在
scihub-desktop 中输入doi，点击 Fetch
PDF，会自动弹出浏览器进行下载。一次不行多点几次</h4>
<p><img
src="https://image.pencilq.com/images/2019/08/31/5cc7046c4eb16.png" /></p>
<blockquote>
<p>SciHub Desktop <a
href="https://pan.baidu.com/s/1kVb2pJh">官方百度云链接</a></p>
</blockquote>
<hr />
]]></content>
      <tags>
        <tag>软件</tag>
      </tags>
  </entry>
  <entry>
    <title>Abaqus: 生成泰森多边形</title>
    <url>//20/</url>
    <content><![CDATA[<blockquote>
<p><strong>前言</strong>： <code>Abaqus</code> 插件
<code>Homtools</code> 安装步骤以及相关功能的使用。
技术邻上居然有人高价出售 <code>Homtools</code>
这一款<strong>免费</strong>的插件。此处是<a
href="http://homtools.lma.cnrs-mrs.fr/spip/">插件官网</a></p>
</blockquote>
<span id="more"></span>
<p><img
src="https://image.pencilq.com/images/2019/05/02/img20180922234936.png" /></p>
<h2 id="abaqus-插件-homtools-安装步骤">Abaqus 插件 Homtools
安装步骤</h2>
<p>打开插件主页：<a
href="http://homtools.lma.cnrs-mrs.fr/spip/">http://homtools.lma.cnrs-mrs.fr/spip/</a></p>
<p>进入下载页面下载之后，解压文件。</p>
<ol type="1">
<li>用代码查看软件/记事本打开<code>abaqus_v6.env</code>，
abaqus_v6.env文件路径：
<code>\Dassault Systemes\SimulationServices\V6R2016x\win_b64\SMA\site\abaqus_v6.env</code></li>
<li>复制 <code>Homtools</code>
解压后的文件夹路径，例如：<code>D:\SIMULIA\plugin\homtools0.9</code></li>
<li>将 <code>plugin_central_dir = "/path/to/homtools/dir"</code>
这句代码，加到<code>abaqus_v6.env</code>文件的首行，
并将等号后面的目录替换为 Homtools 文件夹的目录。例如：
<code>plugin_central_dir = "/path/to/homtools/dir"</code>目录替换成
<code>plugin_central_dir = "D:\SIMULIA\plugin\homtools0.9"</code> <img
src="https://image.pencilq.com/images/2019/05/02/5cc703bff0234.png" />
---</li>
</ol>
<h2 id="homtools-rve-generation-功能使用步骤">Homtools <em>RVE
generation</em> 功能使用步骤</h2>
<ol type="1">
<li><p>打开CAE→在 Part 模块下→点击主菜单 Plug-ins → Homtools → Voronoi
cells <img
src="https://image.pencilq.com/images/2019/05/02/5cc703d37fb63.png" /></p></li>
<li><p>插件界面 <img
src="https://image.pencilq.com/images/2019/05/02/5cc703dd8a4af.png" /></p></li>
<li><p>生成晶格 <img
src="https://image.pencilq.com/images/2019/05/02/5cc703e58265f.png" /></p></li>
<li><p>晶界示意图 <img
src="https://image.pencilq.com/images/2019/05/02/5cc703eeb82ec.png" /></p></li>
<li><p>相同参数的情况下，再生成一个，可以看到生成的晶格是随机的。 <img
src="https://image.pencilq.com/images/2019/05/02/5cc703f8dfe19.png" /></p></li>
</ol>
<p><img
src="https://image.pencilq.com/images/2019/05/02/5cc704120aed2.gif" /></p>
<hr />
]]></content>
      <tags>
        <tag>二次开发</tag>
        <tag>ABAQUS</tag>
      </tags>
  </entry>
  <entry>
    <title>阿里云 Centos 7.3 安装 Jupyter Notebook</title>
    <url>//21/</url>
    <content><![CDATA[<h2 id="安装步骤">安装步骤</h2>
<ol type="1">
<li><a
href="https://www.jianshu.com/p/fff4a61dee7a">安装过程</a>，安装最新版本</li>
<li> 对于新版本 5.3.0 还需要额外开启
<code>allow_remote_access</code> 的选项才可以正常进行远程访问</li>
<li>对于需要 <code>--allow-root</code> 的问题，开启
<code>c.NotebookApp.allow_root = True</code> 即可，<a
href="https://tuxianchao.github.io/post/%E5%9C%A8%E9%98%BF%E9%87%8C%E4%BA%91centos7%E8%A3%85%E4%B8%AAjupyter/">参考</a>
<span id="more"></span></li>
<li>使用时发现没有安装 <code>numpy</code> 这些常用包，运行
<code>conda update anaconda</code> 报错，<a
href="https://support.anaconda.com/customer/en/portal/articles/2797011-updating-anaconda-to-python-3-6">查询文档</a>，运行 <code>conda install anaconda</code> 即可。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PackageNotInstalledError: Package is not installed <span class="keyword">in</span> prefix.</span><br><span class="line">      package name: anaconda</span><br></pre></td></tr></table></figure>
<ul>
<li>别忘了 <code>conda activate jupyter_notebook</code></li>
</ul>
<h2 id="安装插件">安装插件</h2>
<ol type="1">
<li>安装完需要重启 <code>jupyter notebook</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install jupyter_contrib_nbextensions &amp;&amp; jupyter contrib nbextension install</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li><p> 相关插件 <a href="https://www.jishuwen.com/d/2Clq">参考</a> &gt;
如果出现 <code>autopep8 module not found error</code>，运行
<code>pip install autopep8 --user</code>，<a
href="https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/1300">参考</a></p></li>
<li><p>安装 <code>Cpython</code> ，<a
href="https://zhuanlan.zhihu.com/p/33696082">参考</a></p></li>
</ol>
<h2 id="界面优化">界面优化</h2>
<ol type="1">
<li><a
href="https://github.com/merqurio/jupyter_themes">推荐 </a>（可以随心更换高亮主题，代码字体）</li>
<li>安装主题（不习惯，对移动端不友好）</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install jupyterthemes</span></span><br><span class="line">pip install jupyterthemes</span><br><span class="line"></span><br><span class="line"><span class="comment"># upgrade to latest version</span></span><br><span class="line">pip install --upgrade jupyterthemes</span><br><span class="line"></span><br><span class="line">jt -t grade3 -f roboto -nf robotosans -tf robotosans -N -T -cellw <span class="number">70</span>% -dfs <span class="number">10</span> -ofs <span class="number">10</span></span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li><a
href="https://blog.csdn.net/qq_30565883/article/details/79444750">配置分享</a></li>
<li>其它 <a
href="https://www.zhihu.com/question/266988943/answer/632279672">参考</a></li>
</ol>
<hr />
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">jt -t oceans16 -f fira -fs 13 -cellw 90% -ofs 11 -dfs 11 -T</span><br></pre></td></tr></table></figure>
<h2 id="同步服务器文件夹">同步服务器文件夹</h2>
<blockquote>
<p>文件还是要备一份在本地稳妥。</p>
</blockquote>
<ol type="1">
<li>【不推荐】考虑到自己是坚果云用户，希望能够通过<a
href="https://chenyongjun.vip/articles/100">坚果云实现文件夹同步</a>，但是 使用
<code>JupyterNotebook</code> 的时候会保存失败，丢失内容。（<strong>大坑</strong>，但是作为其他用途或许不错）</li>
<li>【极力推荐】<strong><a
href="http://www.verysync.com/manual/install/#linux">微力同步</a></strong>，提供了自动安装脚本，使用起来非常稳定，且有版本历史备份。类似应用
<code>resilio sync </code> 在大陆无法正常使用，
<code>Syncthing</code> 问题较多，同步经常出问题。</li>
</ol>
<p>通过 <span class="math inline">\(\LaTeX\)</span> 导出
<code>PDF</code> </p>
<ol start="3" type="1">
<li>安装 texlive，<a
href="https://www.jianshu.com/p/3b3a6f1f11bc">参考</a></li>
<li>导出中文 pdf，修改 article 为 ctexart 即可，<a
href="https://www.jianshu.com/p/c3f660188766">参考</a></li>
</ol>
<h2 id="在现标签页打开新笔记本">在现标签页打开新笔记本</h2>
<p><a
href="https://github.com/jupyter/notebook/issues/4115">参考</a></p>
<p>在
<code>.jupyter/custom/custom.js</code> 文件中修改或者添加以下部分</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&quot;base/js/namespace&quot;</span>], <span class="keyword">function</span> (<span class="params">Jupyter</span>) &#123;</span><br><span class="line">  <span class="title class_">Jupyter</span>.<span class="property">_target</span> = <span class="string">&#x27;_self&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="后台运行及结束进程">后台运行及结束进程</h2>
<p><a
href="https://blog.csdn.net/weixin_42561002/article/details/85382922">参考</a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 后台运行</span></span><br><span class="line"><span class="built_in">nohup</span> jupyter notebook --allow-root &gt; jupyter.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/ps.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结束后台应用</span></span><br><span class="line">ps -ef|grep jupyter</span><br><span class="line"><span class="built_in">kill</span> pid</span><br></pre></td></tr></table></figure></p>
<h2 id="其它遇到的问题">其它遇到的问题</h2>
<ol type="1">
<li> 绑定域名及启用 SSL 会出现连不上内核的情况</li>
</ol>
]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>安装 neper 多晶体网格生成软件</title>
    <url>//22/</url>
    <content><![CDATA[<p><img
src="https://image.pencilq.com/images/2019/05/04/gene_gene-min.png" /></p>
<blockquote>
<p>概述：安装 neper 前需要安装的组件包括 gcc, g++; cmake; gsl; nlopt;
povray; gmsh; imagemagick 这里记录了两种环境安装 neper
的过程（基本相同）： 1.桌面发行版 Deepin 2.Win10(1809以上) 的 Linux
ubuntu 子系统 (WSL)</p>
</blockquote>
<span id="more"></span>
<h2 id="deepin-下安装-neper">Deepin 下安装 neper</h2>
<p>在安装neper之前， 需要安装 <a
href="http://mirrors.ustc.edu.cn/gnu/gsl/">GSL(GNU Scientific Library)
<i class="fa fa-external-link fa-fw"></i></a>和 <code>NLOPT</code>
(不需下载)。下载 <a href="http://neper.sourceforge.net/index.html">Neper
<i class="fa fa-external-link fa-fw"></i></a>。</p>
<p>安装编译器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt install gcc</span><br><span class="line"><span class="built_in">sudo</span> apt install g++</span><br></pre></td></tr></table></figure>
<p>安装 <code>GSL</code>，<code>cd</code> 到 <code>GSL</code> 目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ./configure</span><br><span class="line"><span class="built_in">sudo</span> make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>
<p>安装 <code>NLOPT</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libnlopt.dev</span><br></pre></td></tr></table></figure>
<p>安装 <code>CMAKE</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install cmake</span><br></pre></td></tr></table></figure>
<p>安装 <code>neper</code></p>
<p><code>cd</code> 到 <code>neper</code> 下的 <code>src</code>
文件中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> Build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>
<p>安装 <code>Gmsh</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libgmsh-dev</span><br></pre></td></tr></table></figure>
<p>安装 <code>PoV-Ray</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install povray</span><br></pre></td></tr></table></figure>
<p>测试安装，在 <code>neper</code> 的 <code>build</code> 目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h2 id="wsl-ubuntu-安装-neper">WSL ubuntu 安装 neper</h2>
<h3 id="安装环境">安装环境</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install cmake</span><br><span class="line"><span class="built_in">sudo</span> apt install g++</span><br><span class="line"><span class="built_in">sudo</span> apt install gcc</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libnlopt.dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install povray</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgmsh-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install imagemagick</span><br></pre></td></tr></table></figure>
<p>安装 <a href="http://mirrors.ustc.edu.cn/gnu/gsl/">GSL
<i class="fa fa-external-link fa-fw"></i></a>，在 <code>GSL</code>
目录下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ./configure</span><br><span class="line"><span class="built_in">sudo</span> make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>
<h3 id="编译安装-neper">编译安装 neper</h3>
<p>下载 <a href="http://neper.sourceforge.net/">neper
<i class="fa fa-external-link fa-fw"></i></a>，解压，进入
<code>neper/src/</code> 目录，执行编译</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> buid &amp;&amp; cmake ..</span><br><span class="line">make -j</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>
<p>在 <code>build</code> 目录下执行 <code>make test</code>
进行测试，可以在 <code>build</code> 目录下找到相应的生成文件</p>
<h2 id="运行例子">运行例子</h2>
<blockquote>
<p>来源 neper 官网</p>
</blockquote>
<p>保存以下例子为 <code>gene_gene.sh</code>，执行
<code>sudo sh ./gene_gene.sh</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">NEPER=<span class="string">&quot;neper --rcfile none&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$NEPER</span> -T -n 1000 -domain <span class="string">&quot;cube(1,1,1)&quot;</span>       -o gene_gene_1</span><br><span class="line"><span class="variable">$NEPER</span> -T -n 1000 -domain <span class="string">&quot;cylinder(1,1,200)&quot;</span> -o gene_gene_2</span><br><span class="line"><span class="variable">$NEPER</span> -T -n 1000 -domain <span class="string">&quot;sphere(1,1000)&quot;</span>    -o gene_gene_3</span><br><span class="line"></span><br><span class="line">C=<span class="string">&quot;-datacellcol id -datacelltrs 0.5 -cameraangle 12 -imagesize 600:600&quot;</span></span><br><span class="line"><span class="variable">$NEPER</span> -V gene_gene_1.tess <span class="variable">$C</span> -<span class="built_in">print</span> gene_gene_1</span><br><span class="line"><span class="variable">$NEPER</span> -V gene_gene_2.tess <span class="variable">$C</span> -showedge <span class="string">&quot;cyl==0&quot;</span>   -cameraangle 11 -<span class="built_in">print</span> gene_gene_2</span><br><span class="line"><span class="variable">$NEPER</span> -V gene_gene_3.tess <span class="variable">$C</span> -showedge <span class="string">&quot;polynb&gt;1&quot;</span> -cameraangle 9  -<span class="built_in">print</span> gene_gene_3</span><br><span class="line"></span><br><span class="line">convert +append gene_gene_?.png gene_gene.png</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>
<h2 id="可能出现的错误以及解决方案">可能出现的错误以及解决方案</h2>
<div class="note danger"><p>No CMAKE_CXX_COMPILER could be found. Tell CMake where to find the
compiler by setting either the environment variable "CXX" or the CMake
cache entry CMAKE_CXX_COMPILER to the full path to the compiler, or to
the compiler name if it is in the PATH.</p>
</div>
<p>需要安装 <code>cmake</code></p>
<div class="note danger"><p>FindGSL.cmake: gsl-config/pkg-config gsl not found. Please set it
manually. GSL_CONFIG=GSL_CONFIG-NOTFOUND CMake Error at
cmake/FindGSL.cmake:178 (MESSAGE): GSL required, please specify it's
location. Call Stack (most recent call first):
contrib/ut/CMakeLists.txt:94 (find_package)</p>
</div>
<p>需要安装 <code>GSL</code></p>
<div class="note danger"><p>CMake Error at
/usr/share/cmake-3.10/Modules/FindPackageHandleStandardArgs.cmake:137
(message): Could NOT find NLOPT (missing: NLOPT_LIBRARY
NLOPT_INCLUDE_DIRS) Call Stack (most recent call first):
/usr/share/cmake-3.10/Modules/FindPackageHandleStandardArgs.cmake:378
(_FPHSA_FAILURE_MESSAGE) cmake/FindNLOPT.cmake:35
(find_package_handle_standard_args) contrib/orilib/CMakeLists.txt:115
(find_package)</p>
</div>
<p>需要安装 <code>NLOPT</code></p>
<div class="note danger"><p>Error : Povray not found! Make sure it is available at the command
line then run Neper again.</p>
</div>
<p>需要安装 <code>povray</code> 和 <code>gmsh</code></p>
<div class="note danger"><p>convert: not found</p>
</div>
<p>需要安装 <code>imagemagick</code></p>
<hr />
<blockquote>
<p>参考链接：<a
href="https://blog.csdn.net/u011211153/article/details/79274248">Neper
在 Linux（ubuntu）下的安装方法
<i class="fa fa-external-link fa-fw"></i></a></p>
</blockquote>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Matlab 笔记</title>
    <url>//23/</url>
    <content><![CDATA[<div class="note default"><p>从 <code>Matlab Figure</code> 中重新提取数据</p>
</div>
<p><a
href="https://www.mathworks.com/matlabcentral/answers/100687-how-do-i-extract-data-from-matlab-figures">How
do I extract data from MATLAB figures?</a></p>
<div class="note default"><p>matlab 线型总结（查看帮助文档 plot 函数）</p>
</div>
<p><a
href="https://blog.csdn.net/LK274857347/article/details/56845818">画图线型、符号及颜色汇总</a></p>
<div class="note default"><p>寻找数据的波峰波谷</p>
</div>
<p><a
href="https://blog.csdn.net/xysw2012/article/details/39507585">寻找峰值（波峰，波谷）</a></p>
<p>其中的，</p>
<p><code>IndMin, data (IndMin)</code> 对应的是波谷点的数据
<code>IndMax, data (IndMax)</code> 对应的是波峰点的数据</p>
<span id="more"></span>
<div class="note default"><p>matlab 中乘法 <code>*</code> 和点乘 <code>.*</code>；除法
<code>/</code> 和点除 <code>./</code> 的联系和区别</p>
</div>
<p><a
href="https://blog.csdn.net/xiaotao_1/article/details/79026406">matlab
中乘法 <code>*</code> 和点乘 <code>.*</code>；除法 <code>/</code> 和点除
<code>./</code> 的联系和区别</a></p>
<div class="note default"><p>matlab 导出图片删除白边</p>
</div>
<p><a
href="https://www.mathworks.com/help/matlab/creating_plots/save-figure-with-minimal-white-space.html">Save
Plot with Minimal White Space</a></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">ax = gca;</span><br><span class="line">outerpos = ax.OuterPosition;</span><br><span class="line">ti = ax.TightInset; </span><br><span class="line">left = outerpos(<span class="number">1</span>) + ti(<span class="number">1</span>);</span><br><span class="line">bottom = outerpos(<span class="number">2</span>) + ti(<span class="number">2</span>);</span><br><span class="line">ax_width = outerpos(<span class="number">3</span>) - ti(<span class="number">1</span>) - ti(<span class="number">3</span>);</span><br><span class="line">ax_height = outerpos(<span class="number">4</span>) - ti(<span class="number">2</span>) - ti(<span class="number">4</span>);</span><br><span class="line">ax.Position = [left bottom ax_width ax_height];</span><br></pre></td></tr></table></figure>
<p><a
href="https://stackoverflow.com/questions/3801730/get-rid-of-the-white-space-around-matlab-figures-pdf-output">Get
rid of the white space around matlab figure's pdf output</a></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 保存为 printpdf.m </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printpdf</span><span class="params">(h,outfilename)</span></span></span><br><span class="line"></span><br><span class="line">set(h, <span class="string">&#x27;PaperUnits&#x27;</span>,<span class="string">&#x27;centimeters&#x27;</span>);</span><br><span class="line">set(h, <span class="string">&#x27;Units&#x27;</span>,<span class="string">&#x27;centimeters&#x27;</span>);</span><br><span class="line">pos=get(h,<span class="string">&#x27;Position&#x27;</span>);</span><br><span class="line">set(h, <span class="string">&#x27;PaperSize&#x27;</span>, [pos(<span class="number">3</span>) pos(<span class="number">4</span>)]);</span><br><span class="line">set(h, <span class="string">&#x27;PaperPositionMode&#x27;</span>, <span class="string">&#x27;manual&#x27;</span>);</span><br><span class="line">set(h, <span class="string">&#x27;PaperPosition&#x27;</span>,[<span class="number">0</span> <span class="number">0</span> pos(<span class="number">3</span>) pos(<span class="number">4</span>)]);</span><br><span class="line">print(<span class="string">&#x27;-dpdf&#x27;</span>,outfilename);</span><br></pre></td></tr></table></figure>
<p>使用示例： <code>printpdf(gcf,'test')</code></p>
<div class="note default"><p>导出 pdf 不是矢量格式</p>
</div>
<p>matlab 导出矢量图 <code>(pdf ,svg)</code>
的坑。当数据过多的时候，Matlab的自动渲染器设置从 <code>-painters</code>
渲染器切换到 <code>-opengl</code> 渲染器，会输出成标量图。这时要手动换回
<code>-painters</code>.</p>
<p><a
href="https://www.mathworks.com/matlabcentral/answers/363832-some-figures-not-saving-as-vector-graphics-svg">Some
figures not saving as vector graphics (.svg)</a></p>
<p><a
href="https://www.mathworks.com/help/matlab/ref/print.html">https://www.mathworks.com/help/matlab/ref/print.html</a></p>
<div class="note default"><p>plot 绘制 marker ，控制绘制间隔</p>
</div>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;LineStyle&#x27;</span>, <span class="string">&#x27;-.&#x27;</span>, <span class="string">&#x27;Marker&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;MarkerIndices&#x27;</span>,<span class="number">1</span>:<span class="number">300</span>:<span class="built_in">length</span>(ydata)</span><br></pre></td></tr></table></figure>
<p>每隔 300 个点一个标记</p>
<div class="note default"><p>matlab设置字体，导出 pdf 字体失效</p>
</div>
<p>一些特殊的字符，比如 <code>℃</code>，会导致字体失效。示例代码。</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">A = peaks(<span class="number">15</span>);</span><br><span class="line">imagesc(A);</span><br><span class="line">set(gca, <span class="string">&#x27;FontName&#x27;</span>, <span class="string">&#x27;Times New Roman&#x27;</span>, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">20</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x ℃&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;Times New Roman Font ℃&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;Title ℃&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;test.pdf&#x27;</span>,<span class="string">&#x27;-dpdf&#x27;</span>)</span><br><span class="line">print(<span class="string">&#x27;test.png&#x27;</span>,<span class="string">&#x27;-dpng&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>可以看到导出的 pdf 字体发生了变化。（左边 png，右边 pdf ）</p>
<p><img
src="https://image.pencilq.com/images/2019/05/20/test.png" /></p>
<div class="note default"><p>变量类型转换</p>
</div>
<p>num 类型转 str <code>num2str</code> sym 转 str
<code>char()</code></p>
<div class="note default"><p>matlab 耗时优化</p>
</div>
<p><strong>预分配内存</strong></p>
<p>matlab 预分配内存后速度提升非常明显</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tic</span><br><span class="line">a = <span class="built_in">zeros</span>(<span class="number">1</span>, <span class="number">10</span>^<span class="number">5</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">1</span>:<span class="number">10</span>^<span class="number">5</span></span><br><span class="line">    a(<span class="built_in">i</span>) = <span class="built_in">i</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">time1 = toc</span><br><span class="line"></span><br><span class="line">tic</span><br><span class="line">b = [];</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">1</span>:<span class="number">10</span>^<span class="number">5</span></span><br><span class="line">    b = [b ,<span class="built_in">i</span>];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">time2 = toc</span><br></pre></td></tr></table></figure>
<div class="note success"><p>time1 = 0.0019 time2 = 2.8006</p>
</div>
<p><strong>disp 也会消耗较多时间</strong></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">tic</span><br><span class="line">a = <span class="built_in">zeros</span>(<span class="number">1</span>, <span class="number">10</span>^<span class="number">5</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">1</span>:<span class="number">10</span>^<span class="number">5</span></span><br><span class="line">    a(<span class="built_in">i</span>) = <span class="built_in">i</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">time1 = toc;</span><br><span class="line"></span><br><span class="line">tic</span><br><span class="line">a = <span class="built_in">zeros</span>(<span class="number">1</span>, <span class="number">10</span>^<span class="number">5</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">1</span>:<span class="number">10</span>^<span class="number">5</span></span><br><span class="line">    a(<span class="built_in">i</span>) = <span class="built_in">i</span>;</span><br><span class="line">    <span class="built_in">disp</span>(a(<span class="built_in">i</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">time2 = toc;</span><br></pre></td></tr></table></figure>
<div class="note success"><p>time1 = 0.0016 time2 = 1.1805</p>
</div>
]]></content>
      <tags>
        <tag>Matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>高清地图</title>
    <url>//24/</url>
    <content><![CDATA[<p><img src="https://image.pencilq.com/images/2019/09/01/map.jpg" /></p>
<span id="more"></span>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="https://image.pencilq.com/images/2019/05/30/1.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/2.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/3.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/4.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/5.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/6.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/7.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/8.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/9.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/10.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/11.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/12.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/13.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/14.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/15.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/16.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/17.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/18.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/19.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/20.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/05/30/21.jpg" /></div></div></div>
<blockquote>
<p>来源见水印</p>
</blockquote>
]]></content>
      <tags>
        <tag>图片</tag>
      </tags>
  </entry>
  <entry>
    <title>获取知网学位论文 pdf 版本</title>
    <url>//25/</url>
    <content><![CDATA[<h2 id="海外版知网">海外版知网</h2>
<p>⭐⭐⭐⭐⭐ <a href="http://new.oversea.cnki.net/index/">海外版
<i class="fa fa-external-link fa-fw"></i></a> 知网提供 pdf
格式的学位论文下载 <span id="more"></span> ## 油猴脚本</p>
<p>⭐⭐⭐⭐ 1. 安装油猴脚本 <a
href="https://www.tampermonkey.net/">Tampermonkey
<i class="fa fa-external-link fa-fw"></i></a>，Chrome
浏览器直接在应用商店<a
href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo">安装插件
<i class="fa fa-external-link fa-fw"></i></a>。如果无法访问外网，在<a
href="https://chrome-extension-downloader.com/">chrome-extension-downloader
<i class="fa fa-external-link fa-fw"></i></a>输入 Tampermonkey 的 ID
<code>dhdgffkkebhmkfjojejmpbldmpobfkfo</code> 下载离线插件进行安装。 2.
安装 CNKI PDF 下载脚本，打开 <a
href="https://greasyfork.org/zh-CN/scripts/368399-cnki-pdf-download">脚本下载页面
<i class="fa fa-external-link fa-fw"></i></a>，按照提示进行安装即可。 3.
访问知网的学位论文下载页面，可以看到 PDF 的下载选项。</p>
<h2 id="caj2pdf_gui">caj2pdf_gui</h2>
<p>⭐⭐⭐ <a href="https://github.com/JeziL/caj2pdf">caj2pdf
<i class="fa fa-external-link fa-fw"></i></a> 可以将 caj 转换成 pdf。<a
href="https://github.com/ElonH/caj2pdf_gui">GUI 版本
<i class="fa fa-external-link fa-fw"></i></a>使用更直观。</p>
<p><a href="https://github.com/ElonH/caj2pdf_gui/releases">下载
<i class="fa fa-external-link fa-fw"></i></a> 后直接运行选择 caj
文件即可转换。具体使用看<a
href="https://github.com/ElonH/caj2pdf_gui">项目 cai2pdf_gui主页
<i class="fa fa-external-link fa-fw"></i></a>。</p>
<h2 id="caj2pdf-命令行">caj2pdf 命令行</h2>
<p>⭐⭐⭐ 安装环境及用法查看 <a
href="https://github.com/JeziL/caj2pdf">caj2pdf 项目主页</a>。在批量处理
caj 文件时比较方便，可参考 <a
href="https://pencilq.com/9/">在命令行中批处理 pdf
<i class="fa fa-external-link fa-fw"></i></a> 自行编写脚本。</p>
<h2 id="批量下载知网期刊-pdf">批量下载知网期刊 pdf</h2>
<p>某日需要在知网上批量下载 pdf 的时候，发现知网提供了官方的下载工具 <a
href="http://estudy.cnki.net/">CNKI E-Study
<i class="fa -fa-external-link fa-fw"></i></a>。</p>
<p>在知网选中多个搜索条目后，直接点击批量下载，下载保存后缀为
<code>.eln</code> 的文件，直接用 CNKI E-study 打开导入。</p>
<p>在<strong>下载设置</strong>界面选择默认下载
pdf，选中所需的文献<strong>下载全文</strong>。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/05/cnki_Estudy.jpg" /></p>
]]></content>
      <tags>
        <tag>技巧</tag>
      </tags>
  </entry>
  <entry>
    <title>蠕变机制</title>
    <url>//26/</url>
    <content><![CDATA[<blockquote>
<p>搬运地址:
https://www.youtube.com/playlist?list=PLcn75M47p2vIa54zF5IkcF2rIax02E8pQ
搬运说明: The purpose of this channel is to share animations that
explain concepts in materials science and engineering. The videos shown
here are open source and can be used by anyone provided they are
referenced as per the video description.</p>
</blockquote>
<div class="tabs" id="tabsone"><ul class="nav-tabs"><li class="tab active"><a href="#tabsone-1"><i class="fa fa-forward"></i>Creep Grain boundary sliding</a></li><li class="tab"><a href="#tabsone-2"><i class="fa fa-forward"></i>Creep Dislocation</a></li><li class="tab"><a href="#tabsone-3"><i class="fa fa-forward"></i>Creep Diffusion</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tabsone-1"><video src="https://file.pencilq.com/videos/Creep Grain boundary sliding.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video></div><div class="tab-pane" id="tabsone-2"><video src="https://file.pencilq.com/videos/Creep Dislocation.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video></div><div class="tab-pane" id="tabsone-3"><video src="https://file.pencilq.com/videos/Creep Diffusion.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster>
</video></div></div></div>
]]></content>
  </entry>
  <entry>
    <title>sublimetext 相关配置</title>
    <url>//27/</url>
    <content><![CDATA[<h2 id="sublimetext-3207-破解">SublimeText 3207 破解</h2>
<blockquote>
<p>参考 <a
href="https://www.xiaomcm.com/249.html">https://www.xiaomcm.com/249.html</a></p>
</blockquote>
<h2 id="添加-windows-右键-sublime-text-打开文件夹">添加 Windows 右键
Sublime Text 打开文件夹</h2>
<blockquote>
<p><a
href="https://gist.github.com/roundand/9367852">https://gist.github.com/roundand/9367852</a></p>
</blockquote>
<span id="more"></span>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">SET</span> st3Path=D:\Program Files\Sublime Text <span class="number">3</span>\sublime_text.exe</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem add it for all file types</span></span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text <span class="number">3</span>&quot;         /t REG_SZ /v &quot;&quot; /d &quot;Open with Sublime Text <span class="number">3</span>&quot;   /f</span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text <span class="number">3</span>&quot;         /t REG_EXPAND_SZ /v &quot;Icon&quot; /d &quot;<span class="variable">%st3Path%</span>,<span class="number">0</span>&quot; /f</span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\*\shell\Open with Sublime Text <span class="number">3</span>\command&quot; /t REG_SZ /v &quot;&quot; /d &quot;<span class="variable">%st3Path%</span> \&quot;<span class="variable">%%1</span>\&quot;&quot; /f</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">rem add it for folders</span></span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\Folder\shell\Open with Sublime Text <span class="number">3</span>&quot;         /t REG_SZ /v &quot;&quot; /d &quot;Open with Sublime Text <span class="number">3</span>&quot;   /f</span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\Folder\shell\Open with Sublime Text <span class="number">3</span>&quot;         /t REG_EXPAND_SZ /v &quot;Icon&quot; /d &quot;<span class="variable">%st3Path%</span>,<span class="number">0</span>&quot; /f</span><br><span class="line">@reg add &quot;HKEY_CLASSES_ROOT\Folder\shell\Open with Sublime Text <span class="number">3</span>\command&quot; /t REG_SZ /v &quot;&quot; /d &quot;<span class="variable">%st3Path%</span> \&quot;<span class="variable">%%1</span>\&quot;&quot; /f</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<p>修改路径 st3Path，保存为
xxx.bat，以管理员身份运行，运行后即可在菜单看到相应选项。打开目录树
<code>先按 ctrl+k 再 ctrl+b</code> <img
src="https://image.pencilq.com/images/2019/07/03/sublimetext3-folder.png" /></p>
<h2 id="修改菜单栏及侧栏字体大小">修改菜单栏及侧栏字体大小</h2>
<p><a
href="https://www.jianshu.com/p/906c48f2da5c">https://www.jianshu.com/p/906c48f2da5c</a></p>
<h2 id="latex-tools-预览公式失败的问题">LaTeX-Tools
预览公式失败的问题</h2>
<blockquote>
<p>参考 <a
href="https://github.com/SublimeText/LaTeXTools/issues/1148#issuecomment-314762160">https://github.com/SublimeText/LaTeXTools/issues/1148#issuecomment-314762160</a></p>
</blockquote>
<p>新建环境变量 <code>GS_LIB</code>，根据 texlive 安装路径进行修改
<code>path\to\texlive\tlpkg\tlgs\Resource\Init;path\to\texlive\tlpkg\tlgs\kanji</code>，重启
Sublime Text。</p>
]]></content>
  </entry>
  <entry>
    <title>自建 rss 服务——tinytinyrss</title>
    <url>//29/</url>
    <content><![CDATA[<h2 id="通过宝塔面板搭建-ttrss-服务">通过宝塔面板搭建 ttrss 服务</h2>
<blockquote>
<p>参考 <a
href="https://wzfou.com/rss-yuedu/">https://wzfou.com/rss-yuedu/</a></p>
</blockquote>
<ul>
<li>安装 LNMP 环境</li>
<li>安装 PHP fileinfo 模块</li>
<li>创建网站，绑定域名，创建数据库</li>
<li>上传 <a href="https://git.tt-rss.org/fox/tt-rss">ttrss</a>
程序到网站根目录</li>
<li>访问域名，按照提示操作</li>
<li>如果服务启动失败：检查 fileinfo 模块是否成功安装（内存太小会导致
fileinfo 无法安装，可以适当增大 swap 分区 1024M）</li>
</ul>
<span id="more"></span>
<h2 id="安装插件和主题">安装插件和主题</h2>
<h3 id="获取全文插件">获取全文插件</h3>
<h2 id="后台定时更新">后台定时更新</h2>
<h3 id="获取全文插件-1">获取全文插件</h3>
<h3 id="feedly-主题">Feedly 主题</h3>
<h2 id="客户端">客户端</h2>
<ul>
<li>安卓</li>
<li>IOS</li>
<li>WIN10</li>
<li>MACOS</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>软件: LaTeX 常用符号</title>
    <url>//3/</url>
    <content><![CDATA[<center>
<font color="#206CC9">日常困惑的 latex 符号集锦</font>
</center>
<p><span class="math inline">\(\rm{A}\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\rm{B}\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Gamma\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Delta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\rm{E}\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
Z\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\rm H\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Theta\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
I\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\rm K\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Lambda\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
M\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\rm N\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Xi\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
O\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\Pi\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
P\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\Sigma\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
T\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\Upsilon\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Phi\)</span> <span
class="math inline">\(\;\)</span> <span class="math inline">\(\rm
X\)</span> <span class="math inline">\(\;\)</span> <span
class="math inline">\(\Psi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\Omega\)</span></p>
<p><span class="math inline">\(\alpha\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\beta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\gamma\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\delta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\epsilon\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\zeta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\eta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\theta\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\iota\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\kappa\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\lambda\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\mu\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\nu\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\xi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\omicron\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\pi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\rho\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\sigma\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\tau\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\upsilon\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\phi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\chi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\psi\)</span> <span
class="math inline">\(\;\)</span> <span
class="math inline">\(\omega\)</span></p>
<span id="more"></span>
<h2 id="level-1-希腊字母">level 1 希腊字母</h2>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 38%" />
<col style="width: 30%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">序号</th>
<th style="text-align: center;">大写</th>
<th style="text-align: center;">小写</th>
<th style="text-align: center;">英文</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;"><span
class="math inline">\(\rm{A}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\alpha\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(alpha\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;"><span class="math inline">\(\rm
B\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\beta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(beta\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;"><span
class="math inline">\(\Gamma\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\gamma\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(gamma\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;"><span
class="math inline">\(\Delta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\delta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(delta\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;"><span class="math inline">\(\rm
E\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\epsilon\)</span> <span
class="math inline">\(\varepsilon\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(epsilon\)</span> <span
class="math inline">\(varepsilon\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;"><span class="math inline">\(\rm
Z\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\zeta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(zeta\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;"><span class="math inline">\(\rm
H\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\eta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(eta\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;"><span
class="math inline">\(\Theta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\theta\)</span> <span
class="math inline">\(\vartheta\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(theta\)</span> <span
class="math inline">\(vartheta\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;"><span class="math inline">\(\rm
I\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\iota\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(iota\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: center;"><span class="math inline">\(\rm
K\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\kappa\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(kappa\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">11</td>
<td style="text-align: center;"><span
class="math inline">\(\Lambda\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\lambda\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(lambda\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">12</td>
<td style="text-align: center;"><span class="math inline">\(\rm
M\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\mu\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(mu\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">13</td>
<td style="text-align: center;"><span class="math inline">\(\rm
N\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\nu\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(nu\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">14</td>
<td style="text-align: center;"><span
class="math inline">\(\Xi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\xi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(xi\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">15</td>
<td style="text-align: center;"><span class="math inline">\(\rm
O\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\omicron\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(omicron\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">16</td>
<td style="text-align: center;"><span
class="math inline">\(\Pi\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\pi\)</span>
<span class="math inline">\(\varPi\)</span></td>
<td style="text-align: center;"><span class="math inline">\(pi\)</span>
<span class="math inline">\(varpi\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">17</td>
<td style="text-align: center;"><span class="math inline">\(\rm
P\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\rho\)</span> <span
class="math inline">\(\varrho\)</span></td>
<td style="text-align: center;"><span class="math inline">\(rho\)</span>
<span class="math inline">\(varrho\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">18</td>
<td style="text-align: center;"><span
class="math inline">\(\Sigma\)</span> <span
class="math inline">\(\varSigma\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\sigma\)</span> <span
class="math inline">\(\varsigma\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(varSigma\)</span> <span
class="math inline">\(sigma\)</span> <span
class="math inline">\(varsigma\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">19</td>
<td style="text-align: center;"><span class="math inline">\(\rm
T\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\tau\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(tau\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">20</td>
<td style="text-align: center;"><span
class="math inline">\(\Upsilon\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\upsilon\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(upsilon\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">21</td>
<td style="text-align: center;"><span
class="math inline">\(\Phi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\phi\)</span> <span
class="math inline">\(\varphi\)</span></td>
<td style="text-align: center;"><span class="math inline">\(phi\)</span>
<span class="math inline">\(varphi\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">22</td>
<td style="text-align: center;"><span class="math inline">\(\rm
X\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\chi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(chi\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">23</td>
<td style="text-align: center;"><span
class="math inline">\(\Psi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\psi\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(psi\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">24</td>
<td style="text-align: center;"><span
class="math inline">\(\Omega\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\omega\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(omega\)</span></td>
</tr>
</tbody>
</table>
<h2 id="level-2-英文字母的一些形式">Level 2 英文字母的一些形式</h2>
<h3 id="花体">花体</h3>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="comment">% 疯掉。。。。到底有什么区别</span></span><br><span class="line"><span class="built_in">$</span><span class="keyword">\mathfrak</span> X<span class="built_in">$</span> <span class="built_in">$</span><span class="keyword">\mathscr</span>&#123;X&#125;<span class="built_in">$</span> <span class="built_in">$</span><span class="keyword">\mathcal</span>&#123;X&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<p><span class="math inline">\(\mathfrak X\)</span> <span
class="math inline">\(\mathscr{X}\)</span> <span
class="math inline">\(\mathcal{X}\)</span></p>
<h2 id="矩阵">矩阵</h2>
<h3 id="矩阵对应元素相乘">矩阵对应元素相乘</h3>
<p><a href="https://www.wikiwand.com/en/Hadamard_product_(matrices)"
class="uri">https://www.wikiwand.com/en/Hadamard_product_(matrices)</a></p>
<p><span class="math display">\[
(A \circ B )_{i,j} = (A)_{i,j}(B)_{i,j}
\]</span></p>
<p><span class="math display">\[
\begin{bmatrix}
a_{11} &amp; a_{12} &amp; a_{13} \\
a_{21} &amp; a_{22} &amp; a_{23} \\
a_{31} &amp; a_{32} &amp; a_{33}
\end{bmatrix}
\circ
\begin{bmatrix}
b_{11} &amp; b_{12} &amp; b_{13} \\
b_{21} &amp; b_{22} &amp; b_{23} \\
b_{31} &amp; b_{32} &amp; b_{33}
\end{bmatrix}
=
\begin{bmatrix}
a_{11}b_{11} &amp; a_{12}b_{12} &amp; a_{13}b_{13} \\
a_{21}b_{21} &amp; a_{22}b_{22} &amp; a_{23}b_{23} \\
a_{31}b_{31} &amp; a_{32}b_{32} &amp; a_{33}b_{33}
\end{bmatrix}
\]</span></p>
<hr />
]]></content>
      <tags>
        <tag>备忘</tag>
        <tag>LaTeX</tag>
      </tags>
  </entry>
  <entry>
    <title>一些个人下载页</title>
    <url>//30/</url>
    <content><![CDATA[<ul>
<li>英国曼彻斯特大学 Prof Matthias Heil，计算力学与生物力学
<ul>
<li>个人主页 <a
href="https://personalpages.manchester.ac.uk/staff/matthias.heil/">https://personalpages.manchester.ac.uk/staff/matthias.heil/</a></li>
<li>下载主页 数学力学课件 <a
href="https://personalpages.manchester.ac.uk/staff/matthias.heil/Lectures/">https://personalpages.manchester.ac.uk/staff/matthias.heil/Lectures/</a></li>
</ul></li>
<li>同济大学
任晓丹博士，混凝土本构关系与结构非线性分析的理论、计算和试验研究工作
<ul>
<li>个人主页 <a
href="http://www.renxiaodan.com/">http://www.renxiaodan.com/</a></li>
<li>下载主页 力学课件 <a
href="http://www.renxiaodan.com/userfiles/files/course/">http://www.renxiaodan.com/userfiles/files/course/</a></li>
</ul></li>
<li>Jean-Louis Chaboche
<ul>
<li>https://www.mendeley.com/profiles/jean-louis-chaboche2/publications/</li>
</ul></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>制作原木滴胶的失败过程</title>
    <url>//32/</url>
    <content><![CDATA[<iframe src="//player.bilibili.com/player.html?aid=66831132&amp;cid=115899519&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;">
</iframe>
<span id="more"></span>
<h2 id="准备不一定用得上的材料工具">准备不一定用得上的材料工具</h2>
<ol type="1">
<li>原木滴胶——海天相接</li>
<li>原木山峰🏔️模型，50*50*22 两个，太小了啊</li>
<li>树脂胶 A B 可能要500g？</li>
<li>白色色素，或者是白乳胶？造云</li>
<li>摆件：干花</li>
<li>方形硅胶模具，换成三块板吧。</li>
<li>不同砂数的砂纸</li>
<li>木蜡磨砂膏</li>
<li>迷你圆柱磁铁8个</li>
<li>圆盘磁铁2个大，1个小</li>
<li>防滑垫1个</li>
<li>USB灯配电源模组1个</li>
<li>圆规</li>
</ol>
<h2 id="制作步骤">制作步骤</h2>
<ol type="1">
<li>顶部山峰先开四个角的磁铁孔，开孔之后还要打磨一下，</li>
<li>填胶，实在不行就热熔胶，装磁铁</li>
<li>用钻，量好尺寸，离角5mm 左右就好，中间的灯孔也要先画好圆</li>
<li>测试灯会不会亮，测量灯的尺寸，画好切割线</li>
<li>顶部山峰开灯孔，可能要直径35mm（这里需要钻）后面再开孔</li>
<li>往底下的山峰滴白色胶，造出雪山的效果（筷子）</li>
<li>喷发胶，插干花，满天星和勿忘我，粘稳先</li>
<li>找一个足够大的容器装胶水，搅拌到不拉丝</li>
<li>将原木固定在三片透明胶板上</li>
<li>在底部山峰滴白色胶，再用筷子引流灌AB胶造云，雾</li>
<li>产生气泡时用吹风机吹一下，或者热风枪</li>
<li>胶凝固之后可能会凹陷，需要填多一点胶水</li>
<li>等待固化24h或者更久</li>
<li>量好开关的尺寸，画图纸，预留磁体的位置，做活页吧，看看有没有金属活页，五金店卖活页和钉子吧</li>
<li>先用椴木测试一下能不能塞进去一个开关</li>
<li>完成之后再用胡桃木弄，抹上胶水之后要用夹具夹住等待固化。</li>
</ol>
<p>效果图 <img
src="https://image.pencilq.com/images/2019/09/06/image.png" /></p>
]]></content>
      <tags>
        <tag>DIY</tag>
      </tags>
  </entry>
  <entry>
    <title>文献管理软件Citavi使用简介</title>
    <url>//33/</url>
    <content><![CDATA[<h2 id="不仅仅是文献管理">不仅仅是文献管理</h2>
<p>Citavi
除了一般文献管理软件的功能外，还带有知识管理和任务规划功能。免费版一个
project 支持100条文献，可以开多几个
project，或者购买付费版本，有学生优惠。另外自带云端服务器，免费上传附件。我用了一个暑假，感觉非常不错，比
Endnote 和 Zotero 都好。</p>
<span id="more"></span>
<p>导师说要做几页PPT介绍这款软件，他上课的时候要展示给学生。下面是PPT：</p>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/Citavi-introduction.pdf" data-height="500px"></div>
]]></content>
      <tags>
        <tag>科研软件</tag>
      </tags>
  </entry>
  <entry>
    <title>交叉验证</title>
    <url>//34/</url>
    <content><![CDATA[<div class="note success"><p>知乎是个好地方，膜大佬。</p>
</div>
<p><a
href="https://zhuanlan.zhihu.com/p/23798202">【机器学习】统计学习引论</a></p>
<p><a
href="https://zhuanlan.zhihu.com/p/24825503">【机器学习】Cross-Validation（交叉验证）详解</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/44872686">偏差 Bias 和方差
Variance—— 机器学习中的模型选择</a></p>
]]></content>
  </entry>
  <entry>
    <title>开坑：SciDraw — Mathematica 科学绘图包</title>
    <url>//35/</url>
    <content><![CDATA[<p>自己在调整 Mathematica 绘图样式的时候总感觉不够意思（审美无能___*(
￣皿￣)/#____），字体、图片大小、坐标轴样式等等调整起来比较耗费功夫，并且有时候不容易达到统一的效果，内置的
PlotTheme 对于论文插图来说也不够精美。</p>
<p>搜索一番，发现了 Mathematica 的 SciDraw 绘图包，样式深得我心。</p>
<figure>
<img
src="https://image.pencilq.com/images/2019/09/20/SciDraw-Example.png"
alt="SciDraw-Example.png" />
<figcaption aria-hidden="true">SciDraw-Example.png</figcaption>
</figure>
<span id="more"></span>
<p>开坑学习🤣。</p>
<p>注意：SciDraw
绘制大量数据时会非常卡顿。如果数据量太大，建议正式出图时再使用。</p>
<div class="note danger"><p><a href="https://jhuo.ca/post/why_programmer_love_script/">重复做 200
次这件事大概总共只需要花一个小时的时间，但写这个脚本反而得写 5 个小时
<i class="fa fa-link fa-fw"></i></a></p>
</div>
<h2 id="官方地址">官方地址</h2>
<p>官方地址 <a href="https://scidraw.nd.edu/">SciDraw
<i class="fa fa-link fa-fw"></i></a></p>
<p>网站上最新的版本是 <a
href="https://scidraw.nd.edu/beta/">SciDraw-0.0.7.zip 2015-03-28 22:08
6.9M <i class="fa fa-link fa-fw"></i></a>，为了方便我在本地提供一个<a
href="https://file.pencilq.com/file_and_note/SciDraw-0.0.7.zip">最新备份
<i class="fa fa-link fa-fw"></i></a>。</p>
<p>安装包内含有 <code>doc</code> 和 <code>packages</code> 两个部分：</p>
<ul>
<li><code>doc</code>：帮助文档和官方提供的案例
<ul>
<li>SciDrawGuide.pdf 帮助手册，必读</li>
<li>Examples-XXX.nb 案例，可直接参考</li>
<li>...</li>
</ul></li>
<li><code>packages</code>：需要在 Mathematica 中导入的包</li>
</ul>
<h2 id="在-mathematica-中导入包">在 Mathematica 中导入包</h2>
<blockquote>
<p>导入包的详细说明在 <code>SciDrawGuide.pdf</code> 中的 page5 --
page8。本文主要简述 Windows 系统下导入，其他系统类似。</p>
</blockquote>
<p>第一步：将 SciDraw 包的文件导入 Mathematica 的默认路径
<code>$Path</code> 中</p>
<p>比如其中的 <code>packages</code> 文件夹的存放路径为
<code>D:\SciDraw\packages</code>，添加路径如下</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">AppendTo</span><span class="punctuation">[</span><span class="built_in">$Path</span><span class="operator">,</span> <span class="string">&quot;D:\\SciDraw\\packages&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<div class="note warning"><p>关于 windows 下路径的写法，正确地表达 <code>\</code>
需要转义，因此实际上写成 <code>\\</code>
才是正确的路径输入方式。如果代码跨系统 (Linux, Macos)
使用的情况，可以统一使用 <code>/</code> 代替 <code>\</code>，即</p>
<p>AppendTo[$Path, "D:/SciDraw/packages"]</p>
<p>另外，每次重启 Mathematica，默认路径 <code>$path</code>
会重置，注意重新导入。如果觉得不便可以自行修改初始化文件
<code>init.m</code>，在打开 Mathematica 时自动导入。</p>
</div>
<p>第二步：加载 SciDraw</p>
<p>直接运行以下代码即可</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get</span><span class="punctuation">[</span><span class="string">&quot;SciDraw`&quot;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<div class="note warning"><p>在 10.4 版本以上时导入会出现类似
<code>SetDelayed::write: "Tag BoundingRegion in BoundingRegion[...] is Protected."</code>
的报错， 具体原因参考官方说明</p>
<p>This is due to name conflicts introduced with Mathematica 10.4. You
may safely ignore these messages and continue using SciDraw normally,
except that SciDraw's BoundingRegion function will not be available to
you. This issue will be addressed in the next release of SciDraw.</p>
<p>总而言之，忽略即可，如果实在看不顺眼，可以取消错误输出。</p>
</div>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(* 取消错误输出 *)</span></span><br><span class="line"><span class="built_in">Get</span><span class="punctuation">[</span><span class="string">&quot;SciDraw`&quot;</span><span class="punctuation">]</span> <span class="operator">//</span> <span class="built_in">Quiet</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/09/20/scidraw-install.png" /></p>
<h2 id="基本的绘图框架">基本的绘图框架</h2>
<blockquote>
<p>详细说明参考 <code>SciDrawGuide.pdf</code> 中的 page9
涉及的函数可以直接在 <code>SciDrawGuide.pdf</code>
中搜索找到详细的说明和选项。因此文中不在详述</p>
</blockquote>
<h3 id="创建画布">创建“画布”</h3>
<p>SciDraw 引入了固定大小的“画布”。这是因为 Mathematica
绘图命令输出的图像会把图像压缩到某个给定大小的区域，使得图像本身和轴标签、刻度等不协调。对于简单绘图的情况，这种自动缩小影响可能不大；但是在创建几个相同大小的图像，并且需要加上各种标签进行标注时，图像大小的变化会直接导致排版混乱。引入“画布”正是为了解决这个问题。</p>
<p>先创建一张空白画布</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">Figure</span><span class="punctuation">[</span></span><br><span class="line"> <span class="comment">(*用于包含图像的主体*)</span></span><br><span class="line"> <span class="built_in">Canvas</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="number">5</span><span class="operator">,</span> <span class="number">3.5</span><span class="punctuation">&#125;</span></span><br><span class="line"> <span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/09/20/blank-canvas.png" /></p>
<p>创建画布时还有其它一些选项，例如：</p>
<ul>
<li>添加外框 <code>CanvasFrame-&gt;True</code></li>
<li>调整外边距大小为 0 <code>CanvasMargin-&gt;0</code></li>
<li>调整尺寸单位 <code>CanvasUnits-&gt;Centimeter</code></li>
</ul>
<h3 id="创建绘图面板">创建绘图面板</h3>
<p>绘图图像绘制在绘图面板中，一张画布可以有多个绘图面板。面板由函数
<code>FigurePanel</code> 创建。</p>
<div class="note success"><p>作者举了一例来帮助理解其中的层次概念： <code>Figure[xxx]</code>
函数相当于 LaTeX 中的 <code>\begin{document} xxx \end{document}</code>；
<code>FigurePanel[xxx]</code> 函数相当于 LaTeX
文档中需要插图图片时创建的环境，例如
<code>\begin{figure} xxx \end{figure}</code></p>
</div>
]]></content>
  </entry>
  <entry>
    <title>哭唧唧 梯子没了</title>
    <url>//36/</url>
    <content><![CDATA[<div class="note danger"><p>【2019年国家网络安全宣传周公益短信】2019年国家网络安全宣传周是9月16日-22日。没有网络安全就没有国家安全，就没有经济社会的稳定运行，广大人民群众利益也难以得到保障。网络安全为人民，网络安全靠人民，积极参与网络安全发展，提升网络安全意识，共筑网络安全防线。【工业和信息化部】</p>
</div>
<p>暂时靠 vultr 的小鸡撑着😭 🤣算了，vultr
小鸡也挂了。。。。换机场。。。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/16/vpsban.jpg" /></p>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="https://image.pencilq.com/images/2019/09/16/ku1.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img src="https://image.pencilq.com/images/2019/09/16/ku2.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku3.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku4.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku5.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku6.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku7.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku7.png" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku9.jpg" /></div><div class="group-picture-column"><img
src="https://image.pencilq.com/images/2019/09/16/ku10.jpg" /></div></div></div>
]]></content>
  </entry>
  <entry>
    <title>Mathematica 中的 feff 字符</title>
    <url>//37/</url>
    <content><![CDATA[<p>在 Mathematica 中导入 CSV 文件时，开头出现 <code>\:feff</code>
字符串。使用 <code>ToExpression</code> 处理时会出现转换问题。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/17/20190917215532.png" /></p>
<p>简单查找了下，发现是因为直接使用 excel 创建 csv 文件时（UTF8
编码），<strong>文件头部被添加了一个不可见字符 BOM (Byte Order Mark)
</strong>。该字符用于 Unicode 标识内部编码的排列方式，在 UTF-16、UTF-32
编码里是必须的，而在 UTF-8 里是可选的。<strong>有的语法解析器没有对 BOM
做处理。</strong></p>
<span id="more"></span>
<p>明确原因后，直接用 vscode 打开瞧一瞧</p>
<p><img
src="https://image.pencilq.com/images/2019/09/18/20190918092024.png" /></p>
<p>果然，<code>UTF-8 with BOM</code></p>
<p><img
src="https://image.pencilq.com/images/2019/09/18/20190918092422.png" /></p>
<p>直接换成 <code>UTF-8</code> 编码保存。问题解决。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/18/20190918092203.png" /></p>
<p>参考链接： <a href="http://blog.uouo123.com/post/693.html">linux
下各种编码问题 ——UTF-8、BOM、的问题
<i class="fa fa-link fa-fw"></i></a></p>
]]></content>
  </entry>
  <entry>
    <title>(转) 应力张量的认识之基本概念</title>
    <url>//38/</url>
    <content><![CDATA[<p>从本科的材料成形原理教材上认识了应力张量后，它便一直出现在我们的视野里。初始，仅是一个基本定义接受了它，进而有过疑惑，随着矩阵论的学习又有了新的认识。曾经就有记录下对其理解的想法，但因思路尚未完善而一再搁置；直到今天重新想起，并完成了方向余弦作为线性空间的证明，才终于开始详细记录。</p>
<p>根据我对应力张量的阶段性认识，相应分为三部分进行记录。本文介绍第一部分，应力的基本知识和常规认识。</p>
<span id="more"></span>
<h2 id="应力">应力</h2>
<p>初中物理已指出，因外力作用而在物体内部产生的力称为<code>内力</code>。单位面积上的内力即是<code>应力</code>，表征内力的强度。</p>
<p>为了研究某一点 <span class="math inline">\(P\)</span>
处的应力，用任意截面在 <span class="math inline">\(P\)</span>
点处切开物体，如下图所示。根据定义可以得到 <span
class="math inline">\(P\)</span> 点的正应力 <span
class="math inline">\(\sigma\)</span> 、切应力 <span
class="math inline">\(\tau\)</span> ，他们的合成即为全应力。</p>
<p><img
src="https://image.pencilq.com/images/2019/10/14/38-1.jpg" /></p>
<p>需要注意的是，一个确定的截面对应了一组正应力和切应力。但是过 <span
class="math inline">\(P\)</span> 点有无数的截面，那么如何才能真正描述
<span class="math inline">\(P\)</span> 点的应力状态呢？</p>
<h3 id="应力状态">应力状态</h3>
<p><code>应力状态</code>
是受力物体某一点各个截面上应力的变化情况。上面已经意识到过一点有无数的截面，只有任意截面上的应力分量都被确定，才能说应力状态是确定的。</p>
<p>通常在无数的截面中，任意取三个互相垂直的截面，并以他们的法线方向建立笛卡尔坐标系。也即在P
点截取一个无限小的平行六面体，称为 <code>单元体</code> 。</p>
<p><img
src="https://image.pencilq.com/images/2019/10/13/20191013202811.png" /></p>
<p>单元体无限小，因此单元体上相互平行的两个平面视为过该点的同一平面，也即他俩的应力是相同的。这样只用三个互相垂直的截面上的应力即可分析问题。</p>
<p>由于单元体处于静力平衡状态，由绕各轴合力矩为零可以得到切应力互等定律。</p>
<blockquote>
<p>问题：既然单元体上相互平行的两个平面视为过该点的同一平面，那为什么上图平行的平面上应力是相反的？</p>
<p>单元体上相互平行的两个平面视为过该点的同一平面，但是分别是被截开的两部分的平面。截开前他们是重合的，截开后成为了两部分各自的表面，而外表面是有方向的。所以，从各自的方向上来看，应力方向还是相同的。</p>
</blockquote>
<h3 id="应力张量">应力张量</h3>
<p>根据上面单元体上的应力分量，是否可以求出下图所示任意截面上的应力分量？</p>
<p><img
src="https://image.pencilq.com/images/2019/10/14/38-3.jpg" /></p>
<p>答案是肯定的。根据三个方向的静力平衡就可以计算得到上图法向为 <span
class="math inline">\(\vec{n}=(n_1,n_2,n_3)\)</span>
截面上的应力分量。于是，三个互相垂直的截面上的 9
个应力分量可以确定任意截面的应力，也就是说这一点的应力状态被完全确定了。并且，从这三个正交截面的选取上来看，他们和坐标系无关。</p>
<p>于是，我们把单元体上的九个应力分量作为一个整体来描述 <span
class="math inline">\(P\)</span> 点的应力状态，称作
<code>应力张量</code> ，记作</p>
<p><span class="math display">\[
\sigma_{ij} =
\begin{pmatrix}
\sigma_x &amp; \tau_{xy} &amp; \tau_{xz} \\
\tau_{yx} &amp; \sigma_y &amp; \sigma_{yz} \\
\tau_{zx} &amp; \tau_{zy} &amp; \sigma_z
\end{pmatrix}
\]</span></p>
<h2 id="主应力">主应力</h2>
<p>如果作用在某一截面上的全应力和这一截面垂直，即该截面上只有正应力，则这一截面称为
<code>主平面</code> ，其法线方向称为应力主方向，该截面的应力称为
<code>主应力</code> 。如果三个坐标轴方向都是主方向，则称这一坐标系为
<code>主轴坐标系</code> 。</p>
<p>确定方法依然是求解静力平衡方程。</p>
<h3 id="应力张量不变量">应力张量不变量</h3>
<p>在求解主应力的过程中会得到以主应力为未知数的三次方程，叫做
<code>状态方程</code> 。 <span class="math display">\[
\sigma^3-I_1\,\sigma^2+I_2\,\sigma-I_3=0
\]</span></p>
<p>状态方程的三个系数由主应力唯一确定，而一点的主应力是唯一的，这样就得到了不随坐标系变化的三个量，叫作
<code>应力张量不变量</code></p>
<p><span class="math display">\[
\begin{align*}
I_1 &amp;= \sigma_1 + \sigma_2 + \sigma_3 \\
I_2 &amp;= \sigma_1 \, \sigma_2 + \sigma_2 \, \sigma_3 + \sigma_3 \,
\sigma_1 \\
I_3 &amp;= \sigma_1 \, \sigma_2 \, \sigma_3
\end{align*}
\]</span></p>
<p>用一般应力表示为</p>
<p><span class="math display">\[
\begin{align*}
I_1 &amp;= \sigma_x + \sigma_y + \sigma_z \\
I_2 &amp;= \sigma_x \, \sigma_y + \sigma_y \, \sigma_z + \sigma_z \,
\sigma_x - \tau_{xy}^2 - \tau_{yz}^2 - \tau_{zx}^2 \\
I_3 &amp;= \sigma_x \, \sigma_y \, \sigma_z +
2\,\tau_{xy}\,\tau_{yz}\,\tau_{zx} - \sigma_x\,\tau_{yz}^2 -
\sigma_y\,\tau_{zx}^2 - \sigma_z\,\tau_{xy}^2
\end{align*}
\]</span></p>
<h3 id="主切应力">主切应力</h3>
<p>切应力有极值的截面叫主切应力平面，截面上的切应力叫作
<code>主切应力</code>
。六个主切应力中绝对值最大的叫作最大切应力。通过计算可知，主切应力平面与主应力平面成
45° 夹角。下表是主切应力平面上的正应力、切应力值：</p>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 26%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="header">
<th>主切应力平面</th>
<th>切应力</th>
<th>正应力</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span
class="math inline">\(\left(0,\,\pm\dfrac{1}{\sqrt{2}},\,\pm\dfrac{1}{\sqrt{2}}\right)\)</span></td>
<td><span
class="math inline">\(\pm\dfrac{\sigma_2-\sigma_3}{2}\)</span></td>
<td><span
class="math inline">\(\dfrac{\sigma_2+\sigma_3}{2}\)</span></td>
</tr>
<tr class="even">
<td><span
class="math inline">\(\left(\pm\dfrac{1}{\sqrt{2}},\,0,\,\pm\dfrac{1}{\sqrt{2}}\right)\)</span></td>
<td><span
class="math inline">\(\pm\dfrac{\sigma_1-\sigma_3}{2}\)</span></td>
<td><span
class="math inline">\(\dfrac{\sigma_1+\sigma_3}{2}\)</span></td>
</tr>
<tr class="odd">
<td><span
class="math inline">\(\left(\pm\dfrac{1}{\sqrt{2}},\,\pm\dfrac{1}{\sqrt{2}}\,0,\right)\)</span></td>
<td><span
class="math inline">\(\pm\dfrac{\sigma_1-\sigma_2}{2}\)</span></td>
<td><span
class="math inline">\(\dfrac{\sigma_1+\sigma_2}{2}\)</span></td>
</tr>
</tbody>
</table>
<p>由于塑性变形是由切应力引起的，所以最大切应力可以作为屈服准则。</p>
<h2 id="应力张量分解">应力张量分解</h2>
<p>将三个正应力的平均值叫作平均应力或者静水应力，应力张量减去这部分后得到
<code>应力偏张量</code> 。应力偏张量同样有三个不变量。</p>
<p><span class="math display">\[
\sigma_m = \dfrac{1}{3}\left(\sigma_x+\sigma_y+\sigma_z\right) =
\dfrac{1}{3}\left(\sigma_{11}+\sigma_{22}+\sigma_{33}\right)
\]</span></p>
<p><span class="math display">\[
\begin{pmatrix}
\sigma_x &amp; \tau_{xy} &amp; \tau_{xz} \\
\tau_{yx} &amp; \sigma_y &amp; \sigma_{yz} \\
\tau_{zx} &amp; \tau_{zy} &amp; \sigma_z
\end{pmatrix}
=
\begin{pmatrix}
\sigma_m &amp; 0 &amp; 0 \\
0 &amp; \sigma_m &amp; 0 \\
0 &amp; 0 &amp; \sigma_m
\end{pmatrix}
+
\begin{pmatrix}
\sigma_x-\sigma_m &amp; \tau_{xy} &amp; \tau_{xz} \\
\tau_{yx} &amp; \sigma_y-\sigma_m &amp; \sigma_{yz} \\
\tau_{zx} &amp; \tau_{zy} &amp; \sigma_z-\sigma_m
\end{pmatrix}
\]</span></p>
<blockquote>
<p>应力张量分解的物理意义在于：</p>
<p>物体在应力张量作用下的变形分为体积变化和形状变化两部分；前者取决于应力球张量，后者取决于应力偏张量。
体积变化表征弹性变形，当应力偏张量满足一定条件后，则物体发生塑性变形。</p>
</blockquote>
<h2 id="应力平衡微分方程">应力平衡微分方程</h2>
<p>以上说明的都是一点的应力状态，而物体内部不同点的应力状态一般是不同的，那么如何描述相邻点间的应力变化关系呢？</p>
<p>以物体内某一点 <span class="math inline">\(P(x,y,z)\)</span>
为顶点截取边长分别为 <span class="math inline">\(dx,dy,dz\)</span>
的直角平行六面体微元，如下图所示，则另一顶点的坐标为 <span
class="math inline">\((x+dx,y+dy,z+dz)\)</span>。</p>
<p><img
src="https://image.pencilq.com/images/2019/10/14/38-4.jpg" /></p>
<p>根据静力平衡方程，并处理掉高阶小量，得到应力平衡微分方程：</p>
<p><span class="math display">\[
\begin{align*}
\dfrac{\partial\sigma_x}{\partial\,x}+\dfrac{\partial\tau_{yx}}{\partial\,y}+\dfrac{\partial\tau_{zx}}{\partial\,z}
&amp;= 0 \\
\dfrac{\partial\tau_{xy}}{\partial\,x}+\dfrac{\partial\sigma_y}{\partial\,y}+\dfrac{\partial\tau_{zy}}{\partial\,z}
&amp;= 0 \\
\dfrac{\partial\tau_{xz}}{\partial\,x}+\dfrac{\partial\tau_{yz}}{\partial\,y}+\dfrac{\partial\sigma_z}{\partial\,z}
&amp;= 0
\end{align*}
\]</span></p>
<blockquote>
<p>问题：这部分微六面体应力状态分析图与之前点的应力状态图即为相似，却有不同，如何理解？
二者的涵义完全不同。点的应力状态图强调的是同一个点在不同截面下的状态，而微六面体应力状态分析强调的是相邻两个点之间的应力关系。可以说前者是静态的，后者揭示的是相互作用的关系。</p>
</blockquote>
<h2 id="总结">总结</h2>
<p>这一部分梳理了我们常规学习的内容，可以概括为两点：</p>
<ul>
<li>应力张量 —— 某点的应力状态</li>
<li>应力平衡方程 —— 相邻点的相互作用</li>
</ul>
<h2 id="相关文章">相关文章</h2>
<p><a href="https://pencilq.com/39">(转) 应力张量的认识之线性变换</a> <a
href="https://pencilq.com/40">(转)
应力张量的认识之线性变换的证明</a></p>
<hr />
<p>转载声明： - 本文转自：<a
href="https://dothinking.github.io/blog/2013/07/30/%E5%BA%94%E5%8A%9B%E5%BC%A0%E9%87%8F%E7%9A%84%E8%AE%A4%E8%AF%86%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html">格致</a>
- 由原授权网址 <code>huangqy.pw</code> （已弃用）搬运至 <a
href="https://pencilq.com">pencilq.com</a> -
对文章内容有任何质疑或建议，请邮件联系 <a
href="mailto:train8808@gmail.com">train8808@gmail.com</a></p>
]]></content>
  </entry>
  <entry>
    <title>(转) 应力张量的认识之线性变换</title>
    <url>//39/</url>
    <content><![CDATA[<p>这一部分主要是对应力张量数学本质的理解。</p>
<h2 id="相似矩阵">相似矩阵</h2>
<p>通过基础知识我们已经认识到，应力张量代表点的应力状态，它不依赖于坐标系的选取，并且对应着同一主应力状态。用矩阵的观点理解为：</p>
<blockquote>
<p>同一点的应力张量矩阵是相似矩阵，并且可以对角化。</p>
</blockquote>
<p>然而问题是为什么会这样？</p>
<p>我们可以这么理解，同一点不同截面下的应力张量描述的都是相同的应力状态，因此他们存在内在联系（例如受约束于静力平衡方程）。由切应力互等定律可知应力张量矩阵是实对称矩阵，而实对称矩阵必定可以对角化，即不同截面应力张量对相似于一个主应力张量；而同一点的主应力状态是确定的。于是由相似矩阵的传递性可知，不同截面下的应力张量矩阵是相似的。</p>
<span id="more"></span>
<h2 id="线性变换">线性变换</h2>
<p>由应力张量是相似矩阵再进一步，因为
<strong>相似矩阵的本质是同一线性变换在不同基下表示的矩阵</strong>
，我们就可以从更根本的角度看待应力张量了：</p>
<blockquote>
<p>应力张量代表一个线性变换！</p>
</blockquote>
<p>这是一个抽象的认识，或者说是从相似矩阵推论出来的。那么接下来让他具体化：</p>
<p>从基础知识已经知道，利用三个相互垂直的截面截取一点 <span
class="math inline">\(P\)</span>，各个截面上的应力分量组成应力张量。以这三个截面的法线方向为正方向建立笛卡尔坐标系，如下图所示。</p>
<p><img
src="https://image.pencilq.com/images/2019/10/13/2013-07-30-05.png" /></p>
<p>对于任意法向 <span
class="math inline">\(\vec{n}=(n_1,\,n_2,\,n_3)\)</span>
的截面，可以得到截面上的应力分量</p>
<p><span class="math display">\[
p_i = \sigma_{ij}\,n_j
\]</span></p>
<p>改写为矩阵表达式</p>
<p><span class="math display">\[
A\,x = y
\]</span></p>
<p>其中，</p>
<p><span class="math display">\[
A =
\begin{pmatrix}
\sigma_{11} &amp; \tau_{12} &amp; \tau_{13} \\
\tau_{21} &amp; \sigma_{22} &amp; \sigma_{23} \\
\tau_{31} &amp; \tau_{32} &amp; \sigma_{33}
\end{pmatrix}\,,
x = n_j =
\begin{pmatrix} n_1 \\  n_2 \\  n_3
\end{pmatrix}\,,
y = p_i =
\begin{pmatrix}
p_1 \\  p_2 \\  p_3
\end{pmatrix}
\]</span></p>
<p>根据线性变换与矩阵的一一对应关系可知，应力张量代表一个线性变换（确切的说是线性映射）——
<strong>应力张量将截面位置映射到截面应力</strong> 。其数学表述为：</p>
<p><span class="math display">\[
\sigma\,\in \, Hom(U,\,V),\,\sigma:\,x \rightarrow y \quad
x=\left(n_1,\,n_2,\,n_3\right)^T \quad y=\left(p_1,\,p_2,\,p_3\right)^T
\]</span></p>
<p>其中， <span class="math inline">\(U\)</span>
是截面方向余弦组成的线性空间， <span class="math inline">\(V\)</span>
是截面应力作成的线性空间。</p>
<h2 id="举例说明">举例说明</h2>
<p>以下说明这个线性映射是如何与力学描述相一致的。</p>
<p>之前多次提及，用三个互相垂直的截面截取 <span
class="math inline">\(P\)</span>
点，并以其法向建立笛卡尔坐标系。这样的截面有无数多对，这样的坐标系也有无数多个。为了区分他们，先确定一个
<code>全局坐标系</code> <span class="math inline">\(S:Oxyz\)</span>
，那么其他任意的 <code>局部坐标系</code> <span
class="math inline">\(S′:O′x′y′z′\)</span>
就可以用它的坐标轴方向在全局坐标系下的方向余弦来描述了。</p>
<p>例如，局部系 <span class="math inline">\(x′\)</span>
轴在全局坐标系下的方向余弦为</p>
<p><span class="math display">\[
\alpha_x =
\left(\cos\langle{x&#39;,\,x}\rangle,\,\cos\langle{x&#39;,\,y}\rangle,\,\cos\langle{x&#39;,\,z}\rangle\right)
\]</span></p>
<p>进而，局部坐标系 <span class="math inline">\(S′\)</span>
可以描述为</p>
<p><span class="math display">\[
\alpha = \left(\alpha_x,\,\alpha_y,\,\alpha_z\right) =
\begin{pmatrix}
\cos\langle{x’,\,x}\rangle &amp; \cos\langle{y’,\,x}\rangle &amp;
\cos\langle{z’,\,x}\rangle \\
\cos\langle{x’,\,y}\rangle &amp; \cos\langle{y’,\,y}\rangle &amp;
\cos\langle{z’,\,y}\rangle \\  
\cos\langle{x’,\,z}\rangle &amp; \cos\langle{y’,\,z}\rangle &amp;
\cos\langle{z’,\,z}\rangle
\end{pmatrix}
\]</span></p>
<p>在局部坐标系内，截面 <span class="math inline">\(\vec{n}\)</span>
用方向余弦表示为</p>
<p><span class="math display">\[
\vec{n}=\left(n_1,\,n_2,\,n_3\right)^T =
\left(\cos\langle{\vec{n},\,x&#39;}\rangle,\,\cos\langle{\vec{n},\,y&#39;}\rangle,\,\cos\langle{\vec{n},\,z&#39;}\rangle\right)^T
\]</span></p>
<blockquote>
<p><span class="math inline">\(\alpha\)</span>
表示局部坐标系在全局坐标系空间下的基。 <span
class="math inline">\(\vec{n}\)</span>
表示任意截面在局部坐标系下的坐标。</p>
</blockquote>
<p>局部坐标系任意截面上的应力分布也是类似的情况，其坐标系方向一致，坐标的描述也类似，只是属于不同的空间而已。如此一来，力学描述和数学描述是相互统一的：</p>
<blockquote>
<p><strong>力学描述</strong> 用任意相互垂直的三个平面截取 <span
class="math inline">\(P\)</span>
点，以截面法向为正方向建立笛卡尔坐标系，得到三个截面上的应力状态即应力张量
<span class="math inline">\(\sigma\)</span>
。以此为基础，可以求得当前坐标系下任意截面<span
class="math inline">\(\vec{n}\)</span>上的应力分布<span
class="math inline">\(\vec{p}\)</span> 。</p>
</blockquote>
<blockquote>
<p><strong>数学描述</strong> 任意给定一组基<span
class="math inline">\(\alpha\)</span>后，可以用坐标 <span
class="math inline">\(\left(n_1,\,n_2,\,n_3\right)^T\)</span>
描述截面位置，用坐标 <span
class="math inline">\(\left(p_1,\,p_2,\,p_3\right)^T\)</span>
描述截面应力。在这组基下，存在一个线性变换 <span
class="math inline">\(\sigma\)</span> ，将截面位置<span
class="math inline">\(\vec{n}\)</span>映射到截面应力<span
class="math inline">\(\vec{p}\)</span>。</p>
</blockquote>
<h2 id="总结">总结</h2>
<p>这一部分从相似矩阵及线性变换的角度来认识应力张量，应力张量是从截面位置到截面应力的线性变换所对应的矩阵。</p>
<h2 id="相关文章">相关文章</h2>
<p><a href="https://pencilq.com/38">(转) 应力张量的认识之基本概念</a> <a
href="https://pencilq.com/40">(转)
应力张量的认识之线性变换的证明</a></p>
<hr />
<p>转载声明： - 本文转自：<a
href="https://dothinking.github.io/blog/2013/07/30/%E5%BA%94%E5%8A%9B%E5%BC%A0%E9%87%8F%E7%9A%84%E8%AE%A4%E8%AF%86%E4%B9%8B%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2.html">格致</a>
- 由原授权网址 <code>huangqy.pw</code> （已弃用）搬运至 <a
href="https://pencilq.com">pencilq.com</a> -
对文章内容有任何质疑或建议，请邮件联系 <a
href="mailto:train8808@gmail.com">train8808@gmail.com</a></p>
]]></content>
  </entry>
  <entry>
    <title>Mathematica-绘制瑞利波</title>
    <url>//4/</url>
    <content><![CDATA[<h2 id="数学模型">数学模型</h2>
<p>瑞利 (Lord Rayleigh) 研究了弹性力学线性化方程的如下形式解答： <span
class="math display">\[
\begin{equation}
\begin{split}
u &amp;= A e^{-by} exp[ik(x-ct)] \\
v &amp;= B e^{-by} exp[ik(x-ct)] \\
w &amp;= 0
\end{split}
\end{equation}
\]</span></p>
<span id="more"></span>
<p><span class="math inline">\(u, \; v, \; w\)</span>
表示地球内质点的位移
假设波产生于地球内部，地球表面自由：即作用于地表处的应力矢量为零。在考察运动方程和边界条件后，瑞利找到了常数
A, B, b 和 c，并得到以下解： <span class="math display">\[
\begin{split}
u &amp;= A (e^{-0.8475ky}-0.5773e^{-3933ky}) \cos k(x-c_Rt) \\
v &amp;= B (-0.8475e^{-0.8475ky}+1.46793e^{-3933ky}) \sin k(x-c_Rt) \\
w &amp;= 0
\end{split}
\]</span> 常数 <span class="math inline">\(c_R\)</span>
称为瑞利波速。</p>
<p>对应于数学模型的波形长什么样子？ <img
src="https://image.pencilq.com/images/2019/08/29/wave.png" /></p>
<p>初步观察：<span class="math inline">\(u, \; v\)</span> 分别为 <span
class="math inline">\(\cos,\; \sin\)</span>
，初步判断出质点的运动轨迹为一个椭圆： <span class="math display">\[
\frac{u^2}{a^2} + \frac{v^2}{b^2} = 1
\]</span></p>
<h2 id="mathematica-go">Mathematica go！</h2>
<h3 id="输入数学模型">输入数学模型</h3>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">c1</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">0.8475</span><span class="operator">;</span></span><br><span class="line"><span class="variable">c2</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">0.5773</span><span class="operator">;</span></span><br><span class="line"><span class="variable">c3</span> <span class="operator">=</span> <span class="operator">-</span><span class="number">0.3933</span><span class="operator">;</span></span><br><span class="line"><span class="variable">c4</span> <span class="operator">=</span> <span class="number">1.4679</span><span class="operator">;</span></span><br><span class="line"><span class="variable">u</span><span class="punctuation">[</span><span class="type">x_</span><span class="operator">,</span> <span class="type">y_</span><span class="operator">,</span> <span class="type">t_</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="punctuation">(</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c2</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="built_in">Cos</span><span class="punctuation">[</span><span class="variable">x</span> <span class="operator">-</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="variable">v</span><span class="punctuation">[</span><span class="type">x_</span><span class="operator">,</span> <span class="type">y_</span><span class="operator">,</span> <span class="type">t_</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="punctuation">(</span> <span class="variable">c1</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c4</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="built_in">Sin</span><span class="punctuation">[</span><span class="variable">x</span> <span class="operator">-</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">;</span></span><br></pre></td></tr></table></figure>
<p>为便于做定性演示，<span class="math inline">\(k,\; c_R\)</span>
的值取为1。</p>
<h3 id="坐标原点的运动">坐标原点的运动</h3>
<p>循序渐进，先来看看一个点的运动（当然预期的是一个椭圆）</p>
<p>简单地画个图</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ParametricPlot</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span> <span class="operator">/.</span> <span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">-&gt;</span> <span class="number">0</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">-&gt;</span> <span class="number">0</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">t</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">2</span> <span class="built_in">Pi</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/08/29/path-of-one-point.png" /></p>
<div class="note warning">
<p>
这是初始时刻位于原点的质点的运动轨迹；图中 y 轴与题中 y
轴方向相反，最后再进行处理
</p>
</div>
<p>加个函数动起来</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Manipulate</span><span class="punctuation">[</span><span class="built_in">ParametricPlot</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span> <span class="operator">/.</span> <span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">-&gt;</span> <span class="number">0</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">-&gt;</span> <span class="number">0</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">t</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="variable">a</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> <span class="number">0.001</span><span class="operator">,</span> <span class="number">2</span> <span class="built_in">Pi</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/08/29/animate-point.gif" /></p>
<h3 id="所有质点的运动轨迹">所有质点的运动轨迹</h3>
<p>使用 <code>Table</code> 函数列出要观察的质点，(t = 0 时刻)</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ListPlot</span><span class="operator">@</span><span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">+</span> <span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">+</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">0.5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">0.5</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/08/29/path-of-one-point.png" /></p>
<p>观察所有质点随时间的运动，把 <code>u[x, y, 0]</code> 和
<code>v[x, y, 0]</code> 中的参数改为 <code>[x, y, t]</code>，动起来</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Manipulate</span><span class="punctuation">[</span></span><br><span class="line"> <span class="built_in">ListPlot</span><span class="punctuation">[</span><span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">+</span> <span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">+</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">0.5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span></span><br><span class="line">      <span class="number">0</span><span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">0.5</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">/.</span> <span class="punctuation">&#123;</span><span class="variable">t</span> <span class="operator">-&gt;</span> <span class="variable">a</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">5</span><span class="operator">,</span> <span class="number">5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">6</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> </span><br><span class="line">  <span class="built_in">Pi</span><span class="operator">/</span><span class="number">20</span><span class="operator">,</span> <span class="number">2</span> <span class="built_in">Pi</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/08/29/animate-all-point.gif" /></p>
<p>在图中，接近地表的质点<code>顺时针</code>运动，远离地表的质点<code>逆时针运动</code></p>
<p>更进一步地，在动画中显示完整的轨迹 <figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">fig1</span> <span class="operator">=</span> <span class="built_in">Table</span><span class="punctuation">[</span></span><br><span class="line">   <span class="built_in">ParametricPlot</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">+</span> <span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">+</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">t</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">2</span> <span class="built_in">Pi</span><span class="punctuation">&#125;</span><span class="operator">,</span> </span><br><span class="line">    <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">5</span><span class="operator">,</span> <span class="number">5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">6</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">Axes</span> <span class="operator">-&gt;</span> <span class="built_in">False</span><span class="operator">,</span> </span><br><span class="line">    <span class="built_in">PlotStyle</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="built_in">Black</span><span class="operator">,</span> <span class="built_in">Thin</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">//</span> <span class="built_in">Show</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">Manipulate</span><span class="punctuation">[</span></span><br><span class="line"> <span class="variable">fig2</span> <span class="operator">=</span> <span class="built_in">ListPlot</span><span class="punctuation">[</span></span><br><span class="line">   <span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">+</span> <span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">+</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> </span><br><span class="line">      <span class="number">0.2</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">/.</span> <span class="punctuation">&#123;</span><span class="variable">t</span> <span class="operator">-&gt;</span> <span class="variable">a</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">5</span><span class="operator">,</span> <span class="number">5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">6</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">,</span> </span><br><span class="line">   <span class="built_in">Axes</span> <span class="operator">-&gt;</span> <span class="built_in">False</span><span class="operator">,</span> <span class="built_in">PlotStyle</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="built_in">Red</span><span class="operator">,</span> <span class="built_in">Thin</span><span class="operator">,</span> <span class="built_in">Dashed</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">Joined</span> <span class="operator">-&gt;</span> <span class="built_in">True</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"> <span class="variable">fig3</span> <span class="operator">=</span> <span class="built_in">ListPlot</span><span class="punctuation">[</span></span><br><span class="line">   <span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">x</span> <span class="operator">+</span> <span class="variable">u</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="operator">,</span> <span class="variable">y</span> <span class="operator">+</span> <span class="variable">v</span><span class="punctuation">[</span><span class="variable">x</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="variable">t</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="operator">-</span><span class="number">4</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> </span><br><span class="line">      <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">/.</span> <span class="punctuation">&#123;</span><span class="variable">t</span> <span class="operator">-&gt;</span> <span class="variable">a</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">5</span><span class="operator">,</span> <span class="number">5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">1</span><span class="operator">,</span> <span class="number">6</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">Axes</span> <span class="operator">-&gt;</span> <span class="built_in">False</span><span class="operator">,</span></span><br><span class="line">    <span class="built_in">PlotStyle</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="built_in">Red</span><span class="operator">,</span> <span class="built_in">Thin</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">;</span> </span><br><span class="line"> <span class="built_in">Show</span><span class="punctuation">[</span><span class="variable">fig1</span><span class="operator">,</span> <span class="variable">fig2</span><span class="operator">,</span> <span class="variable">fig3</span><span class="punctuation">]</span> <span class="operator">//</span> <span class="built_in">Rotate</span><span class="punctuation">[</span><span class="type">#</span><span class="operator">,</span> <span class="number">180</span> <span class="built_in">Degree</span><span class="punctuation">]</span> <span class="operator">&amp;,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> <span class="built_in">Pi</span><span class="operator">/</span><span class="number">10.</span><span class="operator">,</span> <span class="number">2</span> <span class="built_in">Pi</span><span class="operator">,</span> </span><br><span class="line">  <span class="built_in">Pi</span><span class="operator">/</span><span class="number">20</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure> <img
src="https://image.pencilq.com/images/2019/08/29/all_point_animate.gif" /></p>
<h3 id="运动轨迹分析">运动轨迹分析</h3>
<p>从哪一个深度开始，质点椭圆运动方向开始发生变化呢？观察模型，可以发现，在初始时刻，<span
class="math inline">\(\cos,
\sin\)</span>的系数同号；当两个系数异号，质点椭圆运动方向相反。
绘图估计一下临界点在哪个位置，进行求解</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Plot</span><span class="punctuation">[</span><span class="punctuation">(</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c2</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">(</span> <span class="variable">c1</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c4</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">y</span><span class="operator">,</span> </span><br><span class="line">  <span class="number">0</span><span class="operator">,</span> <span class="number">2</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="built_in">Solve</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="punctuation">(</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c2</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">(</span> <span class="variable">c1</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c1</span> <span class="variable">y</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="variable">c4</span> <span class="built_in">Exp</span><span class="punctuation">[</span><span class="variable">c3</span> <span class="variable">y</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="operator">==</span> </span><br><span class="line">   <span class="number">0</span><span class="operator">,</span> <span class="number">0</span> <span class="operator">&lt;</span> <span class="variable">y</span> <span class="operator">&lt;</span> <span class="number">2</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="variable">y</span><span class="operator">,</span> <span class="built_in">Reals</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p><img
src="https://image.pencilq.com/images/2019/08/29/solve.png" /></p>
]]></content>
      <tags>
        <tag>Mathematica</tag>
      </tags>
  </entry>
  <entry>
    <title>(转) 应力张量的认识之线性变换的证明</title>
    <url>//40/</url>
    <content><![CDATA[<p>前面两部分分别介绍了应力张量的基础和对其本质的思考，最终得出了应力张量的本质是一个线性变换的结论。这一部分是对上述结论的验证计算和关于严谨性方面的补充证明。</p>
<p>为了加深对应力张量是线性变换的矩阵的理解，进行如下计算：
<strong>从线性变换的角度求出变换矩阵（即应力张量），并验证其相似性</strong>
。</p>
<span id="more"></span>
<p>为了计算方便又不失一般性，取如下图所示的计算条件：</p>
<p><img
src="https://image.pencilq.com/images/2019/10/13/20191013213440.png" /></p>
<p><span class="math inline">\(S_1\)</span> 、 <span
class="math inline">\(S_2\)</span> 分别为全局绝对坐标系 <span
class="math inline">\(S\)</span> 下的两个局部坐标系（他们由截取P
点的两两相互垂直的平面的法向决定）， <span
class="math inline">\(S_1\)</span> 和全局坐标系重合， <span
class="math inline">\(S_2\)</span> 为全局坐标系绕z 轴逆时针旋转 90°
得到。 <span class="math inline">\(P\)</span> 点应力状态在 <span
class="math inline">\(S_1\)</span> 、 <span
class="math inline">\(S_2\)</span>
系下，分别用一个应力张量表示，并且是相似的。接下来就从线性变换角度进行计算说明。</p>
<h2 id="局部坐标系的基及过渡矩阵">局部坐标系的基及过渡矩阵</h2>
<p>根据局部坐标轴在全局坐标系下的方向余弦容易得到他们的基分别为：</p>
<p><span class="math display">\[
\alpha = \left(\alpha_1,\,\alpha_2,\,\alpha_3\right) = \begin{pmatrix} 1
&amp; 0 &amp; 0 \\  0 &amp; 1 &amp; 0 \\  0 &amp; 0 &amp; 1
\end{pmatrix} \\  \beta = \left(\beta_1,\,\beta_2,\,\beta_3\right) =
\begin{pmatrix} 0 &amp; -1 &amp; 0 \\  1 &amp; 0 &amp; 0 \\  0 &amp; 0
&amp; 1 \end{pmatrix}
\]</span></p>
<p><span class="math inline">\(\alpha\)</span>基到 <span
class="math inline">\(\beta\)</span> 基的过渡矩阵 <span
class="math inline">\(W\)</span> 满足</p>
<p><span class="math display">\[
\beta = \alpha\,W
\]</span></p>
<p>同理 <span class="math inline">\(\beta\)</span> 基到<span
class="math inline">\(\alpha\)</span>基的过渡矩阵 <span
class="math inline">\(W^{-1}\)</span> 满足</p>
<p><span class="math display">\[
\alpha = \beta\,W^{-1}
\]</span></p>
<p>解得：</p>
<p><span class="math display">\[
W = \alpha^{-1}\,\beta = \begin{pmatrix} 0 &amp; -1 &amp; 0 \\  1 &amp;
0 &amp; 0 \\  0 &amp; 0 &amp; 1 \end{pmatrix} \\  W^{-1} =
\beta^{-1}\,\alpha = \begin{pmatrix} 0 &amp; 1 &amp; 0 \\  -1 &amp; 0
&amp; 0 \\  0 &amp; 0 &amp; 1 \end{pmatrix}
\]</span></p>
<h3 id="线性变换在基下的矩阵">线性变换在基下的矩阵</h3>
<p>设全局坐标系描述下，应力张量表示为</p>
<p><span class="math display">\[
\sigma = \begin{pmatrix} \sigma_{11} &amp; \sigma_{12} &amp; \sigma_{13}
\\  \sigma_{21} &amp; \sigma_{22} &amp; \sigma_{23} \\  \sigma_{31}
&amp; \sigma_{32} &amp; \sigma_{33} \end{pmatrix}
\]</span></p>
<p>设 <span class="math inline">\(T\)</span>
表示应力张量对应的线性变换， <span
class="math inline">\(T(\alpha_1)\)</span> 表示 <span
class="math inline">\(\alpha_1\)</span> 截面上的应力，显然</p>
<p><span class="math display">\[
T(\alpha_1) = \left(\sigma_{11},\,\sigma_{12},\,\sigma_{13}\right)^T
\]</span></p>
<p><span class="math inline">\(T(\beta_1)\)</span> 表示 <span
class="math inline">\(S_2\)</span> 坐标系下 <span
class="math inline">\(\beta_1\)</span>
截面上的应力，对应的是全局坐标系下 <span
class="math inline">\(y\)</span> 截面的应力</p>
<p><span class="math display">\[
T(\beta_1) = \left(\sigma_{21},\,\sigma_{22},\,\sigma_{23}\right)^T
\]</span></p>
<p>类似处理其他截面的应力，进而得到</p>
<p><span class="math display">\[
T(\alpha) = T\left(\alpha_1,\,\alpha_2,\,\alpha_3\right) =
\begin{pmatrix} \sigma_{11} &amp; \sigma_{21} &amp; \sigma_{31}
\\  \sigma_{12} &amp; \sigma_{22} &amp; \sigma_{32} \\  \sigma_{13}
&amp; \sigma_{23} &amp; \sigma_{33} \end{pmatrix} \\  T(\beta) =
T\left(\beta_1,\,\beta_2,\,\beta_3\right) = \begin{pmatrix} \sigma_{21}
&amp; -\sigma_{11} &amp; \sigma_{31} \\  \sigma_{22} &amp; -\sigma_{12}
&amp; \sigma_{32} \\  \sigma_{23} &amp; -\sigma_{13} &amp; \sigma_{33}
\end{pmatrix}
\]</span></p>
<p>根据 <span class="math inline">\(T(\alpha) = \alpha\,A\)</span> ，
<span class="math inline">\(T(\beta) = \beta\,B\)</span>
，得到线性变换在基 $, $ 下的矩阵分别为</p>
<p><span class="math display">\[
A = \alpha^{-1}\,T(\alpha) = \begin{pmatrix} \sigma_{11} &amp;
\sigma_{21} &amp; \sigma_{31} \\  \sigma_{12} &amp; \sigma_{22} &amp;
\sigma_{32} \\  \sigma_{13} &amp; \sigma_{23} &amp; \sigma_{33}
\end{pmatrix} \\  B = \beta^{-1}\,T(\beta) = \begin{pmatrix} \sigma_{22}
&amp; -\sigma_{12} &amp; \sigma_{32} \\  -\sigma_{21} &amp; \sigma_{11}
&amp; -\sigma_{31} \\  \sigma_{23} &amp; -\sigma_{13} &amp; \sigma_{33}
\end{pmatrix}
\]</span></p>
<p>也就是 <span class="math inline">\(P\)</span> 点在 <span
class="math inline">\(S_1\)</span> 、 <span
class="math inline">\(S_2\)</span>
坐标系下的应力张量。由于表示上的缘故，这里为转置关系。</p>
<h3 id="相似关系">相似关系</h3>
<p>验证可知 <span class="math inline">\(W^{-1}\,A\,W=B\)</span>，即
<span class="math inline">\(A \sim B\)</span></p>
<p><span class="math display">\[
\begin{align*} W^{-1}\,A\,W &amp;= \begin{pmatrix} 0 &amp; 1 &amp; 0
\\  -1 &amp; 0 &amp; 0 \\  0 &amp; 0 &amp; 1 \end{pmatrix}\,
\begin{pmatrix} \sigma_{11} &amp; \sigma_{21} &amp; \sigma_{31}
\\  \sigma_{12} &amp; \sigma_{22} &amp; \sigma_{32} \\  \sigma_{13}
&amp; \sigma_{23} &amp; \sigma_{33} \end{pmatrix}\, \begin{pmatrix} 0
&amp; -1 &amp; 0 \\  1 &amp; 0 &amp; 0 \\  0 &amp; 0 &amp; 1
\end{pmatrix}\\  &amp;=\begin{pmatrix} \sigma_{22} &amp; -\sigma_{12}
&amp; \sigma_{32} \\  -\sigma_{21} &amp; \sigma_{11} &amp; -\sigma_{31}
\\  \sigma_{23} &amp; -\sigma_{13} &amp; \sigma_{33}
\end{pmatrix}\\  &amp;= B \end{align*}
\]</span></p>
<p>至此，可以清晰看出不同坐标系下应力张量与不同基下线性变换矩阵的等价关系。</p>
<h2 id="线性空间的证明">线性空间的证明</h2>
<p>上述关于线性变换的理解都是基于 <span
class="math inline">\(\sigma_{ij}\,n_j=p_i\)</span>
的形式而推出的，显得还不够严谨。比如，没有证明截面位置、截面应力可以做成一个线性空间，也没有证明从截面位置到截面应力的变换是线性变换。</p>
<p>本着彻底打通这条思路的心思，下面开始这两个问题的分析。</p>
<h3 id="线性空间的定义">线性空间的定义</h3>
<p>设 <span class="math inline">\(V\)</span> 是一个非空集合， <span
class="math inline">\(R\)</span> 为实数域。如果对于 <span
class="math inline">\(V\)</span> 中任意两个元素 <span
class="math inline">\(\alpha,\,\beta, V\)</span> ，中总有唯一的一个元素
<span class="math inline">\(\gamma\)</span> 与之对应，称为 <span
class="math inline">\(\alpha\)</span> 与 <span
class="math inline">\(\beta\)</span> 的和，记作 <span
class="math inline">\(\gamma = \alpha+\beta\)</span> ；又对于 <span
class="math inline">\(R\)</span> 中任一数 <span
class="math inline">\(\lambda\)</span> 与 <span
class="math inline">\(V\)</span> 中任一元素<span
class="math inline">\(\alpha\)</span> ， <span
class="math inline">\(V\)</span> 中总有唯一的一个元素 <span
class="math inline">\(\delta\)</span> 与之对应，称为 <span
class="math inline">\(\lambda\)</span> 与 <span
class="math inline">\(\alpha\)</span> 的积，记作 <span
class="math inline">\(\delta = \lambda\,\alpha\)</span> 。</p>
<p>并且这两种运算满足以下八条运算规律（其中 <span
class="math inline">\(\alpha,\,\beta,\,\gamma \in V\)</span> ， <span
class="math inline">\(\lambda,\,\mu \in R\)</span> ）：</p>
<ul>
<li><span class="math inline">\(\alpha+\beta=\beta+\alpha\)</span></li>
<li><span
class="math inline">\((\alpha+\beta)+\gamma=\alpha+(\beta+\gamma)\)</span></li>
<li>在 <span class="math inline">\(V\)</span> 中存在零元素0，对任何<span
class="math inline">\(\alpha\)</span> 都满足 <span
class="math inline">\(\alpha+0=\alpha\)</span></li>
<li>对任何<span class="math inline">\(\alpha\)</span>，都有<span
class="math inline">\(\alpha\)</span> 的负元素 <span
class="math inline">\(\beta\)</span> 满足 <span
class="math inline">\(\alpha+\beta=0\)</span></li>
<li><span class="math inline">\(1 \cdot \alpha=\alpha\)</span></li>
<li><span class="math inline">\(\lambda(\mu \alpha)=(\lambda \mu)
\alpha\)</span></li>
<li><span class="math inline">\((\lambda+\mu) \alpha=\lambda \alpha+\mu
\alpha\)</span></li>
<li><span class="math inline">\(\lambda(\alpha+\beta)=\lambda
\alpha+\lambda \beta\)</span></li>
</ul>
<p>那么， <span class="math inline">\(V\)</span> 就称为实数域 <span
class="math inline">\(R\)</span> 上的线性空间（或向量空间）。</p>
<h3 id="线性空间的证明-1">线性空间的证明</h3>
<p>截面应力空间显然是一个线性空间，因为它是一个一般的三维向量空间。对于截面位置空间，需要证明其对于某种定义的加法和乘法运算封闭，且满足上述运算律。</p>
<p>截面位置空间是由方向余弦描述的，</p>
<p><span class="math display">\[
\begin{align*} \alpha &amp;= \left(n_1,\,n_2,\,n_3\right) =
\left(\cos\langle{\vec{n},\,x}\rangle,\,\cos\langle{\vec{n},\,y}\rangle,\,\cos\langle{\vec{n},\,z}\rangle\right)
\\  \beta &amp;= \left(m_1,\,m_2,\,m_3\right) =
\left(\cos\langle{\vec{m},\,x}\rangle,\,\cos\langle{\vec{m},\,y}\rangle,\,\cos\langle{\vec{m},\,z}\rangle\right)
\end{align*}
\]</span></p>
<p>其中， <span
class="math inline">\(\langle{\vec{n},\,x}\rangle\)</span>
表示截面法线与 <span class="math inline">\(x\)</span>
轴的夹角，其余以此类推。</p>
<p><span class="math inline">\(n_{1}, n_{2}, n_{3}\)</span>
取值范围为<span class="math inline">\([-1,1]\)</span>，且满足<span
class="math inline">\(n_{1}^{2}+n_{2}^{2}+n_{3}^{2}=1\)</span>。显然常规的加法和数乘运算不满足封闭条件。</p>
<p>考虑到截面空间的描述特征，采用
<strong>球坐标系下角度的代数加法和数乘运算</strong> 来定义。</p>
<p><img
src="https://image.pencilq.com/images/2019/10/13/20191013215502.png" /></p>
<p>球坐标系下，</p>
<p><span class="math display">\[
\begin{align*} \alpha &amp;= \left(n_1,\,n_2,\,n_3\right) =
\left(\sin\varphi_1\,\cos\theta_1,\,\sin\varphi_1\,\sin\theta_1,\,\cos\varphi_1\right)
\\  \beta &amp;= \left(m_1,\,m_2,\,m_3\right) =
\left(\sin\varphi_2\,\cos\theta_2,\,\sin\varphi_2\,\sin\theta_2,\,\cos\varphi_2\right)
\end{align*}
\]</span></p>
<p>定义加法和数乘运算</p>
<p><span class="math display">\[
\begin{align*} \alpha + \beta &amp;\triangleq
\Biggl(\sin(\varphi_1+\varphi_2)\,\cos(\theta_1+\theta_2),\,\sin(\varphi_1+\varphi_2)\,\sin(\theta_1+\theta_2),\,\cos(\varphi_1-\varphi_2)\Biggr)
\\  \lambda\,\alpha &amp;\triangleq
\Biggl(\sin(\lambda\,\varphi_1)\,\cos(\lambda\,\theta_1),\,\sin(\lambda\,\varphi_1)\,\sin(\lambda\,\theta_1),\,\cos(\lambda\,\varphi_1)\Biggr)
\end{align*}
\]</span></p>
<p>在这种加法和数乘运算的定义下，显然对元素是封闭的，并且简单验证就可知同时满足加法的两个运算律、数乘的三个运算律。</p>
<blockquote>
<p>零元素：取<span class="math inline">\(\varphi=\theta=0\)</span>
可得零元素 <span class="math inline">\((0,0,1)\)</span> 负元素：取<span
class="math inline">\(\beta=\left(-\sin \varphi_{1} \cos
\theta_{1},-\sin \varphi_{1} \sin \theta_{1}, \cos
\varphi_{1}\right)\)</span>，可得<span
class="math inline">\(\alpha+\beta=(0,0,1)\)</span> 为零元素 单位
1：显然 1 即为单位元素</p>
</blockquote>
<p>综上可知，截面位置对于如上定义的运算可以作为一个线性空间。</p>
<h2 id="线性变换的证明">线性变换的证明</h2>
<p>线性变换的证明只需证明变换满足线性运算，对于此变换<span
class="math inline">\(T(n)=\sigma n\)</span>满足</p>
<p><span class="math display">\[
\begin{align*} T(\alpha + \beta) &amp;= \sigma\,(\alpha+\beta) =
\sigma\,\alpha+\sigma\,\beta = T(\alpha)+T(\beta) \\  T(\lambda\,\alpha)
&amp;= \sigma(\lambda\,\alpha) = \lambda\,(\sigma\,\alpha) =
\lambda\,T(\alpha) \end{align*}
\]</span></p>
<h2 id="总结">总结</h2>
<p>本文是对关于应力张量与线性变换之间等价关系的验证和证明，主要是线性空间与线性变换的内容，由此也可体会相关知识的贯通性。主要知识点：</p>
<ul>
<li>线性变换对应矩阵的求法。</li>
<li>线性空间的证明方法：对定义的加法和数乘运算封闭且满足八条运算规则。</li>
</ul>
<h2 id="相关文章">相关文章</h2>
<p><a href="https://pencilq.com/38">(转) 应力张量的认识之基本概念</a> <a
href="https://pencilq.com/39">(转) 应力张量的认识之线性变换</a></p>
<hr />
<p>转载声明： - 本文转自：<a
href="https://dothinking.github.io/blog/2013/07/31/%E5%BA%94%E5%8A%9B%E5%BC%A0%E9%87%8F%E7%9A%84%E8%AE%A4%E8%AF%86%E4%B9%8B%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2%E7%9A%84%E8%AF%81%E6%98%8E.html">格致</a>
- 由原授权网址 <code>huangqy.pw</code> （已弃用）搬运至 <a
href="https://pencilq.com">pencilq.com</a> -
对文章内容有任何质疑或建议，请邮件联系 <a
href="mailto:train8808@gmail.com">train8808@gmail.com</a></p>
]]></content>
  </entry>
  <entry>
    <title>拉普拉斯算子的极坐标表示</title>
    <url>//44/</url>
    <content><![CDATA[<p><strong>二维极坐标：</strong> <span class="math display">\[
\begin{equation}
\Delta f = \left(\frac{\partial^{2}}{\partial
x^{2}}+\frac{\partial^{2}}{\partial y^{2}}\right) f
=\left(\frac{\partial^{2}}{\partial r^{2}}+\frac{1}{r}
\frac{\partial}{\partial r}+\frac{1}{r^{2}} \frac{\partial^{2}}{\partial
\theta^{2}}\right) f
\end{equation}
\]</span></p>
<p><strong>球坐标</strong> <span class="math display">\[
\begin{equation}
\begin{aligned}
\Delta u &amp;=\frac{\partial^{2} u}{\partial x^{2}}+\frac{\partial^{2}
u}{\partial y^{2}}+\frac{\partial^{2} u}{\partial z^{2}} \\
&amp;=\frac{1}{r} \frac{\partial^{2}(r u)}{\partial
r^{2}}+\frac{1}{r^{2} \sin \theta} \frac{\partial}{\partial
\theta}\left(\sin \theta \frac{\partial u}{\partial
\theta}\right)+\frac{1}{r^{2} \sin ^{2} \theta} \frac{\partial^{2}
u}{\partial \phi^{2}}
\end{aligned}
\end{equation}
\]</span></p>
<span id="more"></span>
<h2 id="二维极坐标表示">二维极坐标表示</h2>
<p><img
src="https://image.pencilq.com/images/2019/10/25/2d-laplace.jpg" /></p>
<h2 id="球坐标表示">球坐标表示</h2>
<p><img
src="https://image.pencilq.com/images/2019/10/25/laplace_3d_compress.png" /></p>
]]></content>
  </entry>
  <entry>
    <title>Triaxiality function 的推导</title>
    <url>//45/</url>
    <content><![CDATA[<div class="note success"><p>Triaxiality function <span class="math inline">\(R_v\)</span>
常被用于描述构件在多轴状态下的情形。在各向同性情况下，其表达式为：</p>
<p><span class="math display">\[
R_v = \dfrac{2(1+\nu)}{3} + 3(1-2\nu)
\left(\dfrac{\sigma_m}{\sigma_{eq}} \right)^2
\]</span></p>
<p>以下为该表达式的简单推导。</p>
</div>
<span id="more"></span>
<p>各向同性损伤应变能释放率</p>
<p><span class="math display">\[
Y=\frac{1}{2}\varepsilon^e:\frac{\partial E_D}{\partial D}:\varepsilon^e
\]</span></p>
<p>由 <span class="math inline">\(E_D = (1-D)E \Rightarrow
\dfrac{\partial E_D}{\partial D}=-E ,\quad \sigma=
(1-D)E:\varepsilon\)</span>,</p>
<p><span class="math display">\[
-Y=\frac{1}{1-D}\frac{1}{2}\varepsilon^e:\sigma
\]</span></p>
<p>由 <span class="math inline">\(\varepsilon^e_{ij} =
e^e_{ij}+\varepsilon^e_m \delta_{ij} ,\quad \sigma = s_{ij}+\sigma_m
\delta_{ij}\)</span>，将应力和应变进行分解</p>
<p><span class="math display">\[
-Y = \frac{1}{(1-D)} \left( e^e_{ij} +\varepsilon^e_{m}\delta_{ij}
\right) \left( s_{ij} +\sigma_m\delta_{ij} \right)
\]</span></p>
<p>由偏应力偏应变的关系 <span class="math inline">\(s_{ij} =2 \mu
e^e_{ij} \Rightarrow e^e_{ij} =
\dfrac{1+\nu}{E_D}s_{ij}\)</span>、球应力和球应变关系 <span
class="math inline">\(\sigma_{kk} = 3K\varepsilon^e_m \Rightarrow
\varepsilon^e_m = \dfrac{1-2\nu}{E_D} \sigma_m\)</span></p>
<p><span class="math display">\[
\begin{aligned}
-Y &amp;= \frac{1}{2 (1-D)^2}\left( \frac{1+\nu}{E}s_{ij} +
\frac{1-2\nu}{E}\sigma_m\delta_{ij} \right) \left( s_{ij}
+\sigma_m\delta_{ij} \right) \\
&amp;= \frac{1}{2 (1-D)^2} \left(  \frac{1+\nu}{E}s_{ij} s_{ij} +
\frac{1+\nu}{E}  \sigma_ms_{ij} \delta_{ij} + \frac{1-2\nu}{E}\sigma_m
s_{ij} \delta_{ij} + \frac{1-2\nu}{E}\sigma^2_m\delta_{ij}\delta_{ij}
\right) \\
&amp;= \frac{1}{2 (1-D)^2} \left( \frac{1+\nu}{E}s_{ij} s_{ij} +
\frac{3(1-2\nu)}{E}\sigma^2_m \right)
\end{aligned}
\]</span></p>
<p>由等效应力 <span class="math inline">\(\sigma_{eq} =
\sqrt{\dfrac{3}{2} s_{ij} s_{ij}} \Rightarrow s_{ij}s_{ij} =
\dfrac{2}{3} \sigma^2_{eq}\)</span></p>
<p><span class="math display">\[
\begin{aligned}
-Y &amp;= \frac{\sigma_{eq}^2}{2E(1-D)^2} \left[ \frac{2(1+\nu)}{3} +
3(1-2\nu) \left(\frac{\sigma_m}{\sigma_{eq}} \right)^2 \right] \\
&amp;= \frac{\sigma_{eq}^2}{2E(1-D)^2} R_v
\end{aligned}
\]</span></p>
<p>其中<span class="math inline">\(R_v = \dfrac{2(1+\nu)}{3} + 3(1-2\nu)
\left(\dfrac{\sigma_m}{\sigma_{eq}} \right)^2\)</span> 则为 Triaxiality
function。</p>
<hr />
<p>参考文献：</p>
<p>Zhang W, Cai Y. Continuum damage mechanics and numerical
applications[M]. Springer Science &amp; Business Media, 2010. (Sec
3.6）</p>
]]></content>
  </entry>
  <entry>
    <title>学术导航网站</title>
    <url>//46/</url>
    <content><![CDATA[<ul>
<li><a class="btn" href="http://www.20009.net/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>格桑花学朮导航</a>
<a class="btn" href="https://www.waysto.work/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>沃克学术导航</a></li>
<li><a class="btn" href="http://www.6453.net/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>龙猫学术导航</a>
<a class="btn" href="http://www.9312.net/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>科研干货导航</a></li>
<li><a class="btn" href="http://www.4243.net/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>大木虫学术导航</a>
<a class="btn" href="https://site.sciping.com/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>科塔学术导航</a></li>
<li><a class="btn" href="https://search.chongbuluo.com/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>虫部落·快搜</a>
<a class="btn" href="https://gfsoso.99lb.net/ "><i class="fa fa-quote-left fa-lg fa-fw"></i>谷粉学术</a></li>
</ul>
<!-- - [格桑花学朮导航 <i class="fa fa-quote-left fa-fw"></i>](http://www.20009.net/)

- [沃克学术导航 <i class="fa fa-link fa-fw"></i>](https://www.waysto.work/)

- [龙猫学术导航 <i class="fa fa-link fa-fw"></i>](http://www.6453.net/)

- [科研干货导航 <i class="fa fa-link fa-fw"></i>](http://www.9312.net/)

- [大木虫学术导航 <i class="fa fa-link fa-fw"></i>](http://www.4243.net/)

- [科塔学术导航 <i class="fa fa-link fa-fw"></i>](https://site.sciping.com/)

- [虫部落·快搜 <i class="fa fa-link fa-fw"></i> ](https://search.chongbuluo.com/) -->
<span id="more"></span>
<blockquote>
<p>太多了，够用就得了 😂😂</p>
</blockquote>
<p><img
src="https://image.pencilq.com/images/2019/11/12/xueshudaohang.jpg" /></p>
]]></content>
  </entry>
  <entry>
    <title>弹性力学的15个基本方程</title>
    <url>//47/</url>
    <content><![CDATA[<p>在三维情况下，控制线弹性边值问题的基本方程有15个</p>
<ol type="1">
<li><p>平衡微分方程 <span class="math inline">\(\sigma_{i j, i}+F_{b
j}=0\)</span> 共3个： <span class="math display">\[
\begin{array}{l}{\frac{\partial \sigma_{x}}{\partial x}+\frac{\partial
\tau_{y x}}{\partial y}+\frac{\partial \tau_{z x}}{\partial z}+F_{b
x}=0} \\ {\frac{\partial \tau_{x y}}{\partial x}+\frac{\partial
\sigma_{y}}{\partial y}+\frac{\partial \tau_{z y}}{\partial z}+F_{b
y}=0} \\ {\frac{\partial \tau_{z}}{\partial x}+\frac{\partial \tau_{y
z}}{\partial y}+\frac{\partial \sigma_{z}}{\partial z}+F_{b
z}=0}\end{array}
\]</span> <span id="more"></span></p></li>
<li><p>几何方程 <span class="math inline">\(\varepsilon_{i
j}=\frac{1}{2}\left(u_{i},_{j}+u_{j},_{i}\right)\)</span> 共6个： <span
class="math display">\[
\varepsilon_{x}=\frac{\partial u}{\partial x}, \quad
\varepsilon_{y}=\frac{\partial v}{\partial y}, \quad
\varepsilon_{z}=\frac{\partial w}{\partial z}
\]</span></p>
<p><span class="math display">\[
\gamma_{x y}=\frac{\partial v}{\partial x}+\frac{\partial u}{\partial
y}, \quad \gamma_{y z}=\frac{\partial w}{\partial y}+\frac{\partial
v}{\partial z}, \quad \gamma_{z x}=\frac{\partial u}{\partial
z}+\frac{\partial w}{\partial x}
\]</span></p></li>
<li><p>本构方程 <span class="math inline">\(\varepsilon_{i j}=\frac{1}{2
G} \sigma_{i j}-\delta_{i j} \frac{v}{E} \Theta\)</span> 共6个： <span
class="math display">\[
\begin{aligned} \varepsilon_{x}
&amp;=\frac{1}{E}\left[\sigma_{x}-v\left(\sigma_{y}+\sigma_{z}\right)\right]=\frac{1}{E}\left[(1+v)
\sigma_{x}-v \Theta\right] \\ \varepsilon_{y}
&amp;=\frac{1}{E}\left[\sigma_{y}-v\left(\sigma_{x}+\sigma_{z}\right)\right]=\frac{1}{E}\left[(1+v)
\sigma_{y}-v \Theta\right] \\ \varepsilon_{z}
&amp;=\frac{1}{E}\left[\sigma_{z}-v\left(\sigma_{x}+\sigma_{y}\right)\right]=\frac{1}{E}\left[(1+v)
\sigma_{z}-v \Theta\right] \end{aligned}
\]</span></p>
<p><span class="math display">\[
\begin{aligned} \gamma_{x y} &amp;=\frac{\tau_{x y}}{G} \\ \gamma_{y z}
&amp;=\frac{\tau_{y z}}{G} \\ \gamma_{x z} &amp;=\frac{\tau_{x z}}{G}
\end{aligned}
\]</span></p></li>
</ol>
<p>其中，拉梅系数 <span class="math inline">\(\lambda=\frac{\mu
E}{(1+\mu)(1-2 \mu)}\)</span>，剪切模量 <span
class="math inline">\(G=\frac{E}{2(1+\mu)}\)</span>，体积应变 <span
class="math inline">\(\theta=\varepsilon_{x}+\varepsilon_{y}+\varepsilon_{z}\)</span>，体积应力
<span
class="math inline">\(\theta=\varepsilon_{x}+\varepsilon_{y}+\varepsilon_{z}\)</span>，</p>
<p>弹性力学的任务就是在给定的边界条件下，就十五个未知量求解十五个基本方程。求解弹性力学问题时，并不需要同时求解十五个基本未知量，可以做必要的简化。为简化求解的难度，仅选取部分未知量作为基本未知量。</p>
]]></content>
  </entry>
  <entry>
    <title>mma 随手画</title>
    <url>//48/</url>
    <content><![CDATA[<p><img src="https://image.pencilq.com/images/2019/12/02/mma.gif" /></p>
<span id="more"></span>
<p>Mathematica 代码</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">f</span><span class="punctuation">[</span><span class="type">x_</span><span class="punctuation">]</span> <span class="operator">:=</span> <span class="operator">-</span><span class="punctuation">(</span><span class="variable">x</span> <span class="operator">-</span> <span class="number">1</span><span class="punctuation">)</span><span class="operator">^</span><span class="number">2</span> <span class="operator">+</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Manipulate</span><span class="punctuation">[</span></span><br><span class="line"> <span class="built_in">Show</span><span class="punctuation">[</span><span class="built_in">Plot</span><span class="punctuation">[</span><span class="variable">f</span><span class="punctuation">[</span><span class="variable">x</span><span class="punctuation">]</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">x</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">4</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">AxesOrigin</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="number">0</span><span class="operator">,</span> <span class="operator">-</span><span class="number">5</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">AspectRatio</span> <span class="operator">-&gt;</span> <span class="number">1</span><span class="operator">,</span> </span><br><span class="line">   <span class="built_in">PlotRange</span> <span class="operator">-&gt;</span> <span class="punctuation">&#123;</span><span class="operator">-</span><span class="number">5</span><span class="operator">,</span> <span class="number">4</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="built_in">PlotTheme</span> <span class="operator">-&gt;</span> <span class="string">&quot;Scientific&quot;</span><span class="punctuation">]</span><span class="operator">,</span> </span><br><span class="line">  <span class="built_in">Graphics</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="built_in">LightBlue</span><span class="operator">,</span> <span class="built_in">Triangle</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="punctuation">&#123;</span><span class="number">0</span><span class="operator">,</span> <span class="number">3</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> <span class="variable">f</span><span class="punctuation">[</span><span class="variable">a</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="number">3</span><span class="operator">,</span> <span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> </span><br><span class="line">  <span class="number">0</span><span class="operator">,</span> <span class="number">4</span><span class="operator">,</span> <span class="number">0.001</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>向量和张量运算总结</title>
    <url>//49/</url>
    <content><![CDATA[<h2 id="张量分析书籍">张量分析书籍</h2>
<p><a
href="https://file.pencilq.com/file_and_note/Tensor%20Algebra%20and%20Tensor%20Analysis%20for%20Engineers%20With%20Applications%20to%20Continuum%20Mechanics%20Fifth%20Edition%20Mikhail%C2%A0Itskov.pdf"><i class="fa fa-file-pdf-o fa-fw" aria-hidden="true"></i>
Tensor Algebra and Tensor Analysis for Engineers With Applications to
Continuum Mechanics (By Mikhail Itskov, Fifth Edition)</a></p>
<p><img
src="https://image.pencilq.com/images/2019/12/18/Tensor-Algebra-and-Tensor-Analysis.png" /></p>
<span id="more"></span>
<h2 id="四阶张量相关">四阶张量相关</h2>
<p><span class="math display">\[
\begin{split}
\mathbb I_4 &amp;= g^i \otimes g^j \otimes g_j \otimes g_i \\
&amp; = e_i \otimes e_j \otimes e_j \otimes ei \quad \text{(Orthogonal
basis)}\\
&amp; = \delta_{il} \delta_{jk} e_i \otimes e_j \otimes e_k \otimes e_l
\end{split}
\]</span></p>
<p><img
src="https://image.pencilq.com/images/2019/12/10/4th-order-tensor_compress.jpg" /></p>
<blockquote>
<p>Le Van A. Nonlinear Theory of Elastic Plates[M]. Elsevier, 2017.
四阶张量的逆咋搞啊，，，头疼</p>
</blockquote>
<p>要注意 A:B 的两种定义</p>
<blockquote>
<p>参考： 1. <a
href="https://www.researchgate.net/post/Related_to_Tensor_double_dot_product_What_is_the_double_dot_AB_product_between_tensors_Aij_and_Blm">researchgate</a>
2. <a
href="https://math.stackexchange.com/questions/348739/double-dot-product-vs-double-inner-product">stackexchange</a>
3. <a
href="https://math.stackexchange.com/questions/2275151/4th-order-tensors-double-dot-product-and-inverse-computation">Stackexchange</a></p>
</blockquote>
<ul>
<li>Reddy: $ A:B := Trace(A*B) = A(ij)B(ji)$</li>
<li>Holzapfel: $ A:B := Trace(A*transpose(B)) = A(ij)B(ij)$</li>
</ul>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/Vector%C2%A0and%C2%A0Tensor%C2%A0Algebra%C2%A0.pdf" data-height="500px"></div>
<p>文件原地址：http://www.mate.tue.nl/~peters/4K400/VectTensColMat.pdf</p>
]]></content>
  </entry>
  <entry>
    <title>书籍推荐</title>
    <url>//5/</url>
    <content><![CDATA[<h2 id="连续介质力学">连续介质力学</h2>
<p>⭐⭐⭐⭐⭐ <a
href="https://file.pencilq.com/file_and_note/Continuum%20Mechanics.pdf">CONTINUUM
MECHANICS by P. Chadwick</a></p>
<p>⭐⭐⭐⭐⭐ <a
href="https://file.pencilq.com/file_and_note/Modern%20Continuum%20mechanics.pdf">近代连续介质力学
赵亚溥</a></p>
<p>⭐⭐⭐ <a
href="https://file.pencilq.com/file_and_note/A%20First%20Course%20in%20Continuum%20Mechanics%20%283rd%29%20en.pdf">连续介质力学初级教程（英语）冯元桢</a></p>
<p>⭐⭐⭐ <a
href="https://file.pencilq.com/file_and_note/A%20First%20Course%20in%20Continuum%20Mechanics%20%283rd%29%20zh.pdf">连续介质力学初级教程（中文）冯元桢</a></p>
]]></content>
  </entry>
  <entry>
    <title>2020 春节购票指南</title>
    <url>//50/</url>
    <content><![CDATA[<div class="tabs" id="春节购票指南"><ul class="nav-tabs"><li class="tab active"><a href="#春节购票指南-1">春节购票指南 1</a></li><li class="tab"><a href="#春节购票指南-2">春节购票指南 2</a></li></ul><div class="tab-content"><div class="tab-pane active" id="春节购票指南-1"><blockquote>
<p><a
href="https://weibo.com/5467852665/Ik87TpdDA?from=page_1002065467852665_profile&amp;type=comment#_rnd1575970624831">微博紫光阁
<i class="fa fa-link fa-fw"></i></a></p>
</blockquote>
<p><img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao1.jpg" />
<span id="more"></span> <img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao2.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao3.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao4.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao5.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao6.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao7.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao8.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/10/ChunJieGouPiao9.jpg" /></p></div><div class="tab-pane" id="春节购票指南-2"><blockquote>
<p><a
href="https://mp.weixin.qq.com/s/K9Gigc_wup5Wb0BnajgX9w">央视新闻公众号：春运火车票攻略
<i class="fa fa-link fa-fw"></i></a></p>
</blockquote>
<p><img
src="https://image.pencilq.com/images/2019/12/13/2020Chunjie1.png"
alt="2020Chunjie1.png" /> <img
src="https://image.pencilq.com/images/2019/12/13/2020Chunjie4.png"
alt="2020Chunjie4.png" /> <img
src="https://image.pencilq.com/images/2019/12/13/2020Chunjie3.png"
alt="2020Chunjie3.png" /> <img
src="https://image.pencilq.com/images/2019/12/13/2020Chunjie2.png"
alt="2020Chunjie2.png" /></p></div></div></div>
]]></content>
  </entry>
  <entry>
    <title>购物经验分享</title>
    <url>//51/</url>
    <content><![CDATA[<h2 id="网购经验分享">网购经验分享</h2>
<p>这篇文章对比了部分品牌2019年双11与双12的优惠，我也对这些品牌给出了主观的评价，另外也为消费者提供了购物攻略，为明年的购物狂欢作准备，列举吸引消费者的因素和解析商家的诱导购物行为。</p>
<span id="more"></span>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 43%" />
<col style="width: 43%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th>双11</th>
<th>双12</th>
<th>个人满意程度</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">优衣库</td>
<td>2019年的双11，优衣库首次参与天猫的官方跨店铺满减，400-50，再加上店铺优惠非常划算，【推荐购买】，牛仔裤，休闲裤，春秋夏装便宜很多，遗憾是冬季的衣物如羽绒，棉衣和新品的降价比较少。如果商品价格降到初上市价的60%左右就已经很值得买的，需要抢的那种。另外要注意优衣库的尺码，不同款式天差地别，不能单纯地按照身高来买，我的话一般裤子要比正常小一码，衬衫正常码，卫衣小一码，外套正常码，这让人摸不着头脑，建议常备一根皮尺，买的时候可以对照商品详情的尺码和自己的身材来购买。优衣库有赠送运费险，尺码不对的话退货有补贴。</td>
<td>到了双12，优衣库也参加跨店铺满减300-30，但是没有发放店铺优惠券，而且商品的优惠力度与双11基本持平，【不推荐推迟到双12购买】。</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">迪卡侬</td>
<td>双11很坑，不参与官方满减，而且优惠力度与平日普通购物节一样，还不如去实体店购买。</td>
<td>双12与双11一样，优惠力度不大。</td>
<td>⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">NewBalance</td>
<td>优惠力度可以，鞋子质量不够相同价位的阿迪达斯好，好处是库存多。</td>
<td>双12没留意。</td>
<td>⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">李宁</td>
<td>好像近年来转型了，转成<del>杀马特</del>潮牌风格，实在不敢恭维。双11优惠力度较大，买了一双前几年出的鞋子，到手160左右，还不错，质量也是相对较差，不会考虑再购买李宁。</td>
<td>双12没留意。</td>
<td>⭐⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">亚瑟士</td>
<td>双11淘宝京东的优惠力度差不多，但也不大，有800-400的优惠券，需要抢。考虑淘宝买到次品的概率比较大，京东售后服务比较好，选择了在京东购买。</td>
<td>双12优惠力度不如双11。</td>
<td>⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">阿迪达斯</td>
<td>双11非常优惠，boost系列￥360到手，不过太难抢了，今年17秒就提交订单锁定鞋子了，实属巧合，而且鞋子质量很好。据说官方旗舰店有些鞋子是做工比较差的，鞋子倒是正品，可能是质量差的正品。由于抢购难度大，满500才包邮，决定扣1颗星。</td>
<td>双12优惠也差不多，力度会小一点，部分双11打过折的鞋子会拿出来再卖，不过库存会少一点，更难抢了。</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">大宝</td>
<td>双11没有留意，良心国货，非常好用。</td>
<td>去拼多多买比较划算，比淘宝天猫便宜一些，拼多多真是个好东西。另外拼多多今年的百亿补贴很给力，买苹果的设备全网最低价。</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">天猫超市</td>
<td>零食，日化用品比较便宜，天猫超市让利非常大，比如一款沙宣洗头水，官方旗舰店的赠品会少一点。奇怪的是抢的人比较少，可能它的商品在搜索页面排序较后。注意付款的时候要与其他商品分开付款。</td>
<td>双12优惠力度不如双11。</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">沃隆每日坚果</td>
<td>双11力度比较大，需要抢券199-50，没有怎么留意。优惠券太难抢，扣1颗星。</td>
<td>双12力度超级大，第二件半价，第三件0元，可以做出神单。</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">燕塘牛奶</td>
<td>我感觉双11是燕塘打折力度比较大的一次，买4免1，遗憾是牛奶包装不好的话，运输过程会破损，不过客服理赔也很爽快，一次要买好多，扣1颗星。</td>
<td>双12打折力度差不多，一年没多少次这样的机会。</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">猫粮</td>
<td>平时48一件，双11前1小时￥36，一年没几次机会。</td>
<td>双12力度差不多。</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">漫步者耳机</td>
<td>去东京买，有保障一点，双11划算，还送赠品。估计618购物节才是京东的主场，总感觉京东双11的优惠力度不如618。便宜没好货，好货不便宜。便宜耳机有底噪，扣2颗星。</td>
<td>双12没留意</td>
<td>⭐⭐⭐</td>
</tr>
<tr class="odd">
<td style="text-align: center;">小米</td>
<td>数码配件，智能家居产品，推荐在京东购买，我发现小米的东西在京东商城会比小米有品，天猫淘宝便宜，神奇，品牌在不同平台定价混乱，扣1颗星。</td>
<td>双12优惠力度不如双11。</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr class="even">
<td style="text-align: center;">德尔玛</td>
<td>小米生态链家居电器的品牌，加湿机，烘干机，地拖，吸尘器，挂烫机，设计比较好看，极简风格，双11优惠还不错。京东买比较便宜，品牌在不同平台定价混乱，扣1颗星。</td>
<td>双12力度差不多。</td>
<td>⭐⭐⭐⭐</td>
</tr>
</tbody>
</table>
<h2 id="消费者备战攻略">消费者备战攻略：</h2>
<ol type="1">
<li>提前做好清单，根据清单选购商品。不要浪费时间看别的商品，我们的目的就是花更少的时间，享受更多的优惠。</li>
<li>日化用品，化妆品好像成本很低，差不多就行了，还不如早点睡。</li>
<li>平时要留意商品的价格，有一些浏览器插件可以查看商品的历史价格，如【购物党】，对比商品的历史最低价格与双11价格，可以看出商家是否黑心。查看多个平台的价格，京东，小米有品，淘宝，天猫，拼多多。</li>
<li>下载一个【一淘】app，有购物返利，app可以说是返利版淘宝，内置购物车与淘宝的购物车同步，点进商品详情还有隐藏优惠券，非常划算。淘宝官方出品，值得信赖。</li>
<li>留意商铺首页有没有1元抢优惠券的机会，一般优惠力度也比较大，也比较难抢。</li>
<li>要注意前n分钟，前n件优惠的，非常划算。假如说一箱沃隆每日坚果￥130，前15分钟第二件半价，第三件0元，购买3箱计算优惠的方式：130*3-(官方津贴满300-30)-第二件半价65-第三件0元-130=￥165，简直神单。</li>
<li>优先花呗付款，使用较先进移动端设备，网络要好。</li>
</ol>
<h2 id="最能吸引消费者优惠方式有">最能吸引消费者优惠方式有：</h2>
<ol type="1">
<li><p>参加聚划算，倒计时开抢，前n分钟优惠。主图如下所示，价格要显眼，前缀为终极XX价，XX狂欢价，XX年终价，让人看了觉得一年只有一次机会，机不可失。优惠信息要明了，以图标或者底部大字显示，红底黄字搭配不错。角标要有购物节的Logo，表明商家有资格入选购物节，体现权威，让消费者觉得这家商店值得信赖。在字眼上做手脚，所谓的满500送500，其实是分12次送500优惠券，不算实在的让利。</p>
<p><img src="https://image.pencilq.com/images/2019/12/12/O1CN01Ud8Q0y1SNfmeXbOrz_0-item_pic.jpg_430x430.jpgtime1576080439000.jpg" style="zoom:50%;" /></p></li>
<li><p>宝贝主图有很多赠品，第二件满减。比如说下图，另外，第二件满减或者送赠品，比较能刺激消费者，比如说一件眼霜，平日￥36，双11一件￥60，第二件0元，平时不关注这件商品消费者可能会为了优惠而购买2件商品。站在商家的角度，应该把优惠券的门槛调高，买第二套才有优惠，或者送很多小赠品，可以把赠品P得大一点多一点，刺激消费者购买更多的产品。</p>
<p><img src="https://image.pencilq.com/images/2019/12/12/image.png" style="zoom: 67%;" /></p></li>
<li><p>满N元包邮，全场满N元送大礼包。与提高优惠券门槛同理，刺激消费者购买更多的产品。</p></li>
<li><p>秒杀优惠券。店铺首页设置1元秒杀高额优惠券，如199-50，售出不退款，若有人冲动消费，买了优惠券却未使用，则商家从中获取流量和利润。</p>
<p><img src="https://image.pencilq.com/images/2019/12/12/image51a9b354cb535106.png" style="zoom:50%;" /></p></li>
<li><p>收藏优先发货，收藏购买送赠品。其实系统没有收藏优先发货这个机制，是商家的诱导行为，宝贝的收藏数据可以帮助商家打造爆款产品，退一步，即使不打造爆款也能提高宝贝在同类产品中的竞争力。至于提前发货，这个就要具体看商家的具体操作了，但一般是不会的，因为一般的商家每天都只发一次货。对于后半句话，可能不收藏也会有赠品。</p>
<p><img src="https://image.pencilq.com/images/2019/12/12/image92f3b19c2f3134fb.png" style="zoom: 67%;" /></p></li>
<li><p>店铺设置抽奖。其实很难抽到什么好东西，一般是小额优惠券，但是这样可以引流，提高店铺人气。</p>
<p><img src="https://image.pencilq.com/images/2019/12/12/image03e7eb7d5eba91ad.png" style="zoom: 50%;" /></p></li>
<li><p>宝贝评价要好。宝贝评价比较差的话一般不会买，但是宝贝评价都是那种太长，写得很用心，配5张图+视频的话，就要留意了，此商品可能存在刷单行为。</p></li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>好用的文献翻译工具整理</title>
    <url>//52/</url>
    <content><![CDATA[<h2 id="前言">前言</h2>
<p>翻译首先要保证意义的准确，其次是<strong>妥当的用词</strong>。其实现在翻译工具基本都能够保持原文的意思，但是用词方面不同的翻译引擎<strong>各有优势</strong>。翻译的原文本格式是否妥当也对翻译准确性有较大影响（例如
pdf 复制的文本带了太多换行就不行）。</p>
<p>个人总结出在阅读英文 pdf 文献时可能的翻译需求：</p>
<ol type="1">
<li>方便快捷的翻译<strong>触发</strong>方式（比如有道的划词翻译）</li>
<li>处理掉从 pdf
复制出来的多余换行，最好是能够<strong>恢复原始段落格式</strong></li>
<li>同时展示多个引擎翻译结果，方便<strong>对比取最优</strong>（比如沙拉查词）</li>
<li>能够一边翻译 pdf，一边做<strong>标注</strong></li>
<li>能随时够<strong>记录生词</strong>，方便复习</li>
<li>全文档翻译（最好免费，白嫖 Yes!）</li>
<li>对于扫描类型的文档，可以直接<strong>截图翻译</strong></li>
</ol>
<span id="more"></span>
<h2 id="软件工具对比">软件、工具对比</h2>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 19%" />
<col style="width: 3%" />
<col style="width: 6%" />
<col style="width: 2%" />
<col style="width: 13%" />
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr class="header">
<th>软件/工具</th>
<th>上榜理由</th>
<th>核心特色</th>
<th>上手难度</th>
<th>截图翻译</th>
<th>移动端</th>
<th>文本处理</th>
<th>免费</th>
<th>广告</th>
<th>推荐指数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a
href="https://aiosadmin-my.sharepoint.com/:f:/g/personal/random137_one_ac_nz/EoSxnPKeDN5CrhUEg_c8kC0BgWSt_8rIGmA9OjqHVp6rCQ?e=MeZTFc">有道翻译<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></td>
<td>老牌的翻译软件，划词取词都很不错</td>
<td>划词取词💚</td>
<td>简单💚</td>
<td>支持💚</td>
<td>有道词典手机版支持生词同步💚</td>
<td>去除所有换行，不分段</td>
<td>免费</td>
<td>有广告（提供纯净版）</td>
<td>🎉🎉🎉🎉</td>
</tr>
<tr class="even">
<td><a href="https://copytranslator.github.io/">CopyTranslator
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></td>
<td>专注于复制翻译，没有多余功能，可切换多种翻译引擎</td>
<td>复制翻译</td>
<td>简单💚</td>
<td>不支持</td>
<td>不支持</td>
<td>识别分段格式💚</td>
<td>免费</td>
<td>无</td>
<td>🎉🎉🎉</td>
</tr>
<tr class="odd">
<td><a href="http://i.zhiyunwenxian.cn/">知云文献翻译
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></td>
<td>内置阅读器，同时支持翻译和 pdf 备注，可切换翻译引擎</td>
<td>翻译+标注</td>
<td>需登陆</td>
<td>不支持</td>
<td>不支持</td>
<td>去除所有换行，不分段</td>
<td>免费（要积分）</td>
<td>无</td>
<td>🎉🎉🎉</td>
</tr>
<tr class="even">
<td><a href="https://saladict.crimx.com/">沙拉查词插件
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a>+<a
href="https://github.com/crimx/ext-saladict/issues/493">Quicker
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></td>
<td>丰富的词典，多种翻译来源对比，情景模式快速切换词典组合</td>
<td>翻译对比💚</td>
<td>配置较多，需要适应</td>
<td>支持💚</td>
<td>可同步到扇贝单词；或者手动导入到 ANKI💚</td>
<td>识别分段格式💚</td>
<td>免费（Quicker 专业版体验更佳）</td>
<td>无</td>
<td>省事党：🎉 动手党：🎉🎉🎉🎉</td>
</tr>
<tr class="odd">
<td><a href="https://fanyi.sogou.com/">搜狗文档翻译
<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></td>
<td>免费 pdf 全文翻译，支持下载 word 格式</td>
<td>全文档翻译💚</td>
<td>开箱即用💚</td>
<td>不支持</td>
<td>在线账户保存文档翻译历史</td>
<td>识别分段格式💚</td>
<td>免费</td>
<td>无</td>
<td>🎉🎉🎉</td>
</tr>
</tbody>
</table>
<blockquote>
<ol type="1">
<li>沙拉查词仅是一个 Chrome
翻译扩展，但是由于其功能<strong>过于强大</strong>，仅在浏览器中使用未免大材小用。沙拉查词通过与
Quicker，Wgesture
等软件的配合使用，查词、翻译体验甚至超越桌面软件。推荐动手党使用。可以参考<a
href="https://github.com/crimx/ext-saladict/issues/493">这个<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a>和<a
href="https://github.com/crimx/ext-saladict/issues/593">这个<i class="fa fa-external-link fa-fw" aria-hidden="true" ></i></a></li>
<li>纠结哪个查词翻译工具好用并没有多大意义，够用就好<del>（打脸，那我写这篇文章干嘛）</del>。该啃的硬骨头还是要啃，永远只当个"工具人"，怎么能进步呢。</li>
</ol>
</blockquote>
<h2 id="软件界面">软件界面</h2>
<h3 id="有道词典">有道词典</h3>
<p><img
src="https://image.pencilq.com/images/2019/12/14/youdao_compress.jpg" /></p>
<h3 id="copytranslator">CopyTranslator</h3>
<p><img
src="https://image.pencilq.com/images/2019/12/14/copy2_compress.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/14/copy_compress.jpg" /></p>
<h3 id="知云文献翻译">知云文献翻译</h3>
<p><img
src="https://image.pencilq.com/images/2019/12/14/zhiyun_compress.jpg" /></p>
<h3 id="沙拉查词">沙拉查词</h3>
<p><img
src="https://image.pencilq.com/images/2019/12/14/sladict_compress.jpg" /></p>
<h3 id="搜狗文档翻译">搜狗文档翻译</h3>
<p><img
src="https://image.pencilq.com/images/2019/12/15/sougoutran-1_compress.jpg" />
<img
src="https://image.pencilq.com/images/2019/12/15/sougoutran-2_compress.jpg" /></p>
]]></content>
  </entry>
  <entry>
    <title>2019 中科院期刊分区</title>
    <url>//53/</url>
    <content><![CDATA[<p><a
href="https://file.pencilq.com/file_and_note/2019年中科院期刊分区.xlsx">下载链接
<i class="fa fa-table fa-fw" aria-hidden="true"></i></a></p>
<iframe width="1000" height="500" frameborder="0" scrolling="no" src="https://onedrive.live.com/embed?resid=370B449BF63734D4%2139679&amp;authkey=%21AP9pVtjJ89Wxv4o&amp;em=2&amp;AllowTyping=True&amp;wdHideGridlines=True&amp;wdHideHeaders=True&amp;wdDownloadButton=True&amp;wdInConfigurator=True">
</iframe>
]]></content>
  </entry>
  <entry>
    <title>文献翻译利器：沙拉查词+ Quicker，这或许是 Windows上最强的聚合翻译方案</title>
    <url>//54/</url>
    <content><![CDATA[<p>完整的教程说明：<a
href="https://github.com/crimx/ext-saladict/discussions/493">技巧分享：Quicker
调用 Saladict 实现全局『文本翻译、截图翻译、复制翻译、触边翻译』</a></p>
<div class="tabs" id="四种模式演示"><ul class="nav-tabs"><li class="tab active"><a href="#四种模式演示-1">沙拉查词+Quicker</a></li><li class="tab"><a href="#四种模式演示-2">文本截图</a></li><li class="tab"><a href="#四种模式演示-3">划词翻译</a></li><li class="tab"><a href="#四种模式演示-4">复制翻译</a></li><li class="tab"><a href="#四种模式演示-5">触边翻译</a></li></ul><div class="tab-content"><div class="tab-pane active" id="四种模式演示-1"><iframe src="//player.bilibili.com/player.html?aid=540562830&amp;bvid=BV1ki4y1x7EN&amp;cid=185784827&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
</iframe></div><div class="tab-pane" id="四种模式演示-2"><p><img
src="https://user-images.githubusercontent.com/38676455/93342947-7ca6a180-f862-11ea-8103-c35fc635c65b.gif" /></p></div><div class="tab-pane" id="四种模式演示-3"><p><img
src="https://user-images.githubusercontent.com/38676455/93343002-90520800-f862-11ea-8d8b-f0be79500d6b.gif" /></p></div><div class="tab-pane" id="四种模式演示-4"><p><img
src="https://user-images.githubusercontent.com/38676455/93343054-a19b1480-f862-11ea-9f9c-530940a6ce81.gif" /></p></div><div class="tab-pane" id="四种模式演示-5"><p><img
src="https://user-images.githubusercontent.com/38676455/93343111-b24b8a80-f862-11ea-8c1b-26484f481a38.gif" /></p></div></div></div>
<span id="more"></span>
<h2 id="前言">前言</h2>
<ul>
<li>一大堆英文 PDF 要概览？</li>
<li>PDF 复制出来全是乱七八糟的断行短句？</li>
<li>遇到扫描的英文书籍，只能一个个单词手打翻译？</li>
<li>CNKI 翻译、朗文、牛津词典等专业词典查生词和例句？</li>
<li>谷歌翻译、腾讯翻译、有道翻译、百度翻译、搜狗翻译等整个段落？</li>
</ul>
<p><img
src="https://pic3.zhimg.com/80/v2-ebd46b0bdd5c6decb52dee3357425c22_720w.jpg" /></p>
<p>对论文党来说，以上重(dàn)要(téng)的需求是比较常见的。而这篇教程，就是为了解决这些重要的需求而生。给你<mark class="label success">30+词典聚合对比翻译、翻译情景模式一键切换、划词&&截图&&复制&&触边翻译</mark></p>
<div class="note danger"><p>警告：过度依赖翻译工具弊大于利，该啃的硬骨头还是要啃的。</p>
</div>
<h3 id="介绍">介绍</h3>
<p>沙拉查词+Quicker
的组合，就能够完美解决上述大部分的翻译需求。关于沙拉查词扩展的使用，可以参考文章：<a
href="https://zhuanlan.zhihu.com/p/82773763">别找了，这才是你要的英文文献翻译神器！</a>。本文主要解决浏览器外调用沙拉查词进行翻译的问题。</p>
<p><img
src="https://pic3.zhimg.com/v2-7b9945ee917a71c85dd16746bf5b87e2_r.jpg"
alt="多种翻译模式" /> <img
src="https://pic1.zhimg.com/v2-bc10e03ea9a8f8a6eccf1d138be2de98_r.jpg"
alt="丰富的词典和翻译引擎" /> <img
src="https://pic2.zhimg.com/v2-e5acc559e79c47459acc6dc5e2ab0fb9_r.jpg" /></p>
<h2 id="安装">安装</h2>
<blockquote>
<p>五星满分的<a
href="https://saladict.crimx.com/">沙拉查词</a>以及作为快捷入口的<a
href="https://getquicker.net/">Quicker</a>都是非常优秀的工具，使用上手简单，并且官网都有详细的中文使用说明。</p>
</blockquote>
<ol type="1">
<li>安装 Quicker 以及 Quicker 动作【<a
href="https://getquicker.net/sharedaction?code=b0d1a134-8284-4a44-d1be-08d746da5869">文本
/ 截图翻译</a>】</li>
<li>Chrome 浏览器安装【<a
href="https://saladict.crimx.com/">沙拉查词扩展</a>】</li>
<li>浏览器打开 【chrome://extensions/shortcuts】 → 找到【沙拉查词 -
聚合词典划词翻译扩展】设置 ，在【独立窗口中搜索剪贴板内容】 设置快捷键
alt+L，右侧选择全局。</li>
<li>保持上述浏览器运行，在 Quicker 面板点击【文本 /
截图翻译】动作即可翻译。</li>
</ol>
<blockquote>
<p>可能出现的问题 1. 扩展安装有困难，可以直接下载配置好沙拉查词的懒人版
Chrome，打开即用。https://www.jianguoyun.com/p/DTdoMoEQytvsBhj65ekC
(访问密码 : ymaxgt) 2. 如果需要科学上网安装扩展，可以使用【<a
href="http://googlehelper.net/">谷歌上网助手</a>】来安装沙拉查词扩展。
3. 如果需要保持浏览器在后台运行，可以使用<a
href="https://chrome.google.com/webstore/detail/%E5%90%8E%E5%8F%B0%E5%B8%B8%E9%A9%BB/mhbibamplfmiaglgnombmmlmcpbocfag">后台常驻扩展</a>
4. 大部分基于 Chromium
的浏览器都可以安装配置。原则上只要能够为沙拉查词配置全局快捷键就可以。</p>
</blockquote>
<p><img
src="https://pic3.zhimg.com/v2-c665fc38031599f21635c3ff582ad156_r.jpg" /></p>
<h2 id="使用技巧">使用技巧</h2>
<ul>
<li><strong>善用情景模式</strong>：可以满足不同场合的需求。在需要句子或者段落翻译，又需要详细的单词释义时，可以一键切换。</li>
</ul>
<p><img
src="https://image.pencilq.com/images/2020/02/12/saladict_profile.gif" /></p>
<ul>
<li><p><strong>模仿划词翻译1</strong>：在【复制翻译】模式下，选中文本后点击
pdf 软件内置的复制按钮，就可以直接翻译。（类似于划词翻译的效果） <img
src="https://user-images.githubusercontent.com/38676455/93343412-09515f80-f863-11ea-932e-ce42e45656d9.gif" /></p></li>
<li><p><strong>模仿划词翻译2</strong>：在【复制翻译】模式下，选中文本后，也利用
Quicker
的【按住左键】同时【点右键】复制功能来复制文本，进而自动触发翻译。</p></li>
</ul>
<p><img
src="https://user-images.githubusercontent.com/38676455/72629006-6de1b500-398a-11ea-981f-689078ca396b.gif" /></p>
<ul>
<li><strong>段落排版</strong>：PDF
文本的一堆断行怎么搞？翻译之前的文本都会经过自动分段处理，尽可能还原为理想的分段。动作针对英文的排版进行了大量优化，用来处理文本也是很不错的。分段后的文本会输出到剪贴板中，Ctrl+V
就可以获取。可以在动作【高级设置】中将【翻译方式】设置为【不翻译（复制到剪贴板）】。</li>
</ul>
<p><img
src="https://user-images.githubusercontent.com/38676455/67873384-599dd100-fb6e-11e9-872e-c698027de2be.jpg" /></p>
<ul>
<li><strong>连续截图</strong>：在默认的截图 OCR 模式下（即 Quicker
自带的截图方式），可以按住 Ctrl 连续截图识别。</li>
</ul>
<p><img
src="https://image.pencilq.com/images/2020/04/28/ctrl-multi-ocr.gif" /></p>
<h2 id="相关参考">相关参考</h2>
<ol type="1">
<li><a
href="https://getquicker.net/sharedaction?code=42abae81-ed41-4f16-269a-08d668af12c8">xiuluoc
沙拉查词</a> （参考调用沙拉查词）</li>
<li><a
href="https://getquicker.net/sharedaction?code=7feab952-5a24-4aa8-39e9-08d6dd213093">天若幽心
段落排版</a> （参考文本排版）</li>
<li><a
href="https://getquicker.net/sharedaction?code=ba82e11a-f845-4ca3-44ee-08d690b5076c">Marcus
截图 OCR</a> （取用了 OCR 模块）</li>
<li><a href="https://copytranslator.github.io/">CopyTranslator</a>
（借鉴复制翻译的模式）</li>
<li><a
href="https://getquicker.net/sharedaction?code=74fc2052-d397-47a3-a1cd-08d6c790cedc">治钧
剪库</a> （参考编写了复制翻译模式）</li>
<li><a
href="https://getquicker.net/sharedaction?code=32315d1a-bcf5-4515-bdd8-08d78cdfb917">果然君2
OCR (高精度)</a> （取用了高精度识别模块）</li>
<li><a
href="https://getquicker.net/sharedaction?code=5722879e-da80-4f59-1748-08d7ab07e287">果然君2
OCR (多重识别)</a> （参考了多重截图实现）</li>
<li><a
href="https://getquicker.net/sharedaction?code=6bd460bf-6fbf-4a7a-f7cd-08d7b41fb3e2">Ever
边缘触发</a>(取用了边缘触发动作)</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>PDF文本自动分段——Powershell 脚本</title>
    <url>//55/</url>
    <content><![CDATA[<p>本脚本主要用于处理从 PDF
复制出来的断行文本。通过匹配文本中的标点符号进行分段，中英文文本均可。<a
href="https://file.pencilq.com/file_and_note/Text_Auto_Segmentation_By_Pencilq.ps1">下载
Powershell 脚本</a>，也可参考 <a
href="https://github.com/hqyyqh/Pantherbar-Extensions/tree/master/Pantherbar%20Extension%20SaladictTranslate">Patherbar
插件</a>中的调用。</p>
<div class="tabs" id="文本分段"><ul class="nav-tabs"><li class="tab active"><a href="#文本分段-1">分段效果</a></li><li class="tab"><a href="#文本分段-2">使用演示</a></li></ul><div class="tab-content"><div class="tab-pane active" id="文本分段-1"><p><img
src="https://image.pencilq.com/images/2020/02/12/fenduan.jpg" /></p></div><div class="tab-pane" id="文本分段-2"><p><img
src="https://image.pencilq.com/images/2020/02/22/TextSegmentation.gif" /></p></div></div></div>
<span id="more"></span>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;#</span></span><br><span class="line"><span class="comment">By Pencilq</span></span><br><span class="line"><span class="comment">该 Powershell 脚本用于文本处理以及快捷键调用</span></span><br><span class="line"><span class="comment">#&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义快捷键，自定义快捷键说明 https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.sendkeys?view=netframework-4.8#remarks</span></span><br><span class="line"><span class="comment"># 比如 Alt+l 为 &quot;%l&quot; ; Ctrl+l 为 &quot;^l&quot; ; Shift+l 为 &quot;+l&quot; ; Alt+Shift+l 为 &quot;%+l&quot;</span></span><br><span class="line"><span class="comment"># $ShortCut = &quot;%l&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文本段落正则匹配</span></span><br><span class="line"><span class="comment"># 末尾结束标点，与下一句分段</span></span><br><span class="line"><span class="variable">$RegexEndPunctuation</span> = <span class="string">&#x27;[\\.:;!。！？：\s]$&#x27;</span></span><br><span class="line"><span class="comment"># 开头项目标点，与前一句分段</span></span><br><span class="line"><span class="variable">$RegexItemIdentify</span> = <span class="string">&#x27;^•|^–\s|^-\s|^Chapter\s[1-9][0-9]&#123;0,1&#125;|^(\d*\.)+\d*\s|^\d*\.\s|^·|^\[\d*\]\s[A-Z]|^\d\)\s|^\d）|^[1-9]\s&#x27;</span></span><br><span class="line"><span class="comment"># 末尾常见缩写词，防误判分段</span></span><br><span class="line"><span class="variable">$RegexEndAbbr</span> = <span class="string">&#x27; fig\.$| et al\.$| Fig\.$| Eq\.$| eq\.$| p\.$| pp\.$| Ph\.D\.$|cf\.$|Cf\.$|,\s\d&#123;4&#125;;$|\.\s\(\d&#123;4&#125;\);$&#x27;</span></span><br><span class="line"><span class="comment"># 末尾英语字母或数字</span></span><br><span class="line"><span class="variable">$RegexEndEng</span> = <span class="string">&#x27;[a-z0-9]$&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;#######################&gt;</span></span><br><span class="line"><span class="variable">$TextProcess</span> = <span class="string">&quot;process&quot;</span></span><br><span class="line"><span class="variable">$PLAIN_TEXT</span> = <span class="built_in">Get-Clipboard</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $wshell = New-Object -ComObject wscript.shell</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文本的分割和清洗</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextSplit</span> <span class="params">(<span class="variable">$InputText</span>)</span></span> &#123;       </span><br><span class="line">    <span class="variable">$InputText</span> = <span class="variable">$InputText</span> <span class="operator">-split</span> <span class="string">&quot;`n&quot;</span>     <span class="comment"># 按段落分割</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$InputText</span>.Count; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$InputText</span>[<span class="variable">$i</span>] = <span class="variable">$InputText</span>[<span class="variable">$i</span>].Replace(<span class="string">&quot;ﬁ&quot;</span>, <span class="string">&quot;fi&quot;</span>)      <span class="comment"># LaTeX 中连字符替换</span></span><br><span class="line">        <span class="variable">$InputText</span>[<span class="variable">$i</span>] = <span class="variable">$InputText</span>[<span class="variable">$i</span>].Replace(<span class="string">&quot;ﬃ&quot;</span>, <span class="string">&quot;ffi&quot;</span>)</span><br><span class="line">        <span class="variable">$InputText</span>[<span class="variable">$i</span>] = <span class="variable">$InputText</span>[<span class="variable">$i</span>].Replace(<span class="string">&quot;ﬂ&quot;</span>, <span class="string">&quot;fl&quot;</span>)</span><br><span class="line">        <span class="variable">$InputText</span>[<span class="variable">$i</span>] = <span class="variable">$InputText</span>[<span class="variable">$i</span>].Replace(<span class="string">&quot;ﬀ&quot;</span>, <span class="string">&quot;ff&quot;</span>)</span><br><span class="line">        <span class="variable">$InputText</span>[<span class="variable">$i</span>] = <span class="variable">$InputText</span>[<span class="variable">$i</span>].Trim()                   <span class="comment"># 删除字符串前后分行和空白字符</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$InputText</span> = <span class="variable">$InputText</span>.where( &#123; <span class="variable">$_</span> <span class="operator">-ne</span> <span class="string">&quot;&quot;</span> &#125;)                <span class="comment"># 删除空白行</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$InputText</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配标点，记录分段信息</span></span><br><span class="line"><span class="comment"># $Separator 设置三种情况，0 为中文直接拼接，1 为英文拼接加空格，2 为换行分段</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PunctuationSegment</span> <span class="params">(<span class="variable">$InputText</span>)</span></span>&#123;</span><br><span class="line">    <span class="variable">$Separator</span> = <span class="selector-tag">@</span>()</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$InputText</span>.Count<span class="literal">-1</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$IsEnd</span> = <span class="variable">$InputText</span>[<span class="variable">$i</span>] <span class="operator">-cmatch</span> <span class="variable">$RegexEndPunctuation</span>                                             <span class="comment"># 断句符判断</span></span><br><span class="line">        <span class="variable">$IsNextItem</span> = <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>] <span class="operator">-cmatch</span> <span class="variable">$RegexItemIdentify</span>                                      <span class="comment"># 列表项判断</span></span><br><span class="line">        <span class="variable">$IsAbbr</span> = <span class="variable">$InputText</span>[<span class="variable">$i</span>] <span class="operator">-cmatch</span> <span class="variable">$RegexEndAbbr</span>                                                   <span class="comment"># 结尾缩写项判断</span></span><br><span class="line">        <span class="variable">$IsEng</span> = <span class="variable">$InputText</span>[<span class="variable">$i</span>] <span class="operator">-cmatch</span> <span class="variable">$RegexEndEng</span>                                                     <span class="comment"># 英语及数字判断</span></span><br><span class="line">        <span class="comment"># 当前句末尾以及下一句开头是否含有分段标识符</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$IsEnd</span> <span class="operator">-or</span> <span class="variable">$IsNextItem</span>) &#123;</span><br><span class="line">        <span class="comment"># 排除末尾缩写的情况</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$IsAbbr</span>) &#123;</span><br><span class="line">                <span class="variable">$Separator</span> += <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$Separator</span> += <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">elseif</span> (<span class="variable">$IsEng</span>) &#123;</span><br><span class="line">            <span class="variable">$Separator</span> += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$Separator</span> += <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$Separator</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据数组信息拼接文本</span></span><br><span class="line"><span class="comment"># $Separator 设置三种情况，0 为中文直接拼接，1 为英文拼接加空格，2 为换行分段</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Textjoin</span> <span class="params">(<span class="variable">$InputText</span>, <span class="variable">$Separator</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$InputText</span>.Count <span class="operator">-le</span> <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment"># 只有一行字符无需处理</span></span><br><span class="line">        <span class="variable">$CombText</span> = <span class="variable">$InputText</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$CombText</span> = <span class="variable">$InputText</span><span class="function">[<span class="number">0</span>]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> <span class="operator">-lt</span> <span class="variable">$InputText</span>.Count - <span class="number">1</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$CombTextSplit</span> = <span class="variable">$CombText</span> <span class="operator">-split</span> <span class="string">&quot;`n&quot;</span></span><br><span class="line">            <span class="variable">$IsTitle</span> = <span class="variable">$CombTextSplit</span>[-<span class="number">1</span>] <span class="operator">-cmatch</span> <span class="variable">$RegexItemIdentify</span> <span class="operator">-and</span> <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>] <span class="operator">-cmatch</span> <span class="string">&#x27;^[A-Z]&#x27;</span>    <span class="comment"># 标题判断</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$IsTitle</span>) &#123;</span><br><span class="line">                <span class="variable">$CombText</span> = <span class="variable">$CombText</span> + <span class="string">&quot;`n`n&quot;</span> + <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>]</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">elseif</span> (<span class="variable">$Separator</span>[<span class="variable">$i</span>] <span class="operator">-eq</span> <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$CombText</span> = <span class="variable">$CombText</span> + <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>]  <span class="comment"># 中文拼接</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">elseif</span> (<span class="variable">$Separator</span>[<span class="variable">$i</span>] <span class="operator">-eq</span> <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="variable">$CombText</span> = <span class="variable">$CombText</span> + <span class="string">&quot; &quot;</span> + <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>]   <span class="comment"># 加空格</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">elseif</span> (<span class="variable">$Separator</span>[<span class="variable">$i</span>] <span class="operator">-eq</span> <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="variable">$CombText</span> = <span class="variable">$CombText</span> + <span class="string">&quot;`n`n&quot;</span> + <span class="variable">$InputText</span>[<span class="variable">$i</span> + <span class="number">1</span>]  <span class="comment"># 分段</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$CombText</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义处理文本模块</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextModify</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="variable">$SepText</span> = TextSplit(<span class="variable">$PLAIN_TEXT</span>)</span><br><span class="line">    <span class="variable">$Separator</span> = PunctuationSegment(<span class="variable">$SepText</span>)</span><br><span class="line">    <span class="variable">$JoinText</span> = Textjoin <span class="variable">$SepText</span> <span class="variable">$Separator</span></span><br><span class="line">    <span class="variable">$JoinText</span> | <span class="built_in">Set-Clipboard</span></span><br><span class="line">    <span class="comment"># $wshell.SendKeys($ShortCut)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义直接赋值文本模块</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextCopy</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="variable">$PLAIN_TEXT</span> | <span class="built_in">Set-Clipboard</span></span><br><span class="line">    <span class="comment"># $wshell.SendKeys($ShortCut)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$TextProcess</span> <span class="operator">-eq</span> <span class="string">&quot;process&quot;</span>) &#123;</span><br><span class="line">    TextModify</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">elseif</span> (<span class="variable">$TextProcess</span> <span class="operator">-eq</span> <span class="string">&quot;initial&quot;</span>) &#123;</span><br><span class="line">    TextCopy</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>知乎维基一键复制LaTeX公式</title>
    <url>//57/</url>
    <content><![CDATA[<ol type="1">
<li>浏览器安装油猴插件 https://www.tampermonkey.net/</li>
<li>安装油猴脚本：一键复制
https://greasyfork.org/zh-CN/scripts/397740</li>
<li>在知乎或者维基页面点击公式即可复制</li>
</ol>
<p><img
src="https://image.pencilq.com/images/2020/03/13/copy_latex_compress.jpg" /></p>
<span id="more"></span>
<p>如需截图识别公式，可以使用 <a
href="https://pencilq.com/58/">mathpix</a></p>
]]></content>
  </entry>
  <entry>
    <title>LaTeX公式识别——Mathpix</title>
    <url>//58/</url>
    <content><![CDATA[<p><a href="https://mathpix.com/">Mathpix</a> 识别 LaTeX
公式那是<strong>相当准确</strong>，支持英文与公式混合识别。不过免费账户一个月只能识别
50
次，付费版价格那也是<del>相当美丽</del>。所以我来介绍一下<strong><del>白嫖</del></strong>
Mathpix 的终极奥义。</p>
<p><img
src="https://image.pencilq.com/images/2020/03/14/mathpix_demo.png" /></p>
<span id="more"></span>
<h2 id="注册多个-mathpix-账号">注册多个 Mathpix 账号</h2>
<p>😏一个账号 月 50 次，那十个账号那就是 500 次了兄弟。
什么？你问我哪来这么多邮箱注册？临时邮箱了解一下，例如
https://temp-mail.org/zh/</p>
<p><img
src="https://image.pencilq.com/images/2020/03/14/temp_mail.jpg" /></p>
<h2 id="mathpix-api">Mathpix API</h2>
<p>可申请 Mathpix API，每月免费 1000 次，申请需要信用卡，教程参考
https://tianruoocr.cn/interface/Math_MathPix.html 将 API Keys
填写到下面介绍的工具</p>
<p><img
src="https://image.pencilq.com/images/2020/03/14/mathpix_api.jpg" /></p>
<h2 id="现成调用mathpix-api的工具">现成调用Mathpix API的工具</h2>
<blockquote>
<p>Mathpix 给出了详细的 <a href="https://docs.mathpix.com/">API
文档</a>，有能力者按照自己需求定制即可。下面介绍一些现成的工具。</p>
</blockquote>
<ol type="1">
<li>Quicker 动作，<a
href="https://getquicker.net/sharedaction?code=acf019b8-434e-4979-be62-08d776d80bd7">截图识别公式</a></li>
</ol>
<p><img
src="https://image.pencilq.com/images/2020/03/14/mathpix_quicker.jpg" /></p>
<ol start="2" type="1">
<li><a href="https://tianruoocr.cn/">天若 OCR</a> 专业版提供了 Mathpix
接口</li>
</ol>
<p><img
src="https://image.pencilq.com/images/2020/03/14/mathpix_tianruo.jpg" /></p>
<p>🧐 OK 了吧。如果经常在知乎、维基复制公式，可以使用<a
href="https://pencilq.com/57/">油猴脚本 一键复制公式</a></p>
]]></content>
  </entry>
  <entry>
    <title>力学概念</title>
    <url>//6/</url>
    <content><![CDATA[<h2 id="冯元桢的连续介质力学公理">冯元桢的连续介质力学公理</h2>
<p>冯元桢将经典物理学中的公理均视为连续介质力学的公理，尤其是牛顿第一和第二定律在连续介质力学中的应用。此外，冯元桢还给出了连续介质力学的三个附加公理：</p>
<h3 id="公理一">公理一</h3>
<p>连续介质在力的作用下仍然保持为连续介质 (A material continuum remains
a continuum under the action of
forces)。所以，在某一时刻相邻的两个致电在任何时刻都保持相邻。允许物体发生破裂，但断裂面必须被认为是新产生的外表面。在有生命的物体中，允许新的生长。</p>
<span id="more"></span>
<h3 id="公理二">公理二</h3>
<p>在物体中处处可以定义应力和应变 (The stress and strain described in
the textbook can be defined everywhere in the body)。</p>
<h3 id="公理三">公理三</h3>
<p>一点处的应力与该点处的应变和应变随时间的变化(应变)率相关 (The stress
at a point is related to the strain and the rate of change of strain
with respect to time at the same point)。</p>
<h2 id="连续介质力学研究范围">连续介质力学研究范围</h2>
<p><img
src="https://image.pencilq.com/images/2019/05/02/0069RVTdgy1fv6jed6sjtj31kw1g4nlw.jpg" /></p>
<h2
id="各向同性材料弹性常数之间的关系">各向同性材料弹性常数之间的关系</h2>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 18%" />
<col style="width: 21%" />
<col style="width: 21%" />
<col style="width: 15%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(\lambda, \; G\)</span></th>
<th><span class="math inline">\(E, \; \nu\)</span></th>
<th><span class="math inline">\(G, \; \nu\)</span></th>
<th><span class="math inline">\(E, \; G\)</span></th>
<th><span class="math inline">\(K, \; \nu\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\lambda\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
<td><span class="math inline">\(\dfrac{E \nu}{\left( {1+ \nu} \right)
\left( {1-2 \nu} \right)}\)</span></td>
<td><span class="math inline">\(\dfrac{2 G \nu}{1- 2 \nu}\)</span></td>
<td><span class="math inline">\(\dfrac{G \left( {E - 2 G} \right)}{3 G
-E }\)</span></td>
<td><span class="math inline">\(\dfrac{3 K \nu}{1+\nu}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(G\)</span></td>
<td><span class="math inline">\(G\)</span></td>
<td><span class="math inline">\(\dfrac{E}{2 \left( {1+ \nu}
\right)}\)</span></td>
<td><span class="math inline">\(G\)</span></td>
<td><span class="math inline">\(G\)</span></td>
<td><span class="math inline">\(\dfrac{3K\left( {1- 2\nu} \right)}{2
\left( {1+\nu} \right)}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(K\)</span></td>
<td><span class="math inline">\(\dfrac{1}{3} \left( {3 \lambda + 2G}
\right)\)</span></td>
<td><span class="math inline">\(\dfrac{E}{3 \left( {1- 2 \nu}
\right)}\)</span></td>
<td><span class="math inline">\(\dfrac{2 G \left( {1+\nu} \right)}{3
\left( {1- 2\nu} \right)}\)</span></td>
<td><span class="math inline">\(\dfrac{G E}{3 \left( {3 G -E}
\right)}\)</span></td>
<td><span class="math inline">\(K\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(E\)</span></td>
<td><span class="math inline">\(\dfrac{3 \lambda+2 G}{2 \left( {\lambda
+G} \right)}\)</span></td>
<td><span class="math inline">\(E\)</span></td>
<td><span class="math inline">\(2 G \left( {1+\nu} \right)\)</span></td>
<td><span class="math inline">\(E\)</span></td>
<td><span class="math inline">\(3K\left( {1-2 \nu} \right)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\nu\)</span></td>
<td><span class="math inline">\(\dfrac{\lambda}{2 \left( {\lambda +G}
\right)}\)</span></td>
<td><span class="math inline">\(\nu\)</span></td>
<td><span class="math inline">\(\nu\)</span></td>
<td><span class="math inline">\(\dfrac{E}{2 G}-1\)</span></td>
<td><span class="math inline">\(\nu\)</span></td>
</tr>
</tbody>
</table>
<h2 id="常见应力等效方式">常见应力等效方式</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">含义</th>
<th style="text-align: center;">符号</th>
<th style="text-align: center;">含义</th>
<th style="text-align: center;">符号</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">应力</td>
<td style="text-align: center;"><span
class="math inline">\(\sigma_{ij}\)</span></td>
<td style="text-align: center;">应力不变量</td>
<td style="text-align: center;"><span
class="math inline">\(J\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">偏应力</td>
<td style="text-align: center;"><span
class="math inline">\(s_{ij}\)</span></td>
<td style="text-align: center;">应力偏量不变量</td>
<td style="text-align: center;"><span
class="math inline">\(J&#39;\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">八面体正应力</td>
<td style="text-align: center;"><span
class="math inline">\(\sigma_8\)</span></td>
<td style="text-align: center;">八面体切应力</td>
<td style="text-align: center;"><span
class="math inline">\(\tau_8\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">等效应力</td>
<td style="text-align: center;"><span
class="math inline">\(\bar{\sigma}\)</span></td>
<td style="text-align: center;">等效剪应力</td>
<td style="text-align: center;"><span
class="math inline">\(\bar{\sigma}\)</span></td>
</tr>
</tbody>
</table>
<p><img
src="https://image.pencilq.com/images/2019/08/31/stress.jpg" /></p>
<h3 id="应力张量">应力张量</h3>
<p>应力分解： <span class="math display">\[
\sigma_{ij} = \sigma_m \delta_{ij} + s_{ij}
\]</span></p>
<h3 id="主应力和应力不变量">主应力和应力不变量</h3>
<p><span class="math display">\[
\begin{aligned}
&amp; \left| {\sigma_{ij} - \lambda \delta_{ij}} \right| = 0 \\
\Rightarrow &amp; \lambda^3 - J_1 \lambda^2 - j_2 \lambda - J_3 = 0
\end{aligned}
\]</span></p>
<p>其中 <span class="math display">\[
\begin{aligned}
&amp; J_1 = \sigma_{kk} = \sigma_1 + \sigma_2 + \sigma_3 \\
&amp; J_2 = -\dfrac{1}{2} \left( {\sigma_{ii} \sigma_{kk} - \sigma_{ik}
\sigma_{ki}} \right) = - \left( {\sigma_1 \sigma_2 + \sigma_2 \sigma_3 +
\sigma_3 \sigma_1 } \right) \\
&amp; J_3 = \left| {\sigma_{ij}} \right| = \sigma_1 \sigma_2 \sigma_3
\end{aligned}
\]</span></p>
<h3 id="应力偏张量">应力偏张量</h3>
<p><span class="math display">\[
s_j = \sigma_j - \sigma_m
\]</span> 不变量 <span class="math display">\[
J_2&#39; = \left\{
\begin{aligned}
   &amp; s_{ij}s_{ij}/2 \\
   &amp; -(s_1 s_2 + s_2 s_3 + s_3 s_1) = (s_1^2 + s_2^2 + s_3^2)/2 \\
   &amp; \left[ {\left( {\sigma_1 - \sigma_2} \right)^2+\left( {\sigma_2
- \sigma_3} \right)^2+\left( {\sigma_3 - \sigma_1} \right)^2} \right]
/6    
\end{aligned}
\right.
\]</span></p>
<h3 id="等效应力">等效应力</h3>
<p><span class="math display">\[
\begin{split}
   \bar{\sigma} &amp; = \sqrt{3J_2&#39;} \\
    &amp; = \sqrt{\dfrac{3}{2}s_{ij}s_{ij} }\\
    &amp; = \sqrt{\dfrac{1}{2} \left[ {\left( \sigma_{11}-\sigma_{22}
\right)^2 + \left( \sigma_{22}-\sigma_{33} \right)^2 + \left(
\sigma_{33}-\sigma_{11} \right)^2 + 6 \left(
\sigma_{23}^2+\sigma_{31}^2+\sigma_{12}^2 \right)} \right] }\\
    &amp; = \sqrt{\dfrac{1}{2}\left[ {\left( \sigma_{1}-\sigma_{2}
\right)^2 + \left( \sigma_{2}-\sigma_{3} \right)^2 + \left(
\sigma_{3}-\sigma_{1} \right)^2 } \right] }
\end{split}
\]</span></p>
<p>可参考<a
href="https://en.wikipedia.org/wiki/Von_Mises_yield_criterion">维基百科</a></p>
<h2 id="塑性理论框架基础">塑性理论框架基础</h2>
<p><img
src="https://image.pencilq.com/images/2019/08/31/006tNbRwgy1fvgarb7x5dj30x90ltq3w.jpg" /></p>
<h2 id="圣维南原理">圣维南原理</h2>
<p>是弹性力学中一个重要的原理，它一般意义上有两种提法。</p>
<h3 id="提法一">提法一</h3>
<p>把物体一小部分上的面力，变换为分布不同但静力等效的力，那么只影响近处的应力分布，远处受到的影响可以忽略不计。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/06/v2-96f08b77d9989813947cf46d9672c72b_hd.jpg" /></p>
<h3 id="提法二">提法二</h3>
<p>如果物体一小部分边界上的面力一个是平衡力系，那么就只会使近处产生显著应力
远处可以忽略不计。</p>
<p><img
src="https://image.pencilq.com/images/2019/09/06/v2-7279b3c79cb2deaf7436110d5968bb17_hd.jpg" /></p>
<p>​理解一下，外力的具体分布只影响作用区域附近的应力分布，即图中虚线以内部分，剩余区域则影响不到。</p>
<p>​其实就是一种对载荷的处理手段，因为在PDE的边界处，集中力、集中力偶这种形式是非常难以描述的，描述出来也没有办法解答，所以对于小边界（相对次要的边界），可以采用静力学的方法进行等效，一般等效成分布力，使得这个分布力系相对于原来的集中力，集中力偶有相同的静力学特征，即分布力系具有与集中力（偶）对应的相同的主矢、主矩。这么做，对替换力系处有显著的影响，但是对于其余的位置，几乎没有影响。</p>
]]></content>
  </entry>
  <entry>
    <title>ABAQUS矢量图像输出</title>
    <url>//59/</url>
    <content><![CDATA[<p>原来ABAQUS也支持矢量图输出呢，例如.eps，.svg。打印输出当前页面快捷键Ctrl+P，选择需要的格式，点击OK即可将文件输出到工作目录。</p>
<p><img
src="https://image.pencilq.com/images/2020/03/18/ABAQUSPrintImageFormat.png" /></p>
<span id="more"></span>
<p>以下是<a
href="https://classes.engineering.wustl.edu/2009/spring/mase5513/abaqus/docs/v6.6/books/usi/default.htm?startat=pt01ch08s01s01.html">ABAQUS6.6的手册</a></p>
<p>ABAQUS/CAE allows you to print images directly to a Windows printer.
The printer driver creates and sends the necessary information to the
printer in whatever format is required.</p>
<p>If Windows printer drivers are not available or if you are using
another platform, you can use a print command to create and send a
PostScript file directly to a PostScript printer. You can also save
images in a PostScript (PS), Encapsulated PostScript (EPS), Tag Image
File Format (TIFF), Portable Network Graphics (PNG), or Scalable Vector
Graphics (SVG) file. The following list describes these file
formats:</p>
<h2 id="postscript">PostScript</h2>
<p>PostScript is the recognized standard for desktop publishing.
PostScript is actually a programming language whose instructions and
data are usually stored in an ASCII format that can be transferred
easily between operating systems. The PostScript format is used when you
use a print command to print to a PostScript printer or when you save
the image in a PostScript file. When you select the PostScript format,
ABAQUS/CAE generates either a compressed raster representation or a
vector representation of your image. For efficiency when producing
raster images, you should minimize the size of your image and limit the
resolution of the image to, at most, the resolution of the device on
which the image is to be printed or displayed.</p>
<h2 id="encapsulated-postscript">Encapsulated PostScript</h2>
<p>Encapsulated PostScript (EPS) is a variation of PostScript that
describes a single graphic designed to be included in a larger document
without modification. EPS files are identical to PostScript files except
for some information that describes the size and positioning of the
image. As a result, the above discussion about vector and raster
representations of your image applies equally to the EPS format. Most
word processing and graphics applications support the inclusion of EPS
files.</p>
<h2 id="tiff">TIFF</h2>
<p>Tag Image File Format (TIFF) is a well-established raster image
format that is recognized by many software applications. The TIFF format
supports both color and greyscale. By default, ABAQUS/CAE limits TIFF
images of viewports to 8-bit color (256 colors). However, you can also
use 24-bit color (on Windows) or the system color setting (on
Linux).</p>
<h2 id="png">PNG</h2>
<p>Portable Network Graphics (PNG) is an industry standard for storing
raster images. The use of PNG files has been popularized by the World
Wide Web, and PNG images are displayed by most popular web browsers
running on a variety of operating systems. A PNG file consists of color
information and a compressed raster representation of the image. By
default, ABAQUS/CAE limits PNG images of viewports to 8-bit color (256
colors). However, you can also use 24-bit color (on Windows) or the
system color setting (on Linux).</p>
<h2 id="svg">SVG</h2>
<p>Scalable Vector Graphics (SVG) is an industry-standard vector
graphics language written in XML.</p>
]]></content>
  </entry>
  <entry>
    <title>ABAQUS二次开发环境配置</title>
    <url>//60/</url>
    <content><![CDATA[<p>ABAQUS版本2016</p>
<p>先安装VS（Visual Studio），测试版本为 2012</p>
<p>再安装IVF（Intel Visual Fortran），测试版本为 2015</p>
<span id="more"></span>
<p><img src="https://image.pencilq.com/images/2020/03/18/CAE.png" /></p>
<p>在开始菜单右键CAE找到其对应的launcher.bat</p>
<p>右键编辑，改成下面的模样</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">call</span> &quot;D:\Program Files (x86)\Intel\Composer XE <span class="number">2015</span>\bin\ipsxe-<span class="built_in">comp</span>-vars.bat&quot; intel64 vs2012</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">&quot;D:\SIMULIA\CAE\<span class="number">2016</span>\win_b64\code\bin\ABQLauncher.exe&quot; %*</span><br></pre></td></tr></table></figure>
<p>其中<code>D:\Program Files (x86)\Intel\Composer XE 2015\bin\ipsxe-comp-vars.bat</code>这个路径大家可能不一样，耐心找找看。</p>
<p>intel64 vs2012 代表了vs版本是2012.</p>
<p>再次打开CAE显示以下内容即表示可能成功了，这时，请保证软件的证书有效。</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">Intel(R) Parallel Studio XE <span class="number">2015</span></span><br><span class="line">Copyright (C) <span class="number">1985</span>-<span class="number">2015</span> Intel Corporation. All rights reserved.</span><br><span class="line">Intel(R) Parallel Studio XE <span class="number">2015</span> Update <span class="number">6</span> Composer Edition (package <span class="number">285</span>)</span><br><span class="line"></span><br><span class="line">Abaqus License Manager checked out the following license:</span><br><span class="line">&quot;cae&quot; release <span class="number">6</span>.<span class="number">16</span> from Flexnet server ***</span><br><span class="line">&lt;<span class="number">1023</span> out of <span class="number">1024</span> licenses remain available&gt;.</span><br></pre></td></tr></table></figure>
<p>再进一步用Umat测试成功就真的成功了。</p>
]]></content>
  </entry>
  <entry>
    <title>Mathematica 导出科学计数法数据</title>
    <url>//62/</url>
    <content><![CDATA[<p>Mathematica 导出数据总是遇到很多坑，总结一下。</p>
<p>个人日常喜欢导出 <code>.csv</code> 格式的文件，即数值用逗号分隔。</p>
<h2 id="常用方法-export-函数">常用方法: Export 函数</h2>
<p>在 mathemtica 中，最常用的导出函数莫过于
<code>Export</code>。试举一例</p>
<p>先来创建一组数据</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">data</span> <span class="operator">=</span> <span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> <span class="number">10</span><span class="operator">^-</span><span class="number">7</span> <span class="variable">a</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">a</span><span class="operator">,</span> <span class="number">1.</span><span class="operator">,</span> <span class="number">10</span><span class="operator">,</span> <span class="number">1</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;1., 1.*10^-7&#125;, &#123;2., 2.*10^-7&#125;, &#123;3., 3.*10^-7&#125;, &#123;4., 4.*10^-7&#125;, &#123;5., </span><br><span class="line">  5.*10^-7&#125;, &#123;6., 6.*10^-7&#125;, &#123;7., 7.*10^-7&#125;, &#123;8., 8.*10^-7&#125;, &#123;9., </span><br><span class="line">  9.*10^-7&#125;, &#123;10., 1.*10^-6&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>使用 <code>Export</code> 函数导出</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">SetDirectory</span><span class="punctuation">[</span><span class="built_in">NotebookDirectory</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">Export</span><span class="punctuation">[</span><span class="string">&quot;test.csv&quot;</span><span class="operator">,</span> <span class="variable">data</span><span class="punctuation">]</span><span class="operator">;</span></span><br></pre></td></tr></table></figure>
<p><code>test.csv</code>文件内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.,1.e-7</span><br><span class="line">2.,2.e-7</span><br><span class="line">3.,3.e-7</span><br><span class="line">4.,4.e-7</span><br><span class="line">5.,5.e-7</span><br><span class="line">6.,6.e-7</span><br><span class="line">7.,7.e-7</span><br><span class="line">8.,8.e-7</span><br><span class="line">9.,9.e-7</span><br><span class="line">10.,1.e-6</span><br></pre></td></tr></table></figure>
<p>到目前为止都没什么问题，Export 函数能够自动转换 <code>8.e-7</code>
这类科学计数法表示的数据。</p>
<h2 id="挖坑">挖坑</h2>
<p>使用 Export
可以直接导出一个变量，那么在必须要迭代的程序中（并且不知道迭代次数），如何把结果累积在一个变量中呢？跟很多程序语言类似，<code>Append</code>
或者 <code>AppendTo</code>
可以追加内容到一个列表中。这个函数众所周知的问题，就是在数据量太大的时候异常卡慢。我们可以比较一下。</p>
<p>定义一个测试函数，输出不同迭代次数下，使用 <code>AppendTo</code>
追加，以及最终导出数据所需时间</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">testfunc</span><span class="punctuation">[</span><span class="type">num_</span><span class="punctuation">]</span> <span class="operator">:=</span> </span><br><span class="line"> <span class="built_in">Block</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">data</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="variable">i</span><span class="operator">,</span> <span class="variable">time</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span> </span><br><span class="line">  <span class="built_in">AbsoluteTiming</span><span class="punctuation">[</span></span><br><span class="line">    <span class="built_in">Do</span><span class="punctuation">[</span><span class="variable">list</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="variable">i</span><span class="operator">,</span> <span class="number">10.</span><span class="operator">^-</span><span class="number">7</span> <span class="variable">i</span><span class="punctuation">&#125;</span><span class="operator">;</span> <span class="built_in">AppendTo</span><span class="punctuation">[</span><span class="variable">data</span><span class="operator">,</span> <span class="variable">list</span><span class="punctuation">]</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++,</span> <span class="variable">num</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line">    <span class="built_in">Export</span><span class="punctuation">[</span><span class="string">&quot;test.csv&quot;</span><span class="operator">,</span> <span class="variable">data</span><span class="punctuation">]</span><span class="operator">;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>观察一下不同迭代次数下的需要耗费的时间</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="built_in">SetDirectory</span><span class="punctuation">[</span><span class="built_in">NotebookDirectory</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="variable">data</span> <span class="operator">=</span> <span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">n</span><span class="operator">,</span> <span class="variable">testfunc</span><span class="punctuation">[</span><span class="variable">n</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">n</span><span class="operator">,</span> <span class="number">10000</span><span class="operator">,</span> <span class="number">100000</span><span class="operator">,</span> <span class="number">10000</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">ListLinePlot</span><span class="punctuation">[</span><span class="variable">data</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>从计算时间上可以看到，耗费时间与迭代次数并非线性增加，因此再操作大型数组的术后
<code>AppendTo</code> 就退下吧。</p>
<p>看到这里好像有点跑题？其实这里主要是想说明：通过
<code>AppendTo</code> 追加数组，最终再使用 <code>Export</code>
自动输出科学计数法的数值的方案不可行。另外，<code>PutAppend</code>
函数也类似，不适用大型数组叠加输出。</p>
<h2 id="填坑">填坑</h2>
<p>这时候只能想原始一点的办法了，想来 Mathematica 应该会提供类似 c++
文件流的方式，查找一下帮助文档里面的方案：</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">str</span> <span class="operator">=</span> <span class="built_in">OpenWrite</span><span class="punctuation">[</span><span class="string">&quot;test.csv&quot;</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="variable">test</span> <span class="operator">=</span> <span class="number">1.2</span> <span class="number">10</span><span class="operator">^-</span><span class="number">7</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">WriteString</span><span class="punctuation">[</span><span class="variable">str</span><span class="operator">,</span> <span class="variable">test</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">Close</span><span class="punctuation">[</span><span class="variable">str</span><span class="punctuation">]</span><span class="operator">;</span></span><br></pre></td></tr></table></figure>
<p>但是这时候导出的结果只能用混乱来形容。。。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">      -7</span><br><span class="line">1.2 10</span><br></pre></td></tr></table></figure>
<p>得想办法如何转换成想要的数值格式，在帮助文档
<code>NumberFormat</code>
函数中给出了一个例子，经过（交流群的混乱讨论），加工一下</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">test</span> <span class="operator">=</span> <span class="number">1.2</span> <span class="number">10</span><span class="operator">^-</span><span class="number">7</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">ScientificForm</span><span class="punctuation">[</span><span class="variable">test</span><span class="operator">,</span> <span class="number">10</span><span class="operator">,</span> <span class="built_in">NumberFormat</span> <span class="operator">-&gt;</span> <span class="punctuation">(</span><span class="built_in">Row</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="type">#1</span><span class="operator">,</span> <span class="string">&quot;e&quot;</span><span class="operator">,</span> <span class="type">#3</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">&amp;</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>但是注意 <code>WriteString</code> 接收的是字符串格式，加个
<code>ToString</code> 转换一下即可，另外在 1-10
范围内的应该不需要科学计数法表达，再混乱地整理一下，</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">Num2Str</span><span class="punctuation">[</span><span class="type">num_</span><span class="punctuation">]</span> <span class="operator">:=</span> </span><br><span class="line">  <span class="built_in">If</span><span class="punctuation">[</span><span class="number">1</span> <span class="operator">&gt;</span> <span class="operator">=</span><span class="variable">num</span> <span class="operator">||</span> <span class="variable">num</span> <span class="operator">&gt;</span> <span class="number">10</span><span class="operator">,</span> </span><br><span class="line">   <span class="built_in">ScientificForm</span><span class="punctuation">[</span><span class="variable">num</span><span class="operator">,</span> <span class="number">6</span><span class="operator">,</span> <span class="built_in">NumberFormat</span> <span class="operator">-&gt;</span> <span class="punctuation">(</span><span class="built_in">Row</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="type">#1</span><span class="operator">,</span> <span class="string">&quot;e&quot;</span><span class="operator">,</span> <span class="type">#3</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">&amp;</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="operator">//</span> </span><br><span class="line">     <span class="built_in">ToString</span> <span class="operator">//</span> <span class="built_in">StringReplace</span><span class="punctuation">[</span><span class="type">#</span><span class="operator">,</span> <span class="string">&quot;.e&quot;</span> <span class="operator">-&gt;</span> <span class="string">&quot;.0e&quot;</span><span class="punctuation">]</span> <span class="operator">&amp;,</span> <span class="built_in">ToString</span><span class="operator">@</span><span class="variable">num</span><span class="punctuation">]</span><span class="operator">;</span></span><br></pre></td></tr></table></figure>
<p>废话有点多了。。。最终再来测试下速度</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">testfunc</span><span class="punctuation">[</span><span class="type">num_</span><span class="punctuation">]</span> <span class="operator">:=</span> </span><br><span class="line"> <span class="built_in">Block</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">data</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="variable">i</span><span class="operator">,</span> <span class="variable">time</span><span class="operator">,</span> <span class="variable">str</span><span class="punctuation">&#125;</span><span class="operator">,</span> </span><br><span class="line">  <span class="built_in">AbsoluteTiming</span><span class="punctuation">[</span><span class="variable">str</span> <span class="operator">=</span> <span class="built_in">OpenWrite</span><span class="punctuation">[</span><span class="string">&quot;test.csv&quot;</span><span class="punctuation">]</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span> </span><br><span class="line">    <span class="built_in">Do</span><span class="punctuation">[</span><span class="variable">list</span> <span class="operator">=</span> <span class="variable">Num2Str</span> <span class="operator">/@</span> <span class="punctuation">&#123;</span><span class="variable">i</span><span class="operator">,</span> <span class="number">10.</span><span class="operator">^-</span><span class="number">7</span> <span class="variable">i</span><span class="punctuation">&#125;</span><span class="operator">;</span> </span><br><span class="line">     <span class="built_in">WriteString</span><span class="punctuation">[</span><span class="variable">str</span><span class="operator">,</span> <span class="variable">list</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;,&quot;</span> <span class="operator">&lt;&gt;</span> <span class="variable">list</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">]</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++,</span> </span><br><span class="line">     <span class="variable">num</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line">    <span class="built_in">Close</span><span class="punctuation">[</span><span class="variable">str</span><span class="punctuation">]</span><span class="operator">;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data = Table[&#123;n, testfunc[n]&#125;, &#123;n, 10000, 100000, 10000&#125;];</span><br><span class="line">ListLinePlot[data]</span><br></pre></td></tr></table></figure>
<p>时间明显减少很多，并且线性更强。对比一下 <code>AppendTo</code>
的结果，感动。</p>
<p>最终敲定，在 Mathematica 循环输出科学计数法数据</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="comment">(*数值格式转换*)</span></span><br><span class="line"><span class="variable">Num2Str</span><span class="punctuation">[</span><span class="type">num_</span><span class="punctuation">]</span> <span class="operator">:=</span> </span><br><span class="line">  <span class="built_in">If</span><span class="punctuation">[</span><span class="number">1</span> <span class="operator">&gt;</span> <span class="operator">=</span><span class="variable">num</span> <span class="operator">||</span> <span class="variable">num</span> <span class="operator">&gt;</span> <span class="number">10</span><span class="operator">,</span> </span><br><span class="line">   <span class="built_in">ScientificForm</span><span class="punctuation">[</span><span class="variable">num</span><span class="operator">,</span> <span class="number">6</span><span class="operator">,</span> <span class="built_in">NumberFormat</span> <span class="operator">-&gt;</span> <span class="punctuation">(</span><span class="built_in">Row</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="type">#1</span><span class="operator">,</span> <span class="string">&quot;e&quot;</span><span class="operator">,</span> <span class="type">#3</span><span class="punctuation">&#125;</span><span class="punctuation">]</span> <span class="operator">&amp;</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="operator">//</span> </span><br><span class="line">     <span class="built_in">ToString</span> <span class="operator">//</span> <span class="built_in">StringReplace</span><span class="punctuation">[</span><span class="type">#</span><span class="operator">,</span> <span class="string">&quot;.e&quot;</span> <span class="operator">-&gt;</span> <span class="string">&quot;.0e&quot;</span><span class="punctuation">]</span> <span class="operator">&amp;,</span> <span class="built_in">ToString</span><span class="operator">@</span><span class="variable">num</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*文件流写入时间测试函数*)</span></span><br><span class="line"><span class="variable">testfunc</span><span class="punctuation">[</span><span class="type">num_</span><span class="punctuation">]</span> <span class="operator">:=</span> </span><br><span class="line"> <span class="built_in">Block</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">data</span> <span class="operator">=</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="variable">i</span><span class="operator">,</span> <span class="variable">time</span><span class="operator">,</span> <span class="variable">str</span><span class="punctuation">&#125;</span><span class="operator">,</span> </span><br><span class="line">  <span class="built_in">AbsoluteTiming</span><span class="punctuation">[</span><span class="variable">str</span> <span class="operator">=</span> <span class="built_in">OpenWrite</span><span class="punctuation">[</span><span class="string">&quot;test.csv&quot;</span><span class="punctuation">]</span><span class="operator">;</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span> </span><br><span class="line">    <span class="built_in">Do</span><span class="punctuation">[</span><span class="variable">list</span> <span class="operator">=</span> <span class="variable">Num2Str</span> <span class="operator">/@</span> <span class="punctuation">&#123;</span><span class="variable">i</span><span class="operator">,</span> <span class="number">10.</span><span class="operator">^-</span><span class="number">7</span> <span class="variable">i</span><span class="punctuation">&#125;</span><span class="operator">;</span> </span><br><span class="line">     <span class="built_in">WriteString</span><span class="punctuation">[</span><span class="variable">str</span><span class="operator">,</span> <span class="variable">list</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;,&quot;</span> <span class="operator">&lt;&gt;</span> <span class="variable">list</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span> <span class="operator">&lt;&gt;</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">]</span><span class="operator">;</span> <span class="variable">i</span><span class="operator">++,</span> </span><br><span class="line">     <span class="variable">num</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line">    <span class="built_in">Close</span><span class="punctuation">[</span><span class="variable">str</span><span class="punctuation">]</span><span class="operator">;</span><span class="punctuation">]</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">(*性能测试*)</span></span><br><span class="line"><span class="variable">data</span> <span class="operator">=</span> <span class="built_in">Table</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="variable">n</span><span class="operator">,</span> <span class="variable">testfunc</span><span class="punctuation">[</span><span class="variable">n</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="operator">,</span> <span class="punctuation">&#123;</span><span class="variable">n</span><span class="operator">,</span> <span class="number">10000</span><span class="operator">,</span> <span class="number">100000</span><span class="operator">,</span> <span class="number">10000</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="operator">;</span></span><br><span class="line"><span class="built_in">ListLinePlot</span><span class="punctuation">[</span><span class="variable">data</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>群友提供的另外一种转换方式 <code>ToString[1.23*^45, CForm]</code></p>
<hr />
<p>懒得补图了，就酱🤣。</p>
]]></content>
  </entry>
  <entry>
    <title>ABAQUS非线性屈曲</title>
    <url>//61/</url>
    <content><![CDATA[<p><img
src="https://image.pencilq.com/images/2020/03/19/c254353a032ddce4086efa6f3240692b.png" /></p>
<span id="more"></span>
<h2 id="线性屈曲与非线性屈曲的区别">线性屈曲与非线性屈曲的区别</h2>
<ul>
<li><p><strong>线性（特征值）分析</strong>。线性屈曲分析产生一组特征值和相应的模态。当载荷乘以这些特征值时，得到按比例缩放的载荷条件，这代表了引起屈曲的条件。模态形状是归一化的位移，其表示弯曲结构的构型。</p></li>
<li><p><strong>非线性分析</strong>。在非线性静态屈曲分析过程中，总载荷将递增施加。每次增加时都会评估刚度和响应。在每个增量步之间，刚度可能由于以下影响而改变：</p>
<ul>
<li><strong>P-Delta效应</strong>，涉及横向弯曲和剪切行为中的拉伸应力或压缩应力。</li>
<li><strong>大位移效应</strong>，在组装平衡方程时要考虑变形构型。</li>
<li><strong>非线性材料行为</strong>，本构模型包含非线性响应。</li>
</ul></li>
<li><p><strong>比较</strong>。由于非线性静态屈曲分析在产生屈曲响应时会考虑材料的非线性，因此结果通常比线性屈曲分析的结果更为真实。<a
href="https://wiki.csiamerica.com/display/kb/Nonlinear+buckling">参考自网页</a></p></li>
</ul>
<p><img
src="https://image.pencilq.com/images/2020/03/19/LinearBucklevsNonlinearBuckle.jpg" /></p>
<p>图片取自<a
href="https://www.researchgate.net/post/Arc_length_method_for_non_linear_buckling_Nonlin-FEM_in_ANSYS_Is_there_any_way_I_can_continue_the_Simulation_beyond_the_critical_point">researchgate</a></p>
<h2 id="在abaqus中实现非线性屈曲">在ABAQUS中实现非线性屈曲</h2>
<p>要在ABAQUS中实现非线性屈曲，则要施加初始缺陷或者扰动，而施加的扰动选为特征值屈曲中得到的模态乘以一个系数。</p>
<ol type="1">
<li><p>建立模型</p></li>
<li><p>点击主菜单栏，Model-&gt;Edit Keywords，打开编辑界面后，找到*END
STEP 语句，在它之前添加两行语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*NODE FILE</span><br><span class="line">U</span><br><span class="line">*End Step</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这一步的目的是得到特征屈曲的模态的节点位移，即.fil和.prt文件。 3.
复制旧模型，作为非线性屈曲的Model。你可以添加非线性性质，比如添加材料非线性，开启几何非线性等，删除旧Step，新建一个Static
General或者Riks分析步都可以。</p>
<ol start="4" type="1">
<li><p>点击主菜单栏，Model-&gt;Edit Keywords，打开编辑界面后，找到*End
Assembly 语句，在它之后添加两行语句，施加初始缺陷：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">*End Assembly</span><br><span class="line">*IMPERFECTION,FILE=Name,STEP=1</span><br><span class="line">1,0.01</span><br></pre></td></tr></table></figure>
<p>其中Name是.fil和.prt的文件名，不需带后缀。</p>
<p>STEP也可不指定，默认Name.fil文件中的最后一个分析步。</p>
<p>1，0.01表示将模态1的位移乘0.01作为初始缺陷施加到非线性屈曲分析当中。</p></li>
<li><p>提交分析，完成</p></li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>关于LaTeX公式转换和输入的那些事</title>
    <url>//63/</url>
    <content><![CDATA[<blockquote>
<p>记录和比较 LaTeX 公式的转换和输入方法 1. 第一部分为核心内容：1）使用
Pandoc 将 LaTeX 公式转 Word公式；2）使用 Mathpix 实时编辑预览公式。 2.
第二部分简单对比下其它公式输入或者转换工具（如 Mathtype）的效果。 3.
第三部分对比其它工具（如Typora）的公式实时预览效果。 4.
第四部分为相关链接。</p>
</blockquote>
<span id="more"></span>
<h2 id="latex-公式转换以及输入">LaTeX 公式转换以及输入</h2>
<p>以下公式将作为本文例子。 &gt;
为测试不同的工具效果，公式中部分符号为特意选取。</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;equation&#125;</span><br><span class="line"><span class="keyword">\llbracket</span><span class="keyword">\mathrm</span>&#123;F&#125;<span class="built_in">_</span>&#123;<span class="keyword">\cdot</span> j&#125;<span class="built_in">^</span>&#123;i&#125;<span class="keyword">\rrbracket</span></span><br><span class="line">=<span class="keyword">\left</span>[</span><br><span class="line"><span class="keyword">\begin</span>&#123;array&#125;&#123;ccc&#125;</span><br><span class="line"><span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;1&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;1&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;1&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;2&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;1&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;3&#125;&#125; <span class="keyword">\\</span></span><br><span class="line"><span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;2&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;1&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;2&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;2&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;2&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;3&#125;&#125; <span class="keyword">\\</span></span><br><span class="line"><span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;3&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;1&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;3&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;2&#125;&#125; <span class="built_in">&amp;</span> <span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> x<span class="built_in">^</span>&#123;3&#125;&#125;&#123;<span class="keyword">\partial</span> X<span class="built_in">^</span>&#123;3&#125;&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;array&#125;</span><br><span class="line"><span class="keyword">\right</span>]</span><br><span class="line"><span class="keyword">\end</span>&#123;equation&#125;</span><br></pre></td></tr></table></figure>
<p><span class="math display">\[
[\![\mathrm{F}_{\cdot j}^{i}]\!]
=\left[
\begin{array}{ccc}
\frac{\partial x^{1}}{\partial X^{1}} &amp; \frac{\partial
x^{1}}{\partial X^{2}} &amp; \frac{\partial x^{1}}{\partial X^{3}} \\
\frac{\partial x^{2}}{\partial X^{1}} &amp; \frac{\partial
x^{2}}{\partial X^{2}} &amp; \frac{\partial x^{2}}{\partial X^{3}} \\
\frac{\partial x^{3}}{\partial X^{1}} &amp; \frac{\partial
x^{3}}{\partial X^{2}} &amp; \frac{\partial x^{3}}{\partial X^{3}}
\end{array}
\right]
\]</span></p>
<h3 id="使用pandoc-latex转word">使用Pandoc LaTeX转Word</h3>
<p><a
href="https://github.com/jgm/pandoc/releases">下载</a>安装版或者便携版的pandoc，在命令行中使用<code>pandoc input.tex -o output.docx</code>可以直接将<code>.tex</code>文件转换为<code>.docx</code>文件。注意：如果出现公式转换失败，则可能是
LaTeX 语法使用不当造成的，此时可以根据 cmd 的报错进行修改。</p>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/pandoc1.gif"
alt="直接在命令行中转换" />
<figcaption aria-hidden="true">直接在命令行中转换</figcaption>
</figure>
<p>如果有些地方需要修改，可以在 Word 中转换公式的形式，修改更方便</p>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/word-eq-edit.gif"
alt="在Word中转换公式的形式" />
<figcaption aria-hidden="true">在Word中转换公式的形式</figcaption>
</figure>
<p>为了方便，顺手写了一个 bat 脚本，可以直接将 tex 文件拖动到 bat
上进行转换。 &gt;复制下面代码，另存为 <code>xxx.bat</code> 文件即可。
&gt;也可以直接<a
href="https://www.jianguoyun.com/p/DfA8YkkQytvsBhjc25oD">下载打包了
Pandoc 的文件</a> (访问密码 : 4d1v3w)</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> off</span><br><span class="line"><span class="keyword">for</span> <span class="variable">%%a</span> <span class="keyword">in</span> (%*) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%%~</span>fa</span><br><span class="line">::<span class="built_in">echo</span> <span class="variable">%%~</span>xa</span><br><span class="line"><span class="keyword">if</span> &quot;<span class="variable">%%~</span>xa&quot;==&quot;.tex&quot; (</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%%~</span>nxa</span><br><span class="line">pandoc &quot;<span class="variable">%%~</span>fa&quot; -o &quot;<span class="variable">%%~</span>na.docx&quot; ))</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/pandoc2.gif"
alt="使用脚本批量转换" />
<figcaption aria-hidden="true">使用脚本批量转换</figcaption>
</figure>
<h3 id="mathpix-公式实时预览">Mathpix 公式实时预览</h3>
<p><a href="https://mathpix.com/">Mathpix</a>
是一款十分优秀的公式截图识别工具，客户端还拥有简单的 LaTeX
公式编辑功能。支持一些特殊的符号以及公式环境。公式编辑参考下图</p>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/mathpix1.gif"
alt="Mathpix 直接编辑公式" />
<figcaption aria-hidden="true">Mathpix 直接编辑公式</figcaption>
</figure>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/mathpix2.gif"
alt="Mathpix 识别后编辑公式" />
<figcaption aria-hidden="true">Mathpix 识别后编辑公式</figcaption>
</figure>
<h2 id="latex-转-word-公式的其它方法">LaTeX 转 Word 公式的其它方法</h2>
<p>有的人可能说 LaTeX 转 MathML
就可以啦。实际上，一些比较简单的的确可以，但是遇到复杂的或者特殊符号，比如矩阵符号，积分符号，以及上面的双重括号，就无能为力了。例如上面的公式，转换出来惨不忍睹。</p>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/mathml1.gif"
alt="LaTeX转MathML效果" />
<figcaption aria-hidden="true">LaTeX转MathML效果</figcaption>
</figure>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/mathml_pandoc.jpg"
alt="LaTeX 转 MathML与Pandoc转换效果对比" />
<figcaption aria-hidden="true">LaTeX 转
MathML与Pandoc转换效果对比</figcaption>
</figure>
<p>Markdown编辑器（如Typora）提供的转MathML选项以及一些在线的LaTeX转MathML网站，最后的转换效果与上面一样，惨烈翻车。</p>
<p>再对比下专业的公式编辑器 MathType 和 AxMath，除了
<code>\llbracket</code> 等特殊符号以及 <code>aligned</code>
等公式环境无法转换外，整体效果还可以。但这并不是 Word 的原生公式。</p>
<figure>
<img src="https://image.pencilq.com/images/2020/05/20/ax_type.jpg"
alt="MathType和AxMath转换对比" />
<figcaption aria-hidden="true">MathType和AxMath转换对比</figcaption>
</figure>
<p><strong>所以，转换效果还是 Pandoc 最好。</strong></p>
<h2 id="实时预览latex公式的其它方法">实时预览LaTeX公式的其它方法</h2>
<p>先放结论，特殊符号以及公式环境支持比较好的仍然是
Mathpix，下面放对比图</p>
<figure>
<img
src="https://image.pencilq.com/images/2020/05/20/compart_TS_compress.jpg"
alt="工具输入效果对比" />
<figcaption aria-hidden="true">工具输入效果对比</figcaption>
</figure>
<blockquote>
<p>注意： 1.
大部分专业的Latex编辑器或者插件都可以实现公式实时预览，本文就Word中的输入讨论。
2.
文章仅就个别例子进行讨论，并未全面测试。相关工具根据自身需求以及实际使用效果选择即可。</p>
</blockquote>
<h2 id="相关链接">相关链接</h2>
<ol type="1">
<li>MathType 下载地址 https://masuit.com/1230</li>
<li>AxMath 下载地址 https://masuit.com/1280</li>
<li>Typora 下载地址 https://typora.io/</li>
<li>MathPix 的免费使用方法 https://pencilq.com/58/</li>
<li>Pandoc 以及 LaTeX 转 Word 批处理示例脚本<a
href="https://www.jianguoyun.com/p/DfA8YkkQytvsBhjc25oD">打包</a>
(访问密码 : 4d1v3w)</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>通过LaTeX发行版直接转换和查看EPS</title>
    <url>//64/</url>
    <content><![CDATA[<p>有的投稿系统要求 EPS 格式图片，本文记录
PNG、JPG转换到EPS，以及一键查看EPS 的编译效果批处理脚本。 &gt;
测试环境：Win10、CTeX/TexLive</p>
<span id="more"></span>
<h2 id="演示转换和查看">演示转换和查看</h2>
<figure>
<img src="https://image.pencilq.com/images/2020/05/21/about_eps.gif"
alt="一键转换和查看EPS" />
<figcaption aria-hidden="true">一键转换和查看EPS</figcaption>
</figure>
<p>演示动图中的测试文件下载链接
https://www.jianguoyun.com/p/DYDmMHIQytvsBhiNjJsD (访问密码 :
mvegv1)</p>
<blockquote>
<p>下面两节为具体说明。</p>
</blockquote>
<h2 id="png-jpg转eps">PNG JPG转EPS</h2>
<p>直接通过发行版提供的 <code>bmeps</code> 和
<code>sam2p</code>转换。参考<a
href="https://www.zhihu.com/question/24975110/answer/29650371">刘海洋的回答</a></p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">bmeps -c foo.png foo.eps</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">sam2p foo.png foo.eps</span><br></pre></td></tr></table></figure>
<p>批量转换文件夹内所有的 PNG、JPG 为 EPS。复制下面代码，另存为
<code>xxx.bat</code> 文件即可。</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem 关闭输出</span></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /b *.png *.jpg *.jpeg&#x27;) <span class="keyword">do</span> (</span><br><span class="line">	@<span class="built_in">echo</span> <span class="variable">%%i</span></span><br><span class="line">	bmeps -c <span class="variable">%%i</span> <span class="variable">%%~</span>ni.eps</span><br><span class="line"><span class="comment">	rem sam2p %%i %%~ni.eps</span></span><br><span class="line">	)	</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<h2 id="查看eps的转换效果">查看EPS的转换效果</h2>
<p>使用 <code>xelatex xxx.tex</code>
编译查看EPS。目的为检验上一步转换出来的 EPS 是否有问题。</p>
<p>下面脚本：1）直接创建一个 test.tex 文件，包含文件夹内所有的 EPS
文件名；2）使用 xelatex 进行编译；3）完成后打开 PDF 进行查看。</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">del</span> test.tex</span><br><span class="line"><span class="built_in">echo</span> \documentclass&#123;article&#125;&gt;&gt;test.tex</span><br><span class="line"><span class="built_in">echo</span> \usepackage&#123;graphicx&#125;&gt;&gt;test.tex</span><br><span class="line"><span class="built_in">echo</span> \begin&#123;document&#125; &gt;&gt; test.tex</span><br><span class="line"><span class="built_in">echo</span>.&gt;&gt;test.tex</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /b *.eps&#x27;) <span class="keyword">do</span> (</span><br><span class="line">	<span class="built_in">echo</span> \begin&#123;figure&#125; &gt;&gt; test.tex</span><br><span class="line">	<span class="built_in">echo</span> \centering &gt;&gt; test.tex</span><br><span class="line">	<span class="built_in">echo</span> \includegraphics[width=<span class="number">0</span>.<span class="number">8</span>\textwidth]&#123;<span class="variable">%%i</span>&#125; &gt;&gt; test.tex</span><br><span class="line">	<span class="built_in">echo</span> \caption&#123;<span class="variable">%%i</span>&#125; &gt;&gt; test.tex</span><br><span class="line">	<span class="built_in">echo</span> \end&#123;figure&#125; &gt;&gt; test.tex</span><br><span class="line">	<span class="built_in">echo</span>.&gt;&gt;test.tex</span><br><span class="line">	)	</span><br><span class="line">	</span><br><span class="line"><span class="built_in">echo</span> \end&#123;document&#125; &gt;&gt; test.tex</span><br><span class="line">xelatex test.tex</span><br><span class="line"><span class="built_in">start</span> &quot;&quot; test.pdf</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>Quicker+C#实现划词翻译</title>
    <url>//65/</url>
    <content><![CDATA[<p>一直想给 Quicker 的<a
href="https://getquicker.net/sharedaction?code=b0d1a134-8284-4a44-d1be-08d746da5869">沙拉查词动作</a>加个划词小图标，实现真正的划词翻译。</p>
<p><strong>类似的划词翻译：</strong></p>
<span id="more"></span>
<ul>
<li><p>知云文献翻译：选中文本之后就自动显示翻译 <img
src="https://image.pencilq.com/images/2020/07/03/zhiyun.gif" /></p></li>
<li><p>有道词典，欧路词典，金山词霸等：选中文本后在鼠标旁边出现一个小图标，点击图标就可以翻译
<img
src="https://image.pencilq.com/images/2020/07/03/youdao.gif" /></p></li>
</ul>
<p>目前实现的效果： <video src="https://file.pencilq.com/videos/quicker_select_icon.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster=""></video>
体验跟有道差太多了😭用的话勉强能用。。。。</p>
<p>下面就简单记录下实现的思路(→_→)</p>
<h2 id="识别划词">识别划词</h2>
<p>网上有的说使用系统接口，或者调用金山词霸的
dll。看得有点混乱，难下手。</p>
<p>于是决定换一个简单但不完美的思路——<strong>监听鼠标的左键事件</strong>。
Quicker 恰好提供了按键检测模块，现成的轮子美滋滋(￣y▽,￣)╭</p>
<p>划词一共有两种状态，满足下面这两种状态则模拟 Ctrl+C
获取文本，获取文本成功就是划词成功了。</p>
<ul>
<li>鼠标移动划词
<ul>
<li>鼠标左键长时间按下</li>
<li>鼠标位置变化</li>
</ul></li>
<li>鼠标双击取词
<ul>
<li>鼠标左键短时间按下两次</li>
<li>鼠标位置不变</li>
</ul></li>
</ul>
<p>按照上面的思路，简单画一个实现流程 <img
src="https://image.pencilq.com/images/2020/07/03/mouse_left.png" /></p>
<figure>
<img
src="https://image.pencilq.com/images/2020/07/03/Quicker_select.png"
alt="太长我也没眼看了😳" />
<figcaption aria-hidden="true">太长我也没眼看了😳</figcaption>
</figure>
<p>到这一步的话大概就是知云文献翻译的效果。 <video src="https://file.pencilq.com/videos/quicker_select_Noicon.mp4" preload="metadata" controlslist="nodownload" controls playsinline poster=""></video></p>
<h2 id="划词图标">划词图标</h2>
<p>划词小图标简单的实现想法：在划词后，弹出一个小窗口，小窗口的位置在鼠标附近。</p>
<p>在 Quicker 动作中写窗口的话首选 C# 了（Quicker 支持运行 C#
代码，并且动作库中也有不少 C#实现的动作），于是决定尝试下
C#，写一个小窗口就溜。</p>
<blockquote>
<p>零基础第一步：以前看到 C# 脑里会变成 C 井 🤣，查了下原来叫 C
Sharp。（菜鸡说起都是泪）</p>
<p>第二步：B 站白嫖入门教程。一开始看 B 站的<a
href="https://www.bilibili.com/video/BV1wx411K7rb">C#语言入门详解</a>，没看一点就原地螺旋升天睡着了。不过好歹也知道自己需要的是
C# 的 WinForm 程序。</p>
<p>第三步：C# WinForm 教程。再次来到学习网站 B 站，<a
href="https://www.bilibili.com/video/BV1d7411F7PG">C# WinForm 图形界面
GUI 编程<em>62 集视频教程
(桌面开发)</em>阿发你好</a>🤣🤣。实际上也没看多少，看了前面几个就差不多弄一个比较理想的窗口了。</p>
<p>第四步：特定问题。一些特定的问题，直接搜索参考（抄袭）别人的解决方案就行。</p>
</blockquote>
<p>程序中只涉及两个部分，主窗口和按钮。</p>
<ul>
<li><p>主窗口：大小约在 40*40
像素，隐藏顶部标题栏，背景透明，鼠标附近弹出置顶。</p></li>
<li><p>按钮：铺满主窗口，设置背景图片。</p></li>
</ul>
<p>实现逻辑：</p>
<ol type="1">
<li>检测到划词操作成功后，则运行 C# 程序，在鼠标附近弹出且置顶。</li>
<li>如果鼠标点击划词图标（按钮），那么关闭窗口，并且给 Quicker
返回成功触发值。</li>
<li>如果鼠标点击了图标外部，使得图标失去了焦点，那么关闭窗口，并且给
Quicker 返回未成功触发值。</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引用必要的命名空间</span></span><br><span class="line">using System.Drawing;</span><br><span class="line">using System.Windows.Forms;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Quicker将会调用的函数</span></span><br><span class="line">public <span class="type">static</span> <span class="type">void</span> <span class="title function_">Exec</span><span class="params">(Quicker.Public.IStepContext context)</span></span><br><span class="line">&#123;</span><br><span class="line">    var getBitmp = context.GetVarValue(<span class="string">&quot;saladictImg&quot;</span>);  <span class="comment">// 读取动作里的变量值</span></span><br><span class="line">    Image pic = getBitmp as Image;</span><br><span class="line">    Saladict.icon = pic;</span><br><span class="line">    Saladict form = new Saladict();</span><br><span class="line">    form.ShowDialog();</span><br><span class="line">    <span class="type">bool</span> trigger = Saladict.triggerSuccess;</span><br><span class="line">    context.SetVarValue(<span class="string">&quot;CSharpTrigger&quot;</span>, trigger); <span class="comment">// 向变量里输出值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public partial <span class="class"><span class="keyword">class</span> <span class="title">Saladict</span> :</span> Form</span><br><span class="line">&#123;</span><br><span class="line">    public <span class="type">static</span> <span class="type">bool</span> triggerSuccess = <span class="literal">false</span>;</span><br><span class="line">    public <span class="type">static</span> Image icon;</span><br><span class="line"></span><br><span class="line">    public <span class="title function_">Saladict</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        InitializeComponent();</span><br><span class="line">        this.CloseButton.BackgroundImage = icon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">void</span> <span class="title function_">Saladict_Load</span><span class="params">(object sender, EventArgs e)</span></span><br><span class="line">    &#123;</span><br><span class="line">        var _point = new System.Drawing.Point(Cursor.Position.X, Cursor.Position.Y);</span><br><span class="line">        Top = _point.Y;</span><br><span class="line">        Left = _point.X;</span><br><span class="line"></span><br><span class="line">        this.BackColor = Color.Black;</span><br><span class="line">        this.TransparencyKey = Color.Black;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">void</span> <span class="title function_">Clicked</span><span class="params">(object sender, EventArgs e)</span></span><br><span class="line">    &#123;</span><br><span class="line">        triggerSuccess = <span class="literal">true</span>;</span><br><span class="line">        this.Deactivate -= LoseFocus;</span><br><span class="line">        <span class="comment">// MessageBox.Show(triggerSuccess.ToString());</span></span><br><span class="line">        this.Close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="type">void</span> <span class="title function_">LoseFocus</span><span class="params">(object sender, EventArgs e)</span></span><br><span class="line">    &#123;</span><br><span class="line">        triggerSuccess = <span class="literal">false</span>;</span><br><span class="line">        this.Deactivate -= LoseFocus;</span><br><span class="line">        <span class="comment">// MessageBox.Show(triggerSuccess.ToString());</span></span><br><span class="line">        this.Close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// &lt;summary&gt;</span></span><br><span class="line">    <span class="comment">/// 必需的设计器变量。</span></span><br><span class="line">    <span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">    private System.ComponentModel.IContainer components = null;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// &lt;summary&gt;</span></span><br><span class="line">    <span class="comment">/// 清理所有正在使用的资源。</span></span><br><span class="line">    <span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;param name=&quot;disposing&quot;&gt;如果应释放托管资源，为 true；否则为 false。&lt;/param&gt;</span></span><br><span class="line">    protected override <span class="type">void</span> <span class="title function_">Dispose</span><span class="params">(<span class="type">bool</span> disposing)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (disposing &amp;&amp; (components != null))</span><br><span class="line">        &#123;</span><br><span class="line">            components.Dispose();</span><br><span class="line">        &#125;</span><br><span class="line">        base.Dispose(disposing);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#region Windows 窗体设计器生成的代码</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// &lt;summary&gt;</span></span><br><span class="line">    <span class="comment">/// 设计器支持所需的方法 - 不要修改</span></span><br><span class="line">    <span class="comment">/// 使用代码编辑器修改此方法的内容。</span></span><br><span class="line">    <span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">    private <span class="type">void</span> <span class="title function_">InitializeComponent</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        this.CloseButton = new System.Windows.Forms.Button();</span><br><span class="line">        this.SuspendLayout();</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// CloseButton</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        this.CloseButton.BackColor = System.Drawing.Color.Transparent;</span><br><span class="line">        this.CloseButton.BackgroundImageLayout = System.Windows.Forms.ImageLayout.Stretch;</span><br><span class="line">        this.CloseButton.FlatAppearance.BorderSize = <span class="number">0</span>;</span><br><span class="line">        this.CloseButton.FlatAppearance.MouseDownBackColor = System.Drawing.Color.Transparent;</span><br><span class="line">        this.CloseButton.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent;</span><br><span class="line">        this.CloseButton.FlatStyle = System.Windows.Forms.FlatStyle.Flat;</span><br><span class="line">        this.CloseButton.ForeColor = System.Drawing.Color.Transparent;</span><br><span class="line">        this.CloseButton.Location = new System.Drawing.Point(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        this.CloseButton.Margin = new System.Windows.Forms.Padding(<span class="number">0</span>);</span><br><span class="line">        this.CloseButton.MaximumSize = new System.Drawing.Size(<span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">        this.CloseButton.MinimumSize = new System.Drawing.Size(<span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">        this.CloseButton.Name = <span class="string">&quot;CloseButton&quot;</span>;</span><br><span class="line">        this.CloseButton.Size = new System.Drawing.Size(<span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">        this.CloseButton.TabIndex = <span class="number">0</span>;</span><br><span class="line">        this.CloseButton.UseVisualStyleBackColor = <span class="literal">false</span>;</span><br><span class="line">        this.CloseButton.Click += new System.EventHandler(this.Clicked);</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// Saladict</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        this.AutoScaleDimensions = new System.Drawing.SizeF(<span class="number">8F</span>, <span class="number">15F</span>);</span><br><span class="line">        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;</span><br><span class="line">        this.AutoSize = <span class="literal">true</span>;</span><br><span class="line">        this.BackgroundImageLayout = System.Windows.Forms.ImageLayout.None;</span><br><span class="line">        this.ClientSize = new System.Drawing.Size(<span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">        this.Controls.Add(this.CloseButton);</span><br><span class="line">        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;</span><br><span class="line">        this.MaximumSize = new System.Drawing.Size(<span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">        this.MinimumSize = new System.Drawing.Size(<span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">        this.Name = <span class="string">&quot;Saladict&quot;</span>;</span><br><span class="line">        this.ShowInTaskbar = <span class="literal">false</span>;</span><br><span class="line">        this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;</span><br><span class="line">        this.TopMost = <span class="literal">true</span>;</span><br><span class="line">        this.Deactivate += new System.EventHandler(this.LoseFocus);</span><br><span class="line">        this.Load += new System.EventHandler(this.Saladict_Load);</span><br><span class="line">        this.ResumeLayout(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#endregion</span></span><br><span class="line"></span><br><span class="line">    private System.Windows.Forms.Button CloseButton;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实还存在几个令人非常不爽的问题，程序比较简陋。</p>
<ol type="1">
<li>弹出的窗口会抢占焦点</li>
<li>图标显示有锯齿</li>
<li>没有处理高分屏显示的问题。（主要是贫穷如我没有高分屏😅）</li>
</ol>
<p>实现过程中一个小插曲——这图标文件怎么存。想了两个方案</p>
<ol type="1">
<li>检查电脑特定路径中是否存在图标文件，不存在就后台下载一份。</li>
<li>把图标转成 base64 编码，以文本形式存在 Quicker
变量中，要用的时候再转回图片，传入 C#。</li>
</ol>
<p>还是第二个方案比较好一点，免得下载文件了。</p>
<h2 id="总结">总结</h2>
<p>需求才是学习的最大动力啊，用着 Quicker
附带着学了其他东西。下面总结下划词的实现。</p>
<p><strong>实现过程：</strong></p>
<ol type="1">
<li>首先要判断是否划词成功——通过监控鼠标左键状态实现。</li>
<li>其次要在划词成功后弹出划词图标——通过 C# WinForm 画一个小窗口。</li>
</ol>
<p><strong>存在问题：</strong></p>
<ol type="1">
<li>纯粹通过鼠标左键来判断划词容易误判；并且模拟 Ctrl+C
获取文本也容易在某些窗口引起误操作（例如终端窗口）。</li>
<li>划词图标抢占焦点；图标显示有锯齿；高分屏不友好。</li>
</ol>
<hr />
<p>划词图标抢占焦点的问题，虽然可通过加载鼠标挂钩获取全局坐标来判断，但是实现成本太高，响应速度也成问题，故暂时不考虑这个方案了。</p>
]]></content>
  </entry>
  <entry>
    <title>制冷小知识</title>
    <url>//66/</url>
    <content><![CDATA[<h1 id="磁制冷">磁制冷</h1>
<iframe src="https://onedrive.live.com/embed?cid=370B449BF63734D4&amp;resid=370B449BF63734D4%21128313&amp;authkey=AGHRZabo4Ce8yKI&amp;em=2" scrolling="no" border="0" frameborder="0" framespaing="0" allowfullscreen="true" width="720" height="405">
</iframe>
<span id="more"></span>
<h1 id="热电制冷">热电制冷</h1>
<p><img src="../images/工程/热电制冷.png" /></p>
<h1 id="r290-冷媒">R290 冷媒</h1>
<p><img src="../images/工程/R290冷媒.png" /></p>
<h1 id="低温空气源热泵">低温空气源热泵</h1>
<p><img src="../images/工程/低温空气源热泵.jpg" /></p>
<h1 id="电动汽车热泵空调系统">电动汽车热泵空调系统</h1>
<p><img src="../images/工程/电动汽车热泵空调系统.png" /></p>
<h1 id="气液分离">气液分离</h1>
<p><img src="../images/工程/气液分离.jpg" /></p>
]]></content>
      <tags>
        <tag>制冷</tag>
      </tags>
  </entry>
  <entry>
    <title>综述：电子膨胀阀制冷剂流量特征模型</title>
    <url>//67/</url>
    <content><![CDATA[<h2 id="阀的结构分类和功能">阀的结构分类和功能</h2>
<ul>
<li>（本文）针阀 (Neddle valve)：高精度调节</li>
<li>球阀 (Ball valve)：用于快速关闭或者控制</li>
<li>蝶阀 (Butterfly valve)：用于大管道流量调节，如自来水管道</li>
<li>止回阀 (Check valve)：气体或流体单向通过</li>
</ul>
<h2 id="本文来源">本文来源</h2>
<blockquote>
<p>译自 Hanlong Wan, Yunho Hwang, and Saikee Oh, “A Review of Electronic
Expansion Valve Correlations for Air-Conditioning and Heat Pump
Systems,” International Refrigeration and Air Conditioning Conference,
January 1, 2018, <a href="https://docs.lib.purdue.edu/iracc/1984"
class="uri">https://docs.lib.purdue.edu/iracc/1984</a>.</p>
</blockquote>
<span id="more"></span>
<p>有感：文献中虽然总结了多种用于预测电子膨胀阀质量流量的模型，但压力、温度、几何结构、制冷剂物理性质、膨胀阀的开度等等都是影响质量流量的因素，全面考虑过于复杂，模型实际上都进行了或多或少的简化。幂相关法、多项式相关法实际上就是数学中常见用于近似的级数；而人工神经网络相关法则是放弃建立近似的表达式，改用概率的思路来预测结果，减轻了确定物理原理关系的负担，但需要针对不同的情况给出大量的训练数据，在电子膨胀阀制冷剂流量方面的研究和应用相对较少。</p>
<h2 id="电子膨胀阀针阀结构">电子膨胀阀(针阀结构)</h2>
<p>分体式空调可通过该改变制冷剂流量来调节供热或者制冷能力，该功能一般通过控制压缩机转速和控制电子膨胀阀的开度来实现（也有通过结构上变容实现的，例如双缸变容、单缸变容）。</p>
<p>在电子膨胀阀之外，还有<a
href="https://zh-cn.lambdageeks.com/thermostatic-expansion-valve-concepts-and-2-faqs/">恒温膨胀阀和毛细管</a>。毛细管的开度是固定的，恒温膨胀阀的开度取决于压力，电子膨胀阀依靠温度传感器计算所需的过热。因此电子膨胀阀响应更快，性能更佳。</p>
<p>下图为电子膨胀阀的基础结构，针阀的位置由步进控制器调节，步进的程度也称为开度。通过改变针阀的位置，可以控制通过电子膨胀阀的制冷剂流量。
<img src="../images/工程/电子膨胀阀的基础结构.png"
alt="图1 电子膨胀阀的基础结构" />
其中，基于伯努利方程导出的单相流模型，已被广泛应用于描述电子膨胀阀中单向流的特性，其中质量流量
<span class="math inline">\(q\)</span> <span class="math display">\[ q =
C A \sqrt{2\rho_i (p_i - p_o)} \]</span></p>
<blockquote>
<p>$ _i $ 入口密度</p>
<p><span class="math inline">\(p_i\)</span> 入口压力</p>
<p><span class="math inline">\(p_o\)</span> 出口压力</p>
<p><span class="math inline">\(C\)</span>
流量系数，与压力、几何结构、制冷剂物理性质等有关</p>
<p><span class="math inline">\(A\)</span> 流动面积</p>
<p><span class="math display">\[ A = \frac{\pi d_c^2}{4} - \pi (H_c -
H)^2 \tan^2\alpha = \frac{\pi D^2}{4} \]</span></p>
<p><span class="math inline">\(d_c, H_c, H, \alpha\)</span>
如图所示，<span class="math inline">\(D\)</span>
为孔口直径，描述流动面积。 j 膨胀阀的开度→孔口直径<span
class="math inline">\(D\)</span>→质量流量<span
class="math inline">\(q\)</span></p>
</blockquote>
<p>关于制冷剂通过电子膨胀阀的流动特性的模型，主要基于以下三种方法建立：幂相关法、多项式拟合相关法、人工神经网络相关法。</p>
<h2 id="幂相关法">幂相关法</h2>
<p>幂相关法的核心在于用几个无量纲 <span
class="math inline">\(\pi\)</span> 群，推导出质量流量系数 <span
class="math inline">\(C\)</span> 的幂函数关联式。</p>
<p><span class="math display">\[C = a_0 \prod\limits^n_{i=1}
\pi^{a_i}_i\]</span> &gt; <span class="math inline">\(a_i (i = 0, 1,
..., n)\)</span> 为常数</p>
<p>下表为现有文献中常用的无量纲 <span class="math inline">\(\pi\)</span>
群</p>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 18%" />
<col style="width: 17%" />
<col style="width: 11%" />
<col style="width: 16%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">Chen et al. <br/>(2009, 2017)</th>
<th style="text-align: center;">Tian et al. <br/>(2015)</th>
<th style="text-align: center;">Park et al. <br/>(2007)</th>
<th style="text-align: center;">Ye et al. <br/>(2007)</th>
<th style="text-align: center;">Zhifang et al. <br/>(2007)</th>
<th style="text-align: center;">Zhang et al<br/>(2006)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\pi_1\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_i}{p_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_i-p_0}{p_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_i-p_{sat}}{p_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_i-p_{sat}}{p_c}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\dfrac{(p_i
- p_o)\sqrt{A}}{\sigma}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_i}{p_c}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\pi_2\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{T_{sub}}{T_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{T_{sub}}{T_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{T_{sub}}{T_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{T_{sub}}{T_c}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\mu_f}{D_e \sqrt{\rho_i p_i}}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{T_{sub}}{T_c}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\pi_3\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{C_{p_i}T_c \rho_i}{p_i}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\rho_i}{\rho_o}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\rho_i}{\rho_o}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{C_{p_i}T_c \rho_i}{p_c}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_o}{p_c}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\pi_4\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\mu_f}{D_{eq} \sqrt{\rho_i
p_c}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\dfrac{D_e
\sqrt{p_c \rho_i}}{\mu_i}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{H}{D}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\mu_f}{\sqrt{\rho_i p_c A}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\mu_f}{\rho_i p_c D^2_e}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\pi_5\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{D_{eq}}{D}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{D_{eq}}{D}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{D_{eq}}{D}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\alpha}{\pi}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_{sat}}{p_c}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\pi_6\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{p_{th}}{p_c}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\dfrac{D_e
p_i}{\sigma}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{D_ep_i}{\sigma}\)</span></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{\sigma}{p_c \sqrt{A}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\(\dfrac{D_e
p_i}{\sigma}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\pi_7\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(\dfrac{c_{p_i} T_c}{h_i}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\(\dfrac{p_i -
p_o}{p_c}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\pi_8\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(x\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span
class="math inline">\(x\)</span></td>
</tr>
</tbody>
</table>
<p>方法因作者和制冷剂而异，相关性通常用下面定义的相对偏差（Relative
Deviation, RD）来评估。 <span class="math display">\[RD = \frac{q_{pre}
- q_{exp}}{q_{exp}}\]</span> &gt; <span
class="math inline">\(q_{pre}\)</span> 预测质量流量 <span
class="math inline">\(q_{exp}\)</span> 试验质量流量</p>
<p>下表为不同模型的相对偏差</p>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 19%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 13%" />
<col style="width: 17%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Chen et al. <br/>(2009, 2017)</th>
<th>Tian et al. <br/>(2015)</th>
<th>Park et al.<br/> (2007)</th>
<th>Ye et al. <br/>(2007)</th>
<th>Zhifang et al. <br/>(2007)</th>
<th>Zhang et al. <br/>(2006)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>R22</td>
<td>[-5.8%, 6.2%]</td>
<td></td>
<td>[-14.5%, 14.2%]</td>
<td></td>
<td></td>
<td>[-10.7%, 9.3%]</td>
</tr>
<tr class="even">
<td>R407C</td>
<td>[-6.8%, 9.8%]</td>
<td></td>
<td></td>
<td>[-9.7%, 8.7%]</td>
<td></td>
<td>[-14.2%, 22.1%]</td>
</tr>
<tr class="odd">
<td>R410A</td>
<td>[-6.1%, 8.5%]</td>
<td></td>
<td>[-4.2%, 11.4%]</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>R134a</td>
<td></td>
<td>[-17.2%, 40.3%]</td>
<td></td>
<td></td>
<td>[-6.8%, 6.8%]</td>
<td></td>
</tr>
<tr class="odd">
<td>R245fa</td>
<td>[-15%, 15%]</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="多项式相关法">多项式相关法</h2>
<p>多项式相关法为幂相关法的简化模型，该模型认为流量系数 <span
class="math inline">\(C\)</span>
主要受过冷度和阀门开度的影响。基于该简化的质量流相关模型如下 <span
class="math display">\[ C = a_0 + a_1 x + a_2 x^2 + a_3 x \left(
\frac{T_{sub}}{T_c} \right) + a_4 \left( \frac{T_{sub}}{T_c} \right) +
a_5 \left( \frac{T_{sub}}{T_c} \right)^2 \]</span></p>
<p>用于评估的标准为相对误差(Relative Error, RE)和均方根值(Root Mean
Square, RMS)</p>
<p><span class="math display">\[ RE = \frac{C_{pre}}{C_{exp}} \]</span>
<span class="math display">\[ RMS = \sqrt{\frac{1}{n}\sum\limits^n_{i =
1}(RE)^2} \]</span></p>
<p>对于98%的数据，预测的 RE 值精度为 5%；在不同的情况下，RMS 值为
2%~3%。</p>
<h2 id="人工神经网络相关法">人工神经网络相关法</h2>
<p>人工神经网络(Artificial Neural Network, ANN)
常被用于建立几个输入和输出参数之间的未知关系。由于ANN能够在不需要显式方程的情况下解决工程应用中的物理问题，因而常被用于各个工程领域。</p>
<p>ANN
结构由一个输入层、几个隐藏层(实际上通常是一个或两个)和一个输出层组成。理论上输入神经元可以包括尽可能多的参数，但为了减少训练时间，需适当限制输入参数的数量。为确保确保变量的等价性，输入值(<span
class="math inline">\(X_i\)</span>)和输出值(<span
class="math inline">\(Y_k\)</span>)由下式归一化(<span
class="math inline">\(x_i\)</span>和<span
class="math inline">\(y_k\)</span>)</p>
<p><span class="math display">\[ x_i = 2 \left( \frac{X_i -
X_{i.min}}{X_{i, max} - X_{i.min}} \right) - 1 \]</span> <span
class="math display">\[ y_k = 2 \left( \frac{Y_k - Y_{k.min}}{Y_{k, max}
- Y_{k.min}} \right) - 1 \]</span></p>
<p>如果只有一个隐藏层，ANN 的过程可以由下式表示</p>
<p><span class="math display">\[ y_k = g_{output}  \left\{ \sum^n_{j =
1} w&#39;_{jk} \times \left[ g_{hidden} \left( \sum^n_{i = 1} w_{ij} x_i
+ b_j \right) \right] + b&#39;_k \right\}\]</span> &gt; 归一化的输入参数
<span class="math inline">\(x_i\)</span> 乘以权重 <span
class="math inline">\(w_ij\)</span>，再加上偏差 <span
class="math inline">\(b_j\)</span>，得到一个新的值 <span
class="math inline">\(x&#39;\)</span>； &gt; &gt; 通过隐藏层的传递函数
<span class="math inline">\(g_{hidden}\)</span>，获得每个隐神经元的值
<span class="math inline">\(g_{hidden}(x&#39;)\)</span>； &gt; &gt;
类似地，隐藏层的值也可以诚意另一组权重因子 <span
class="math inline">\(w&#39;_{jk}\)</span>，并于另一组偏差<span
class="math inline">\(b&#39;_k\)</span>相加，经传递函数<span
class="math inline">\(g_{output}\)</span>获取第 <span
class="math inline">\(k\)</span>个输出参数。</p>
<p>下一步是训练过程，通过重复训练得到每个神经元权重系数 <span
class="math inline">\(w_ij, w&#39;_{jk}\)</span>和 偏差<span
class="math inline">\(b_j,
b&#39;_k\)</span>的优化组，使预测数据与原始数据(如实测数据)的偏差最小，较常用的训练方法为反向传播(Back
Propagation, BP)。</p>
<p>同济大学<a
href="https://www.sciencedirect.com/science/article/abs/pii/S1359431115009837">张春路教授团队使用了
BP 算法作为 ANN
的训练方法</a>，采用一个隐藏层。其中输入参数四个：膨胀阀的入口压力、出口压力、入口过冷度和开度。隐层传递函数则选取了流行的
Tan-sigmoid 函数和具有较高精度的 <span class="math inline">\(n\)</span>
阶多项式</p>
<blockquote>
<p>Tan-sigmoid 函数 <span class="math display">\[ g_{hiden}(x) =
\frac{2}{1+e^{-2x}}-1 \]</span> <span class="math inline">\(n\)</span>
阶多项式 <span class="math display">\[ g_{hidden}(x) = x^n\]</span></p>
</blockquote>
<p>另外，上海交通大学<a
href="https://www.infona.pl/resource/bwmeta1.element.elsevier-8b73d71e-44ab-3e7a-a2bb-c3bd95dcbd61">谷波教授团队使用了
Levenberg Marquardt BP 算法作为训练算法</a>，选择的隐藏层传递函数为
Tan-sigmoid 函数和 Log-sigmoid 函数</p>
<blockquote>
<p>Log-sigmoid 函数 <span class="math display">\[ g_{hiden}(x) =
\frac{1}{1+e^{-x}} \]</span></p>
</blockquote>
<p>输入参数为 8 和无量纲的参数</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(\pi_2\)</span></th>
<th><span class="math inline">\((p_{in}-p_{out})/p_c\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\pi_3\)</span></td>
<td><span class="math inline">\(t_{sub}/t_c\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\pi_4\)</span></td>
<td><span class="math inline">\(\rho_{in}/\rho_{out}\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\pi_5\)</span></td>
<td><span class="math inline">\(d_e
\sqrt{p_c\rho_{in}}/\mu_{in}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\pi_6\)</span></td>
<td><span class="math inline">\(d_e p_{in} / \sigma\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\pi_7\)</span></td>
<td><span class="math inline">\(c_{pin}t_c/h_{in}\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(\pi_8\)</span></td>
<td><span class="math inline">\(d_e/d\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\pi_9\)</span></td>
<td><span class="math inline">\(x\)</span></td>
</tr>
</tbody>
</table>
<p>无量纲输出参数为 <span class="math display">\[ y = \pi_1 =
\frac{q}{d^2_c \sqrt{\rho_i}(p_i-p_o)} \]</span></p>
<p>每次移除一个输入参数，保留7个参数进行训练后发现，<span
class="math inline">\(\pi_6\)</span> 是影响 ANN
灵敏度和准确性的最重要因素，因为<span
class="math inline">\(\pi_6\)</span>在中包含表明张力 <span
class="math inline">\(\sigma\)</span>，代表亚稳态流。</p>
<p>两个团队评价 ANN 相关性的标准如下</p>
<blockquote>
<p>平均相对误差(mean relative error, MRE) <span
class="math display">\[MRE= \frac{1}{n}\sum
_{i=1}^{n}\frac{y_{pre}-y_{exp}}{y_{exp}}\]</span> 均方根误差 (Root Mean
Square Error, RMSE) <span class="math display">\[RMSE=
\sqrt{\frac{1}{n}\sum _{i=1}^{n}(y_{pre}-y_{exp})^{2}}\]</span> 标准偏差
(Standard Deviation, SD) <span class="math display">\[S.D.=
\sqrt{\frac{1}{N-1}\sum_{i=1}^{n}(\frac{y_{pre}-y_{exp}}{y_{exp}}-MRE)^{2}}\]</span></p>
</blockquote>
<h2 id="总结">总结</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>复杂度</th>
<th>精确度</th>
<th>使用程度</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>幂相关法</td>
<td>中</td>
<td>中</td>
<td>广泛使用</td>
</tr>
<tr class="even">
<td>多项式相关法</td>
<td>低</td>
<td>低</td>
<td>很少使用</td>
</tr>
<tr class="odd">
<td>人工神经网络相关法</td>
<td>高</td>
<td>高</td>
<td>很少使用</td>
</tr>
</tbody>
</table>
<p>最常用为幂相关法；多项式相关法为模型简化较多，使用方便，但偏差较大；人工神经网络相关法精度较高，但目前研究及应用较少。</p>
]]></content>
      <tags>
        <tag>阀</tag>
      </tags>
  </entry>
  <entry>
    <title>老坑新踩：谷歌相册导出照片到本地</title>
    <url>//68/</url>
    <content><![CDATA[<h2 id="前言">前言</h2>
<p>趁着618入手了NAS和几块硬盘，想着把照片和视频存一份在NAS里面。日常的照片全都是<a
href="https://www.coolapk.com/feed/26931317?shareKey=YzFkOWU3Nzg2Mzg0NjJjMTJjNGE">通过pixel一代同步到谷歌相册中</a>，总体积达460G+。在把这些照片备份下来的过程中一步一个坑😶‍🌫️，接下来我来好好挖挖这些槽点。</p>
<span id="more"></span>
<h2 id="稳妥的操作">稳妥的操作</h2>
<h3 id="谷歌相册数据备份导出">谷歌相册数据备份导出</h3>
<blockquote>
<p>几番摸索下来，在数据量比较大的情况下，推荐以下方法。</p>
</blockquote>
<p>谷歌账号的数据可以在 <code>https://takeout.google.com/</code>
导出，选择<code>Google相册</code>后<code>下一步</code></p>
<p><img src="../images/教程/谷歌相册导出1.jpg" /></p>
<p><code>提供方式</code>选择<code>添加到Onedrive</code>，文件的大小选择上限值<code>50GB</code>，</p>
<blockquote>
<p><strong>但是</strong></p>
<ol type="1">
<li><p>Onedrive需为个人账号，校园账号和企业账号无法关联导出。我拼车了家庭版
Office365，OneDrive有1T空间；</p></li>
<li><p>且剩余空间要足够谷歌相册文件的总体积，否则最后会有部分压缩包无法导出。</p></li>
</ol>
<p>BB：即使如此，我这导出的压缩包足足也有10个😭</p>
</blockquote>
<p><img src="../images/教程/谷歌相册导出2.jpg" /></p>
<p>关联Onedrive账号后，静待导出完成即可。</p>
<h3 id="压缩包解压">压缩包解压</h3>
<p>从谷歌相册的Takeout页面导出，并且把所有压缩包同步到本地后，将所有压缩包解压，合并，得到一个<code>takeout\google相册</code>目录，里面的照片和视频以年份和自定义相册分类在不同的文件夹中。这些媒体文件已经“净身出户”，丢失了原有的exif信息，这些exif信息被存到了同名的<code>.json</code>文件中。下一步关键的操作就是把这些<code>.json</code>文件重新合并到媒体文件中。</p>
<p><img src="../images/教程/谷歌相册导出5.jpg" /></p>
<h3 id="写入exif信息">写入exif信息</h3>
<p>现在已经有不少现成工具可以批量把<code>.json</code>文件合并到媒体文件中，有免费的，有收费的，如</p>
<ol type="1">
<li><a href="https://sspai.com/post/63675">如何导出 Google Photos
的照片</a>，评论区提到<a
href="https://github.com/TheLastGimbus/GooglePhotosTakeoutHelper">GooglePhotosTakeoutHelper</a>，<a
href="https://github.com/mattwilson1024/google-photos-exif">google-photos-exif</a></li>
<li><a
href="https://stackoverflow.com/questions/65210140/how-to-merge-json-and-google-takeout-photos-to-get-the-right-dates-back"
class="uri">https://stackoverflow.com/questions/65210140/how-to-merge-json-and-google-takeout-photos-to-get-the-right-dates-back</a></li>
<li><a
href="https://stackoverflow.com/questions/42024255/bulk-join-json-with-jpg-from-google-takeout"
class="uri">https://stackoverflow.com/questions/42024255/bulk-join-json-with-jpg-from-google-takeout</a></li>
</ol>
<p>对安装编程环境不熟悉的用户可以下载<a
href="https://github.com/TheLastGimbus/GooglePhotosTakeoutHelper">GooglePhotosTakeoutHelper</a>编译好的可执行文件<a
href="https://github.com/TheLastGimbus/GooglePhotosTakeoutHelper/releases">takeout-helper.exe</a>，在命令行中输入</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">&quot;E:\temp\takeout-helper.exe&quot; -i &quot;E:\temp\takeout\Google相册&quot; -o &quot;E:\temp\谷歌相册导出&quot;</span><br></pre></td></tr></table></figure>
<p>根据自己电脑的情况替换上面的路径，建议带上双引号""，防止路径中包含空格等特殊符号导致命令错误</p>
<ol type="1">
<li><code>E:\temp\takeout-helper.exe</code>：<code>takeout-helper.exe</code>所在的路径</li>
<li><code>E:\temp\takeout\Google相册</code>：压缩包解压合并后得到的文件夹</li>
<li><code>E:\temp\谷歌相册导出</code>：处理完成后照片和视频的导出路径</li>
</ol>
<p><a
href="https://github.com/TheLastGimbus/GooglePhotosTakeoutHelper">GooglePhotosTakeoutHelper</a>和<a
href="https://github.com/mattwilson1024/google-photos-exif">google-photos-exif</a>的命令行版本使用也比较简单，参考主页说明即可。</p>
<h3 id="检查文件">检查文件</h3>
<p>如果你不确认是否所有的文件都顺利处理好，对比下源文件夹跟输出文件夹是否有文件重复就可以。类似的查找重复文件的软件很多，例如<a
href="https://masuit.com/1776">Duplicate Cleaner</a></p>
<h2 id="踩坑操作">踩坑操作</h2>
<h4 id="坑一电子邮件下载链接">坑一：电子邮件下载链接</h4>
<p><img src="../images/教程/谷歌相册导出3.jpg" /></p>
<p>首先图中的Google云端硬盘和Dropbox免费空间都很小，付费版本价格较高，且访问需要梯。文件体积过大无法全部导出，并且拉回本地还需要消耗较多流量。
在国内，还是导出到OneDrive更适合，价格便宜更不需要梯。</p>
<p>选择<code>通过电子邮件发送下载链接</code>，谷歌会提供单独的压缩包下载链接（最后悔的尝试），要注意的问题如下：</p>
<ol type="1">
<li><strong>梯流量要足够</strong>（花了近500G的流量下载，心痛）；</li>
<li><strong>压缩包下载卡99.9%进度</strong>，如鲠在喉，如果你有自信打破卡99.9%的诅咒，尽管尝试；</li>
<li>谷歌提供的压缩包<strong>下载链接只能访问7次</strong>（大概），如果你因为各种原因点击了7次还没下载完成，恭喜你，重新导出吧😡；</li>
<li><strong>尽量选择文件上限50GB导出</strong>，减少压缩包的数量。初次尝试我选择了2GB，结果得到了118个压缩包下载链接，让人头皮发麻。</li>
</ol>
<h4 id="坑二直接导出到onedrive">坑二：直接导出到Onedrive</h4>
<p>当然，细心的你还会发现另一个导出选项</p>
<p><img src="../images/教程/谷歌相册导出4.jpg" /></p>
<p>这居然是直接把照片导出到OneDrive（不是压缩包）。然而，这也是一个大坑</p>
<ol type="1">
<li><strong>真的仅仅是导出照片</strong>，多么精准的描述，视频是无法通过这个途径导出的😊；</li>
<li>导出的照片放在OneDrive的<code>图片</code>文件夹。<code>图片</code>文件夹也是手机相册默认上传的位置，<strong>谷歌导出的图片会混在一起</strong>；</li>
<li><strong>导出的照片丢失exif信息，并且无附带<code>.json</code>文件</strong>，例如拍摄时间，地点等。(众所周知)，谷歌Takeout页面导出的媒体文件原本的exif信息单独存放于同名的<code>.json</code>文件，然而直接导出到Onedrive的时候并不包含<code>.json</code>文件，这意味着你的照片无法以正确的时间序列展示，并且其它常用于分析归类照片的exif信息也全都无了。</li>
</ol>
<h2 id="坑三本地磁盘空间不足">坑三：本地磁盘空间不足</h2>
<p>本地磁盘空间是很容易忽略的一点</p>
<ol type="1">
<li>从Onedrive把压缩包同步到本地，若本地缓存空间不足，同样会卡下载；</li>
<li>压缩包解压同上；</li>
<li>写入exif信息的时候，同样会自动把文件复制一遍到输出文件夹中，空间不足程序会中止。</li>
</ol>
<hr />
<p>谷歌相册还是很好用的，但有备无患，毕竟照片和视频记录了我人生中无数重要的时刻，怎么备份都不为过。</p>
]]></content>
  </entry>
  <entry>
    <title>NAS初体验：极空间新Z4</title>
    <url>//69/</url>
    <content><![CDATA[<p>618张大妈疯狂刷屏极空间新Z4，好奇之下我入手了一个😒，而后又入手4块希捷和西数的4T垂直监控盘，总算把盘位填满了。根据网上介绍，极空间这两年推出了不少产品，本土化不错，用户不折腾。有了之前各种网盘和自建网盘的折腾经历，极空间这个特点倒是极大地吸引了我。</p>
<blockquote>
<p>鉴于我是第一次使用NAS，没有自装NAS以及使用其它NAS产品的经历，因此无法深度横评对比，关于极空间新Z4的体验仅仅是小白用户的感受。</p>
</blockquote>
<span id="more"></span>
<h2 id="优点">优点</h2>
<p>好话说在前，先来看看优点。</p>
<ol type="1">
<li>外观</li>
</ol>
<p>Z4颜值是真的没得说😭，单是这外观就直接敲开我半个心房（流口水）。外表面星空灰铝合金，质感杠杠的。</p>
<p><img src="../images/分享/NAS-Z4.jpg" /></p>
<ol start="2" type="1">
<li>从开机到使用，全程小白式引导，跟着指引点点点毫无压力。</li>
<li>外网访问相当方便，就操作APP、查看照片、远程控制NAS的操作来说，内网外网在体验上没什么区别。之前看NAS教程，有不少提到要公网IP、穿透之类的操作，又得是一番折腾，但Z4上就没这个问题了。</li>
<li>影片信息补全归类功能相当方便，基本都能识别出来。</li>
<li>相册响应很快，人脸识别归类功能也还不错。</li>
</ol>
<p><img src="../images/分享/NAS-Z4-2.jpg" /></p>
<ol start="6" type="1">
<li>噪音相当小，搭配了4块4T
5400rpm硬盘，放小单间内噪音几乎无感（或许跟硬盘本身噪音小也有关系）。</li>
<li>分享功能很方便，不用担心被限速或者被和谐。</li>
<li>下载、迅雷、百度网盘很方便。</li>
</ol>
<h2 id="槽点">槽点</h2>
<p>Z4使用下来槽点也不少</p>
<ol type="1">
<li><p>文件管理 文件管理只能开一个窗口，无法多开(Windows端)；
文件解压只能解压到当前文件夹，并且无法批量解压，只能一个一个点击，解压过程用也无法合并文件夹；
没有类似的Ctrl+X的剪切快捷键操作</p></li>
<li><p>相册(相较于谷歌相册) 相册无法识别视频的人像并自动归类。
手机访问相册，修改人物分类和名字的时候经常显示数据库更新中导致无法保存。</p></li>
</ol>
<p><img src="../images/分享/NAS-Z4-3.jpg" /></p>
<ol start="3" type="1">
<li><p>影视
播放4k视频时，拖动进度条不太顺畅，有时出现进度条无法拖动的情况，(是我对性能要求太高了嘛)</p></li>
<li><p>阅读
阅读功能为什么只有安卓客户端才有，在ipad和Windows无法继续阅读。</p></li>
<li><p>希望加入更多网盘接口，如 Onedrive、谷歌云盘、dropbox等。</p></li>
</ol>
<h2 id="官网介绍">官网介绍</h2>
<p><a href="https://www.zspace.cn/z4/"
class="uri">https://www.zspace.cn/z4/</a></p>
<p><img src="../images/分享/NAS-Z4-4.jpg" /></p>
<h2 id="为什么要用nas">为什么要用NAS</h2>
<p>国内网盘空间够大，如百度网盘、阿里网盘、天翼网盘等，就价格来说还能接受，但其中最大的问题就是内容和谐，文件分分钟和谐不带商量的。OneDrive、谷歌云盘等国外网盘我用过不少，购买云服务器自建网盘的方案也都尝试过，最终文件还是放在自己的硬盘上更加踏实一点，能提供类似个人云盘功能的自然是NAS了（网络储存设备，Network
Attached Storage）。</p>
]]></content>
  </entry>
  <entry>
    <title>格林应变和柯西应变</title>
    <url>//7/</url>
    <content><![CDATA[<h2 id="cauchy-strain">Cauchy Strain</h2>
<p>在小变形理论中，柯西应变定义为： <span class="math display">\[
\varepsilon =\frac{1}{2} \left( U^T+ U\right)=\frac{1}{2}
(u_{i,j}+u_{j,i})
\]</span> 这是在学弹性力学时大家所熟知的应变写法。</p>
<p>弹性力学只关心与应力应变有关的形变（体积改变），而<strong>不考虑刚体转动。</strong></p>
<p><strong>小应变理论</strong>中的应变定义在连续介质力学中可以用变形梯度张量
<span class="math inline">\(\bf F\)</span> 来表示</p>
<p><span class="math display">\[
\varepsilon_{ij} = \frac{1}{2} (u_{i,j} + u_{j,i})=\frac{1}{2} (F_{ij} +
F_{ji}) - \delta_{ij}
\]</span></p>
<span id="more"></span>
<p>应变在面对转动时会遇到问题，因为</p>
<p><span class="math display">\[
\pmb \varepsilon = \frac{1}{2}(\pmb F+\pmb F^T)-\pmb I= \frac{1}{2}(\pmb
R \cdot \pmb U+\pmb U^T \cdot \pmb R^T)-\pmb I
\]</span></p>
<ul>
<li>不存在转动时，即 <span class="math inline">\(\pmb R=\pmb I\)</span>
时，有 <span class="math inline">\(\pmb{\varepsilon} = {\mathbf U} -
{\mathbf I}\)</span> ，此时应变 <span class="math inline">\(\pmb
\varepsilon\)</span> 仅仅与形变有关。</li>
<li>存在刚体转动时<span class="math inline">\(\pmb R \ne \pmb
I\)</span>，上式中的 <span class="math inline">\(\pmb R\)</span>
就会对应变产生影响，即刚体转动产生应变，这显然不对。</li>
</ul>
<p>实际上小应变理论里独用了一个张量来处理刚体转动问题</p>
<p><span class="math display">\[
{\begin{bmatrix} du \\ dv \\ dw \end{bmatrix}}
\, = \,
{\begin{bmatrix}
0 &amp; -\omega_z &amp; \omega_y \\
\omega_x &amp; 0 &amp; -\omega_x \\
-\omega_y &amp; \omega_x &amp; 0
\end{bmatrix}}
{\begin{bmatrix}
dx \\ dy \\ dz
\end{bmatrix}}
\, + \,
{\begin{bmatrix}
\varepsilon _x &amp; \frac{1}{2} \gamma _{xy} &amp; \frac{1}{2}\gamma
_{xz}\\
\frac{1}{2}\gamma _{yx} &amp; \varepsilon _y &amp; \frac{1}{2}\gamma
_{yz}\\
\frac{1}{2}\gamma _{zx} &amp; \frac{1}{2} \gamma _{zy} &amp; \varepsilon
_z
\end{bmatrix}}
{\begin{bmatrix}
dx \\ dy \\ dz
\end{bmatrix}}
\]</span></p>
<h2 id="green-strain">Green Strain</h2>
<p>而格林应变不受转动矩阵的影响。</p>
<p>由位移公式 <span class="math inline">\(u=x-X\)</span>，有</p>
<p><span class="math display">\[
{\bf F} = \frac{\partial}{\partial \bf X} \left({\bf X} + {\bf u}\right)
= { \partial {\bf X} \over \partial {\bf X} } + { \partial {\bf u} \over
\partial {\bf X} }
= {\bf I} + \frac{\partial{\bf u}}{\partial{\bf X}}
\]</span></p>
<p>这里的 <span class="math inline">\(\bf
U\)</span>（体积改变、旋转）并不是 <span class="math inline">\(\bf R
\cdot \bf U\)</span> 的 <span class="math inline">\(\bf
U\)</span>（体积改变）</p>
<p>有限应变理论中，格林应变</p>
<p><span class="math display">\[
{\bf E} = {1 \over 2} \left( {\bf F}^T \cdot {\bf F} - {\bf I} \right)
\]</span></p>
<p>其中，</p>
<p><span class="math display">\[
{\bf F}^T \cdot {\bf F}=\left( {\bf R} \cdot {\bf U} \right)^T \cdot
\left( {\bf R} \cdot {\bf U} \right) = {\bf U}^T \cdot {\bf U}
\]</span></p>
<p>因此格林应变只与形变有关。其中 <span class="math inline">\(\bf
R\)</span> 就是坐标变换矩阵</p>
<p><span class="math display">\[
\bf R^T \cdot \bf R = \bf I
\]</span></p>
<p>将</p>
<p><span class="math display">\[
{\bf E} = \dfrac{1}{2} \left({\bf F}^T \cdot {\bf F} - {\bf I} \right)
\]</span></p>
<p>写成分量形式，有</p>
<p><span class="math display">\[
E_{ij} = {1 \over 2} \left( {\partial \, u_i \over \partial X_j} +
{\partial \, u_j \over \partial X_i} + {\partial \, u_k \over \partial
X_i} {\partial \, u_k \over \partial X_j} \right)
\]</span></p>
<p>和柯西应变 <span class="math inline">\(\varepsilon_{i,j}\)</span>
比较可以发现，差别其实仅仅在于格林应变多了一个第三项，该项是二次项。该项保证了格林应变不受转动的影响。（不过在大变形下就会导致格林应变偏离工程应变
<span class="math inline">\(e = \dfrac{\Delta
L}{L}\)</span>）实际上，把格林应变放到小应变假设下，就可以省去二阶以上的高阶项，就有
<span class="math inline">\(E \approx \varepsilon\)</span> 。</p>
<p>所以，格林应变的优势就是在于将转动与形变分离开来，只关注形变。</p>
<hr />
]]></content>
  </entry>
  <entry>
    <title>鼠标触碰屏幕边缘判断逻辑——双屏幕</title>
    <url>//71/</url>
    <content><![CDATA[<p>quicker调用沙拉查词进行全局翻译的<a
href="https://getquicker.net/Sharedaction?code=b0d1a134-8284-4a44-d1be-08d746da5869">动作</a>，其中鼠标触碰屏幕边缘启动翻译的方式并没有针对多屏的情况进行适配。这主要是因为Quicker只能直接获取主屏的分辨率，而扩展屏的分辨率和组合方式都无法直接获取。</p>
<span id="more"></span>
<p>Windows有无提供接口暂不了解（😶‍🌫️懒），考虑到大多数情况下为双屏幕，在这里就用笨方法来暴力枚举双屏幕的情况吧😅。双屏幕的可能的组合方式和鼠标是否触边的判断逻辑如下图</p>
<p><img src="../images/教程/双屏幕触边判断.jpg" /></p>
<p>输入：两个屏幕的左上角和右下角坐标值。功能上只需要指引用户把鼠标放在对应的角落。</p>
<p>输出：</p>
<ol type="1">
<li><p>屏幕排列方式判断</p></li>
<li><p>鼠标位置是否在屏幕边缘的判断。</p></li>
</ol>
<p>测试的quicker动作链接：<a
href="https://getquicker.net/Sharedaction?code=d1b68b93-cce8-4f01-9c44-08da87f60bf8">双屏幕触边判断</a></p>
<hr />
<p>Quicker
支持多种编程语言混用，写起来还是挺方便的。实在懒的时候拉拉模块，填填参数也没有任何问题😂。
<img src="../images/教程/双屏幕触边判断-动作截图.jpg" /></p>
]]></content>
  </entry>
  <entry>
    <title>地图轨迹动画</title>
    <url>//72/</url>
    <content><![CDATA[<p>近期准备走一趟川西环线，联想到谷歌根据照片位置生成的热力图，根据热力图的位置分布，可以大致推算出旅行路线，那么能否通过更加直接的手段记录出行路线呢？目前常用的高德地图能够生成导航过的轨迹，但是导航数据无法导出，定制化需求（如地图类型，时长、标识等）受限。
<img src="../images/足迹可视化/Route%20Generator-result.gif"
alt="足迹图" /> <span id="more"></span> <img
src="../images/足迹可视化/谷歌热力图.jpg" alt="谷歌相册热力图" /></p>
<h2 id="需求">需求：</h2>
<p>1、能够实时后台记录定位，定位信息可导出为通用格式（如GPX格式）；</p>
<p>2、根据定位文件生成轨迹图、轨迹动画。</p>
<h2 id="工具">工具</h2>
<p>1、实时记录定位（安卓）：<a
href="https://www.lsapk.com/2716.html">Gaia GPS</a>、<a
href="https://gpslogger.app/">GPSLogger</a>、六只脚、两步路等。无论安卓还是ios，只需能将定位信息导出为通用格式的文件即可。
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="../images/足迹可视化/Gaia%20GPS.jpg" /></div><div class="group-picture-column"><img
src="../images/足迹可视化/GPSLogger.jpg" /></div></div></div></p>
<p>2、轨迹绘制-网页版：<a href="https://gpx.studio/">GPX Studio</a>、<a
href="https://www.gpsvisualizer.com/">GPS Visualizer</a>、<a
href="https://www.msimons.nl/tools/gpx_viewer/index.php">GPX
Viewer</a>、<a href="https://gpx.pelmers.com/">GPX Replay</a>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="../images/足迹可视化/GPS%20Visualizer.png" /></div><div class="group-picture-column"><img
src="../images/足迹可视化/GPX%20Replay.jpg" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img
src="../images/足迹可视化/GPX%20Studio.jpg" /></div><div class="group-picture-column"><img
src="../images/足迹可视化/GPX%20Viewer.jpg" /></div><div class="group-picture-column"><img
src="../images/足迹可视化/GPX%20Visualizer.jpg" /></div></div></div></p>
<p>3、轨迹绘制-Win客户端：<a
href="https://www.routegenerator.net/">Route Generator</a>、<a
href="https://gpx-animator.app/">GPX Animator</a> <div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="../images/足迹可视化/Route%20Generator.jpg" /></div><div class="group-picture-column"><img
src="../images/足迹可视化/GPX%20Animator.jpg" /></div></div></div></p>
<h2 id="操作示例">操作示例</h2>
<p>以下以安卓定位应用Gaia GPS和Windows可视化客户端GPX Animator为例。</p>
<p>1、导出定位记录为GPX文件 <img
src="../images/足迹可视化/GaiaGPS-顺峰山.jpg" /></p>
<p>2、GPX
Animator导入GPX文件，选择地图后渲染导出。其他设置项可停留鼠标在输入框获取说明。部分地图可能需要特殊网络环境。
值得一提的是，GPX
Animator可以自动将包含时间信息的照片插入到生成的视频中，但样式比较简陋。
<img src="../images/足迹可视化/GPXAnimator-example.png" /></p>
<h2 id="生成效果展示">生成效果展示</h2>
<h3 id="gpx-animator根据时间加速">GPX Animator（根据时间加速）</h3>
<p><img src="../images/足迹可视化/GPX-Animation-result.gif" /></p>
<h3 id="route-generator根据路程加速">Route
Generator（根据路程加速）</h3>
<p><img src="../images/足迹可视化/Route%20Generator-result.gif" /></p>
]]></content>
  </entry>
  <entry>
    <title>复习导图汇总</title>
    <url>//8/</url>
    <content><![CDATA[<h2 id="弹性力学">弹性力学</h2>
<p><img
src="https://image.pencilq.com/images/2019/05/02/5cc705cc54537.png" /></p>
<span id="more"></span>
<blockquote>
<p><a
href="https://file.pencilq.com/file_and_note/mindmap%20for%20elastic%20mechanics.html">互动视图</a></p>
</blockquote>
<hr />
<h2 id="塑性力学">塑性力学</h2>
<h3 id="精简版-by-jeff">精简版 By Jeff</h3>
<blockquote>
<p><a
href="https://file.pencilq.com/file_and_note/mindmap%20for%20plastic%20mechanics%20simplify%20by%20jeff.html">互动视图</a>
<img src="https://image.pencilq.com/images/2019/05/02/2.png" /></p>
</blockquote>
<h3 id="详细版">详细版</h3>
<blockquote>
<p><a
href="https://file.pencilq.com/file_and_note/mindmap%20for%20plastic%20mechanics%20detail.html">互动视图</a></p>
</blockquote>
<p><img src="https://image.pencilq.com/images/2019/05/02/1.png" /></p>
<h2 id="塑性力学复习总结搬运">塑性力学复习总结（搬运）</h2>
<h3 id="总结一-余同希版本">总结一 余同希版本</h3>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/summary%20for%20plastic%20mechanics%20yutongxi.pdf" data-height="500px"></div>
<h3 id="总结二">总结二</h3>
<div class="pdf-container" data-target="https://file.pencilq.com/file_and_note/summary%20for%20plastic%20mechanics.pdf" data-height="500px"></div>
]]></content>
  </entry>
  <entry>
    <title>在命令行中批处理 pdf</title>
    <url>//9/</url>
    <content><![CDATA[<p><code>需求</code>：近期有一批图由于图例太小，需要重新绘制，但只有 pdf
文件</p>
<p><code>解决方案</code>：用 PPT 画图例，再通过 PDF-XChange
将新图例覆盖上去。 <div class="note warning"><p>问题来了：LaTeX
编译时无法显示我覆盖的图片。于是推测直接写入的图片是注释的形式，而 LaTeX
编译时会忽略这部分。</p>
</div></p>
<p>测试：将带注释的 pdf 重新打印后，LaTeX
编译得到了想要的效果。所以最后的解决方案是将 pdf
全部另存一遍就好了。需要另存的 pdf 数量约 90
个，一个个操作繁琐难当。下面主要记录这次 pdf 批处理的坑爹过程。
<span id="more"></span></p>
<h2 id="imagemagick">imagemagick</h2>
<p>首先想到的是 imagemagick。但是直接运行命令</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">magick <span class="built_in">convert</span> input.pdf output.pdf</span><br></pre></td></tr></table></figure>
<p>但是提示 <mark class="label danger">convert: PDFDelegateFailed \`系统找不到指定的文件</mark>。按照 <a
href="https://xbuba.com/questions/48834749">这里
<i class="fa fa-external-link fa-fw"></i></a>的说法，是因为我计算机中的
64 位 imagemagick 和 32 位的 gs
不兼容。但几经尝试仍无法解决，遂放弃这个方案。</p>
<h2 id="mupdf">mupdf</h2>
<p>mupdf 是在查找解决方法的时候找到的新工具，处理 pdf 更加得心应手，查看
<a href="https://mupdf.com/docs/manual-mutool-convert.html">官方文档
<i class="fa fa-external-link fa-fw"></i></a>，最简单用法</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">mutool <span class="built_in">convert</span> [options] -o output input [pages]</span><br></pre></td></tr></table></figure>
<p>对于 pdf 另存，最简单的即以下命令（output 参数放在前面🤣）</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">mutool <span class="built_in">convert</span> -o output.pdf input.pdf</span><br></pre></td></tr></table></figure>
<p>接着借助批处理命令进行批量转换，开启了新手接触批处理语法的踩坑之路。</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem 关闭输出</span></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">rem 获取当前目录下的所有 pdf 文件</span></span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /b *.pdf&#x27;) <span class="keyword">do</span> (</span><br><span class="line"><span class="comment">	rem 输出 pdf 文件名</span></span><br><span class="line">	@<span class="built_in">echo</span> <span class="variable">%%i</span></span><br><span class="line"><span class="comment">	rem 使用 mutool 进行转换</span></span><br><span class="line">	mutool <span class="built_in">convert</span> -o a<span class="variable">%%~</span>nib.pdf <span class="variable">%%i</span></span><br><span class="line">	)</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<p><code>rem</code> 表示注释，与 <code>::</code> 相同。
<code>mutool convert -o %%i %%i</code>
输出文件与输入文件同名，直接覆盖掉源文件，需要前缀后缀直接在
<code>%%~ni</code> 追加，例如
<code>mutool convert -o a%%~nib.pdf %%i</code>。<code>%%~ni</code>
表示文件名（无后缀）。</p>
<mark class="label success">至此完成任务</mark>
<h2 id="pdfpngjpgpdf">pdf→png→jpg→pdf</h2>
<p>imagemagick 没用上总感觉有些可惜。终于在<a
href="https://mupdf.com/docs/manual-mutool-convert.html">查看 mupdf
文档</a>的时候发现 mupdf 不支持转成 jpg 格式。</p>
<div class="note success"><p>The following single page image formats are also supported: PNG, PNM,
PAM, PBM, PKM. Each page is written to a separate file.</p>
</div>
<p><img
src="https://image.pencilq.com/images/2019/09/01/64006a47a40a198135a90d.jpg" /></p>
<p>直接试一下 pdf to png to jpg to pdf，然后再删掉 png 和 jpg</p>
<p>第一步 pdf 转 png: mupdf</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem 关闭输出</span></span><br><span class="line">@<span class="built_in">echo</span> off </span><br><span class="line"><span class="comment">rem 获取当前目录下的所有 pdf 文件</span></span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /b *.pdf&#x27;) <span class="keyword">do</span> (</span><br><span class="line"><span class="comment">	rem 输出 pdf 文件名</span></span><br><span class="line">	@<span class="built_in">echo</span> <span class="variable">%%i</span></span><br><span class="line"><span class="comment">	rem 使用 mutool  pdf 转 png</span></span><br><span class="line">	mutool <span class="built_in">convert</span> -o <span class="variable">%%~</span>ni.png <span class="variable">%%i</span></span><br><span class="line">	)</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>mutool convert -o output.png input.pdf</code> 得到的 png
文件文件名并非 <code>output.png</code>，而是 <code>output1.png</code>，1
是对应 pdf 的页码。我的 pdf 都只有一页，在循环中，使用
<code>%%~ni1</code> 就可以匹配文件名。</p>
<p>第二步 png 转 jpg: imagemagick</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">rem 关闭输出</span><br><span class="line">@echo off </span><br><span class="line">rem 获取当前目录下的所有 pdf 文件</span><br><span class="line">for /f %%i in (&#x27;dir /b *.pdf&#x27;) do (</span><br><span class="line">	rem 输出 pdf 文件名</span><br><span class="line">	@echo %%i</span><br><span class="line">	rem 使用 mutool  pdf 转 png</span><br><span class="line">	mutool convert -o %%~ni.png %%i</span><br><span class="line"><span class="addition">+	rem 使用 imagemagick png 转 jpg</span></span><br><span class="line"><span class="addition">+	magick convert %%~ni1.png %%~ni.jpg</span></span><br><span class="line">	)</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>第三步 jpg 转 pdf，覆盖原 pdf 文件，完成后删除 png jpg</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">rem 关闭输出</span><br><span class="line">@echo off </span><br><span class="line">rem 获取当前目录下的所有 pdf 文件</span><br><span class="line">for /f %%i in (&#x27;dir /b *.pdf&#x27;) do (</span><br><span class="line">	rem 输出 pdf 文件名</span><br><span class="line">	@echo %%i</span><br><span class="line">	rem mutool  pdf 转 png</span><br><span class="line">	mutool convert -o %%~ni.png %%i</span><br><span class="line">	rem imagemagick png 转 jpg</span><br><span class="line">	magick convert %%~ni1.png %%~ni.jpg</span><br><span class="line"><span class="addition">+	rem imagemagick jpg 转 pdf</span></span><br><span class="line"><span class="addition">+	magick convert %%~ni.jpg %%i</span></span><br><span class="line"><span class="addition">+	rem 删除 png jpg</span></span><br><span class="line"><span class="addition">+	del %%~ni1.png %%~ni.jpg</span></span><br><span class="line">	)</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<mark class="label success">完成</mark>
<p>伪😏 第四步 当我把 mutools 转换得到文件名储存在变量中的时候
<code>temp=%%~ni1</code>，在 for 里面调用 <code>%temp%.png</code>
出错</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">rem 关闭输出</span><br><span class="line">@echo off </span><br><span class="line">rem 获取当前目录下的所有 pdf 文件</span><br><span class="line">for /f %%i in (&#x27;dir /b *.pdf&#x27;) do (</span><br><span class="line">	rem 输出 pdf 文件名</span><br><span class="line">	@echo %%i</span><br><span class="line">	rem mutool  pdf 转 png</span><br><span class="line">	mutool convert -o %%~ni.png %%i</span><br><span class="line"><span class="addition">+	set temp=%%~ni1</span></span><br><span class="line">	rem imagemagick png 转 jpg</span><br><span class="line"><span class="deletion">-	magick convert %%~ni1.png %%~ni.jpg</span></span><br><span class="line"><span class="addition">+	magick convert %temp%.png %%~ni.jpg</span></span><br><span class="line">	)</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>查找资料后发现这跟<a
href="https://www.cnblogs.com/ini_always/archive/2012/02/16/2355031.html">变量延迟扩展</a>有关，需要开启变量延迟
<code>setlocal enabledelayedexpansion</code>，并且使用
<code>!temp!</code> 来引用变量。</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">rem 关闭输出</span><br><span class="line">@echo off </span><br><span class="line"><span class="addition">+ rem 开启变量延迟</span></span><br><span class="line"><span class="addition">+ setlocal enabledelayedexpansion</span></span><br><span class="line">rem 获取当前目录下的所有 pdf 文件</span><br><span class="line">for /f %%i in (&#x27;dir /b *.pdf&#x27;) do (</span><br><span class="line">	rem 输出 pdf 文件名</span><br><span class="line">	@echo %%i</span><br><span class="line">	rem mutool  pdf 转 png</span><br><span class="line">	mutool convert -o %%~ni.png %%i</span><br><span class="line">	set temp=%%~ni1</span><br><span class="line">	rem imagemagick png 转 jpg</span><br><span class="line"><span class="deletion">-	magick convert %temp%.png %%~ni.jpg</span></span><br><span class="line"><span class="addition">+	rem 开启变量延迟后使用 !temp!</span></span><br><span class="line"><span class="addition">+	magick convert !temp!.png %%~ni.jpg</span></span><br><span class="line">	)</span><br><span class="line">pause</span><br></pre></td></tr></table></figure>
<p>最终结果</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem 关闭输出</span></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">rem 开启变量延迟</span></span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="comment">rem 获取当前目录下的所有 pdf 文件</span></span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /b *.pdf&#x27;) <span class="keyword">do</span> (</span><br><span class="line"><span class="comment">	rem 输出 pdf 文件名</span></span><br><span class="line">	@<span class="built_in">echo</span> <span class="variable">%%i</span></span><br><span class="line"><span class="comment">	rem mutool  pdf 转 png</span></span><br><span class="line">	mutool <span class="built_in">convert</span> -o <span class="variable">%%~</span>ni.png <span class="variable">%%i</span></span><br><span class="line">	<span class="built_in">set</span> temp=<span class="variable">%%~</span>ni1</span><br><span class="line"><span class="comment">	rem imagemagick png 转 jpg</span></span><br><span class="line"><span class="comment">	rem 开启变量延迟后使用 !temp!</span></span><br><span class="line">	magick <span class="built_in">convert</span> <span class="variable">!temp!</span>.png <span class="variable">%%~</span>ni.jpg</span><br><span class="line"><span class="comment">	rem imagemagick jpg 转 pdf</span></span><br><span class="line">	magick <span class="built_in">convert</span> <span class="variable">%%~</span>ni.jpg <span class="variable">%%i</span></span><br><span class="line"><span class="comment">	rem 删除 png jpg</span></span><br><span class="line">	<span class="built_in">del</span> <span class="variable">%%~</span>ni1.png <span class="variable">%%~</span>ni.jpg</span><br><span class="line">	)</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure>
<h2 id="总结">总结</h2>
<p>这次 pdf 批量处理经历，主要收获了</p>
<ol type="1">
<li>mupdf 这个顺手的工具</li>
<li>明白了一点基本批处理语法</li>
<li>遇到了变量延迟扩展的坑</li>
<li>没解决 imagemagick 报错的问题 😭😭😭</li>
</ol>
]]></content>
  </entry>
</search>
